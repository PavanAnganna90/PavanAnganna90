{"version":3,"sources":["/Users/pavan/Desktop/Devops-app-dev-cursor/frontend/src/components/infrastructure/__tests__/AwsCostFilters.test.tsx"],"sourcesContent":["/**\n * @jest-environment jsdom\n */\n\nimport React from 'react';\nimport { render, screen } from '@testing-library/react';\nimport userEvent from '@testing-library/user-event';\nimport '@testing-library/jest-dom';\nimport { AwsCostFilters, FilterOptions } from '../AwsCostFilters';\n\n// Mock Heroicons\njest.mock('@heroicons/react/24/outline', () => ({\n  FunnelIcon: ({ className }: { className?: string }) => <div data-testid=\"funnel-icon\" className={className} />,\n  XMarkIcon: ({ className }: { className?: string }) => <div data-testid=\"x-mark-icon\" className={className} />,\n  ChevronDownIcon: ({ className }: { className?: string }) => <div data-testid=\"chevron-down-icon\" className={className} />,\n  GlobeAltIcon: ({ className }: { className?: string }) => <div data-testid=\"globe-alt-icon\" className={className} />,\n  CubeIcon: ({ className }: { className?: string }) => <div data-testid=\"cube-icon\" className={className} />,\n  AdjustmentsHorizontalIcon: ({ className }: { className?: string }) => <div data-testid=\"adjustments-horizontal-icon\" className={className} />\n}));\n\ndescribe('AwsCostFilters', () => {\n  const mockFilters: FilterOptions = {\n    services: [],\n    regions: [],\n    tags: {},\n    dateRange: {\n      start: '2024-01-01',\n      end: '2024-01-31'\n    },\n    groupBy: 'service',\n    granularity: 'daily',\n    costType: 'unblended',\n    includeCredits: false,\n    includeRefunds: false,\n    includeUpfront: false\n  };\n\n  const mockProps = {\n    filters: mockFilters,\n    availableServices: ['EC2', 'S3', 'RDS', 'Lambda'],\n    availableRegions: ['us-east-1', 'us-west-2', 'eu-west-1'],\n    availableTags: {},\n    onFiltersChange: jest.fn(),\n    onResetFilters: jest.fn()\n  };\n\n  beforeEach(() => {\n    jest.clearAllMocks();\n  });\n\n  describe('Component Rendering', () => {\n    it('renders the component with basic elements', () => {\n      render(<AwsCostFilters {...mockProps} />);\n      \n      expect(screen.getByText('Filters & View Options')).toBeInTheDocument();\n      expect(screen.getByText('Services')).toBeInTheDocument();\n      expect(screen.getByText('Regions')).toBeInTheDocument();\n      expect(screen.getByDisplayValue('Group by Service')).toBeInTheDocument();\n    });\n\n    it('renders date range inputs', () => {\n      render(<AwsCostFilters {...mockProps} />);\n      \n      expect(screen.getByLabelText('Start Date')).toBeInTheDocument();\n      expect(screen.getByLabelText('End Date')).toBeInTheDocument();\n      expect(screen.getByDisplayValue('2024-01-01')).toBeInTheDocument();\n      expect(screen.getByDisplayValue('2024-01-31')).toBeInTheDocument();\n    });\n\n    it('shows active filter count when filters are applied', () => {\n      const filtersWithSelections = {\n        ...mockFilters,\n        services: ['EC2', 'S3'],\n        regions: ['us-east-1']\n      };\n\n      render(<AwsCostFilters {...mockProps} filters={filtersWithSelections} />);\n      \n      expect(screen.getByText('3 active')).toBeInTheDocument();\n      expect(screen.getByText('Clear all')).toBeInTheDocument();\n    });\n\n    it('does not show active filter count when no filters are applied', () => {\n      render(<AwsCostFilters {...mockProps} />);\n      \n      expect(screen.queryByText(/active/)).not.toBeInTheDocument();\n      expect(screen.queryByText('Clear all')).not.toBeInTheDocument();\n    });\n  });\n\n  describe('Service Filtering', () => {\n    it('opens services dropdown when clicked', async () => {\n      const user = userEvent.setup();\n      render(<AwsCostFilters {...mockProps} />);\n      \n      const servicesButton = screen.getByText('Services');\n      await user.click(servicesButton);\n      \n      expect(screen.getByText('EC2')).toBeInTheDocument();\n      expect(screen.getByText('S3')).toBeInTheDocument();\n      expect(screen.getByText('RDS')).toBeInTheDocument();\n      expect(screen.getByText('Lambda')).toBeInTheDocument();\n    });\n\n    it('selects and deselects services', async () => {\n      const user = userEvent.setup();\n      render(<AwsCostFilters {...mockProps} />);\n      \n      // Open dropdown\n      await user.click(screen.getByText('Services'));\n      \n      // Select EC2\n      const ec2Checkbox = screen.getByRole('checkbox', { name: /EC2/ });\n      await user.click(ec2Checkbox);\n      \n      expect(mockProps.onFiltersChange).toHaveBeenCalledWith({\n        ...mockFilters,\n        services: ['EC2']\n      });\n    });\n\n    it('shows selected service count in button', () => {\n      const filtersWithServices = {\n        ...mockFilters,\n        services: ['EC2', 'S3']\n      };\n\n      render(<AwsCostFilters {...mockProps} filters={filtersWithServices} />);\n      \n      expect(screen.getByText('2')).toBeInTheDocument();\n    });\n  });\n\n  describe('Reset Functionality', () => {\n    it('calls onResetFilters when clear all is clicked', async () => {\n      const user = userEvent.setup();\n      const filtersWithSelections = {\n        ...mockFilters,\n        services: ['EC2'],\n        regions: ['us-east-1']\n      };\n\n      render(<AwsCostFilters {...mockProps} filters={filtersWithSelections} />);\n      \n      const clearAllButton = screen.getByText('Clear all');\n      await user.click(clearAllButton);\n      \n      expect(mockProps.onResetFilters).toHaveBeenCalled();\n    });\n  });\n\n  describe('Accessibility', () => {\n    it('has proper ARIA labels and roles', () => {\n      render(<AwsCostFilters {...mockProps} />);\n      \n      expect(screen.getByLabelText('Start Date')).toBeInTheDocument();\n      expect(screen.getByLabelText('End Date')).toBeInTheDocument();\n    });\n  });\n\n  describe('Loading State', () => {\n    it('handles loading state properly', () => {\n      render(<AwsCostFilters {...mockProps} isLoading={true} />);\n      \n      // Component should still render but could show loading indicators\n      expect(screen.getByText('Filters & View Options')).toBeInTheDocument();\n    });\n  });\n});\n"],"names":["jest","mock","FunnelIcon","className","div","data-testid","XMarkIcon","ChevronDownIcon","GlobeAltIcon","CubeIcon","AdjustmentsHorizontalIcon","describe","mockFilters","services","regions","tags","dateRange","start","end","groupBy","granularity","costType","includeCredits","includeRefunds","includeUpfront","mockProps","filters","availableServices","availableRegions","availableTags","onFiltersChange","fn","onResetFilters","beforeEach","clearAllMocks","it","render","AwsCostFilters","expect","screen","getByText","toBeInTheDocument","getByDisplayValue","getByLabelText","filtersWithSelections","queryByText","not","user","userEvent","setup","servicesButton","click","ec2Checkbox","getByRole","name","toHaveBeenCalledWith","filtersWithServices","clearAllButton","toHaveBeenCalled","isLoading"],"mappings":"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"}