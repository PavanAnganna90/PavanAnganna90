{"version":3,"names":["_default","cov_20a2nnw63y","s","PermissionMatrix","permissions","setPermissions","f","allPermissions","setAllPermissions","_react","useState","loading","setLoading","error","setError","useEffect","fetchPermissions","response","fetch","ok","b","Error","data","json","err","message","togglePermission","perm","some","p","id","filter","_jsxruntime","jsx","className","map","i","jsxs","groupedPermissions","reduce","acc","category","push","Object","entries","perms","replace","type","checked","onChange","description"],"sources":["/Users/pavan/Desktop/Devops-app-dev-cursor/frontend/src/components/admin/role-management/PermissionMatrix.tsx"],"sourcesContent":["import React, { useState, useEffect } from 'react';\nimport { Permission } from '../../../types/role';\n\ninterface PermissionMatrixProps {\n  permissions: Permission[];\n  setPermissions: (perms: Permission[]) => void;\n}\n\n/**\n * UI for assigning permissions to a role.\n */\nconst PermissionMatrix: React.FC<PermissionMatrixProps> = ({ permissions, setPermissions }) => {\n  const [allPermissions, setAllPermissions] = useState<Permission[]>([]);\n  const [loading, setLoading] = useState(true);\n  const [error, setError] = useState<string | null>(null);\n\n  // Fetch all permissions from API\n  useEffect(() => {\n    const fetchPermissions = async () => {\n      try {\n        const response = await fetch('/api/v1/permissions');\n        if (!response.ok) {\n          throw new Error('Failed to fetch permissions');\n        }\n        const data = await response.json();\n        setAllPermissions(data);\n      } catch (err) {\n        setError(err instanceof Error ? err.message : 'An error occurred');\n      } finally {\n        setLoading(false);\n      }\n    };\n\n    fetchPermissions();\n  }, []);\n  const togglePermission = (perm: Permission) => {\n    if (permissions.some(p => p.id === perm.id)) {\n      setPermissions(permissions.filter(p => p.id !== perm.id));\n    } else {\n      setPermissions([...permissions, perm]);\n    }\n  };\n\n  if (loading) {\n    return (\n      <div className=\"animate-pulse\">\n        <div className=\"grid grid-cols-2 gap-2\">\n          {[1, 2, 3, 4, 5, 6].map(i => (\n            <div key={i} className=\"h-6 bg-gray-300 rounded\"></div>\n          ))}\n        </div>\n      </div>\n    );\n  }\n\n  if (error) {\n    return <div className=\"text-red-600\">Error loading permissions: {error}</div>;\n  }\n\n  // Group permissions by category\n  const groupedPermissions = allPermissions.reduce((acc, perm) => {\n    if (!acc[perm.category]) {\n      acc[perm.category] = [];\n    }\n    acc[perm.category].push(perm);\n    return acc;\n  }, {} as Record<string, Permission[]>);\n\n  return (\n    <div className=\"space-y-4\">\n      {Object.entries(groupedPermissions).map(([category, perms]) => (\n        <div key={category}>\n          <h4 className=\"font-medium text-gray-700 dark:text-gray-300 mb-2 capitalize\">\n            {category.replace('_', ' ')}\n          </h4>\n          <div className=\"grid grid-cols-1 gap-2\">\n            {perms.map(perm => (\n              <label key={perm.id} className=\"flex items-center gap-2\">\n                <input\n                  type=\"checkbox\"\n                  checked={permissions.some(p => p.id === perm.id)}\n                  onChange={() => togglePermission(perm)}\n                  className=\"rounded border-gray-300 text-blue-600 focus:ring-blue-500\"\n                />\n                <span className=\"text-sm\">{perm.description}</span>\n              </label>\n            ))}\n          </div>\n        </div>\n      ))}\n    </div>\n  );\n};\n\nexport default PermissionMatrix;\n"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;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","ignoreList":[]}