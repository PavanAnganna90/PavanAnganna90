{"version":3,"sources":["/Users/pavan/Desktop/Devops-app-dev-cursor/frontend/src/components/alerts/CIFailureAnalyzer.tsx"],"sourcesContent":["/**\n * CI Failure Analyzer Component\n * \n * Provides detailed analysis and context for CI/CD pipeline failures\n * Integrates with alert system to show actionable insights\n */\n\n'use client';\n\nimport React, { useState, useEffect } from 'react';\nimport { Card, CardContent, CardHeader, CardTitle } from '@/components/ui/Card';\nimport { Button } from '@/components/ui/Button';\nimport { Badge } from '@/components/ui/Badge';\nimport { Tabs, TabsContent, TabsList, TabsTrigger } from '@/components/ui/Tabs';\nimport { Modal } from '@/components/ui/Modal';\nimport { useToast } from '@/components/ui/Toast';\n\ninterface CIFailure {\n  id: string;\n  pipeline_id: string;\n  job_name: string;\n  stage: string;\n  failure_type: 'build' | 'test' | 'deploy' | 'security' | 'quality';\n  error_message: string;\n  stack_trace?: string;\n  timestamp: string;\n  duration: number;\n  commit_sha: string;\n  commit_message: string;\n  author: string;\n  branch: string;\n  pull_request?: {\n    number: number;\n    title: string;\n    url: string;\n  };\n  failure_analysis?: {\n    category: string;\n    confidence: number;\n    suggested_fix: string;\n    similar_failures?: number;\n    impact_level: 'low' | 'medium' | 'high' | 'critical';\n  };\n  artifacts?: {\n    logs_url?: string;\n    test_results_url?: string;\n    coverage_url?: string;\n    screenshots?: string[];\n  };\n}\n\ninterface CIFailureStats {\n  total_failures: number;\n  failure_rate: number;\n  avg_time_to_fix: number;\n  common_failure_types: Array<{\n    type: string;\n    count: number;\n    percentage: number;\n  }>;\n  trending_issues: Array<{\n    pattern: string;\n    occurrences: number;\n    first_seen: string;\n    last_seen: string;\n  }>;\n  pipeline_health: {\n    [key: string]: {\n      success_rate: number;\n      avg_duration: number;\n      last_success: string;\n    };\n  };\n}\n\ninterface CIFailureAnalyzerProps {\n  alertId?: string;\n  pipelineId?: string;\n  projectId?: string;\n  compact?: boolean;\n  onFixSuggestion?: (suggestion: string) => void;\n}\n\nconst CIFailureAnalyzer: React.FC<CIFailureAnalyzerProps> = ({\n  alertId,\n  pipelineId,\n  projectId,\n  compact = false,\n  onFixSuggestion,\n}) => {\n  const { showToast } = useToast();\n  \n  const [failures, setFailures] = useState<CIFailure[]>([]);\n  const [stats, setStats] = useState<CIFailureStats | null>(null);\n  const [selectedFailure, setSelectedFailure] = useState<CIFailure | null>(null);\n  const [activeTab, setActiveTab] = useState('failures');\n  const [timeRange, setTimeRange] = useState('24h');\n  const [loading, setLoading] = useState(true);\n  const [showAnalysisModal, setShowAnalysisModal] = useState(false);\n\n  useEffect(() => {\n    loadCIFailures();\n  }, [alertId, pipelineId, projectId, timeRange]);\n\n  const loadCIFailures = async () => {\n    setLoading(true);\n    try {\n      // Mock data - in real implementation, this would call the API\n      const mockFailures: CIFailure[] = [\n        {\n          id: 'fail_1',\n          pipeline_id: 'pipe_123',\n          job_name: 'test-backend',\n          stage: 'test',\n          failure_type: 'test',\n          error_message: 'TypeError: Cannot read property \\'id\\' of undefined',\n          stack_trace: 'at UserService.getUserById (src/services/user.service.ts:45:20)\\nat /tests/user.service.test.ts:123:5',\n          timestamp: '2024-01-16T10:30:00Z',\n          duration: 180,\n          commit_sha: 'abc123def456',\n          commit_message: 'Fix user authentication flow',\n          author: 'john.doe@company.com',\n          branch: 'feature/auth-fix',\n          pull_request: {\n            number: 142,\n            title: 'Fix user authentication flow',\n            url: 'https://github.com/company/repo/pull/142'\n          },\n          failure_analysis: {\n            category: 'Null Pointer Exception',\n            confidence: 85,\n            suggested_fix: 'Add null check before accessing user.id property',\n            similar_failures: 3,\n            impact_level: 'medium'\n          },\n          artifacts: {\n            logs_url: 'https://github.com/company/repo/actions/runs/123/logs',\n            test_results_url: 'https://github.com/company/repo/actions/runs/123/results',\n            coverage_url: 'https://codecov.io/gh/company/repo/commit/abc123'\n          }\n        },\n        {\n          id: 'fail_2',\n          pipeline_id: 'pipe_124',\n          job_name: 'build-frontend',\n          stage: 'build',\n          failure_type: 'build',\n          error_message: 'Module not found: Error: Can\\'t resolve \\'@/components/NewComponent\\'',\n          timestamp: '2024-01-16T09:15:00Z',\n          duration: 45,\n          commit_sha: 'def456ghi789',\n          commit_message: 'Add new dashboard component',\n          author: 'jane.smith@company.com',\n          branch: 'feature/dashboard',\n          failure_analysis: {\n            category: 'Import Error',\n            confidence: 95,\n            suggested_fix: 'Check if the file path is correct and the component exists',\n            similar_failures: 1,\n            impact_level: 'low'\n          },\n          artifacts: {\n            logs_url: 'https://github.com/company/repo/actions/runs/124/logs'\n          }\n        },\n        {\n          id: 'fail_3',\n          pipeline_id: 'pipe_125',\n          job_name: 'security-scan',\n          stage: 'security',\n          failure_type: 'security',\n          error_message: 'High severity vulnerability detected in npm package',\n          timestamp: '2024-01-16T08:45:00Z',\n          duration: 120,\n          commit_sha: 'ghi789jkl012',\n          commit_message: 'Update dependencies',\n          author: 'bob.wilson@company.com',\n          branch: 'chore/deps-update',\n          failure_analysis: {\n            category: 'Security Vulnerability',\n            confidence: 100,\n            suggested_fix: 'Update the vulnerable package to latest secure version',\n            similar_failures: 0,\n            impact_level: 'high'\n          }\n        }\n      ];\n\n      const mockStats: CIFailureStats = {\n        total_failures: 12,\n        failure_rate: 15.8,\n        avg_time_to_fix: 45.5,\n        common_failure_types: [\n          { type: 'test', count: 5, percentage: 41.7 },\n          { type: 'build', count: 4, percentage: 33.3 },\n          { type: 'security', count: 2, percentage: 16.7 },\n          { type: 'deploy', count: 1, percentage: 8.3 }\n        ],\n        trending_issues: [\n          {\n            pattern: 'Null pointer exceptions in user service',\n            occurrences: 3,\n            first_seen: '2024-01-14T00:00:00Z',\n            last_seen: '2024-01-16T10:30:00Z'\n          },\n          {\n            pattern: 'Import path resolution errors',\n            occurrences: 2,\n            first_seen: '2024-01-15T00:00:00Z',\n            last_seen: '2024-01-16T09:15:00Z'\n          }\n        ],\n        pipeline_health: {\n          'test-backend': { success_rate: 92.5, avg_duration: 180, last_success: '2024-01-15T14:30:00Z' },\n          'build-frontend': { success_rate: 88.2, avg_duration: 45, last_success: '2024-01-15T16:45:00Z' },\n          'security-scan': { success_rate: 95.0, avg_duration: 120, last_success: '2024-01-15T12:20:00Z' }\n        }\n      };\n\n      setFailures(mockFailures);\n      setStats(mockStats);\n    } catch (error) {\n      console.error('Failed to load CI failures:', error);\n      showToast('Failed to load CI failure data', 'error');\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  const handleAnalyzeFailure = (failure: CIFailure) => {\n    setSelectedFailure(failure);\n    setShowAnalysisModal(true);\n  };\n\n  const handleApplyFix = (suggestion: string) => {\n    showToast('Fix suggestion applied to development workflow', 'success');\n    if (onFixSuggestion) {\n      onFixSuggestion(suggestion);\n    }\n  };\n\n  const getFailureTypeColor = (type: string) => {\n    switch (type) {\n      case 'build': return 'bg-orange-100 text-orange-800';\n      case 'test': return 'bg-red-100 text-red-800';\n      case 'deploy': return 'bg-purple-100 text-purple-800';\n      case 'security': return 'bg-yellow-100 text-yellow-800';\n      case 'quality': return 'bg-blue-100 text-blue-800';\n      default: return 'bg-gray-100 text-gray-800';\n    }\n  };\n\n  const getImpactColor = (level: string) => {\n    switch (level) {\n      case 'critical': return 'bg-red-500 text-white';\n      case 'high': return 'bg-red-400 text-white';\n      case 'medium': return 'bg-yellow-400 text-black';\n      case 'low': return 'bg-green-400 text-white';\n      default: return 'bg-gray-400 text-white';\n    }\n  };\n\n  if (loading) {\n    return (\n      <div className=\"flex items-center justify-center h-32\">\n        <div className=\"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600\"></div>\n      </div>\n    );\n  }\n\n  if (compact) {\n    return (\n      <Card>\n        <CardHeader>\n          <CardTitle className=\"text-lg\">CI Failure Summary</CardTitle>\n        </CardHeader>\n        <CardContent>\n          <div className=\"space-y-3\">\n            {failures.slice(0, 3).map((failure) => (\n              <div key={failure.id} className=\"flex items-center justify-between p-2 bg-gray-50 rounded\">\n                <div className=\"flex items-center gap-2\">\n                  <Badge className={getFailureTypeColor(failure.failure_type)}>\n                    {failure.failure_type}\n                  </Badge>\n                  <span className=\"text-sm font-medium\">{failure.job_name}</span>\n                </div>\n                <Button size=\"sm\" variant=\"outline\" onClick={() => handleAnalyzeFailure(failure)}>\n                  Analyze\n                </Button>\n              </div>\n            ))}\n          </div>\n        </CardContent>\n      </Card>\n    );\n  }\n\n  return (\n    <div className=\"space-y-6\">\n      {/* Header with Stats */}\n      {stats && (\n        <div className=\"grid grid-cols-1 md:grid-cols-4 gap-4\">\n          <Card>\n            <CardContent className=\"p-4\">\n              <div className=\"text-2xl font-bold text-red-600\">{stats.total_failures}</div>\n              <div className=\"text-sm text-gray-600\">Total Failures</div>\n              <div className=\"text-xs text-gray-500\">{timeRange}</div>\n            </CardContent>\n          </Card>\n          \n          <Card>\n            <CardContent className=\"p-4\">\n              <div className=\"text-2xl font-bold text-orange-600\">{stats.failure_rate}%</div>\n              <div className=\"text-sm text-gray-600\">Failure Rate</div>\n              <div className=\"text-xs text-gray-500\">vs last period</div>\n            </CardContent>\n          </Card>\n          \n          <Card>\n            <CardContent className=\"p-4\">\n              <div className=\"text-2xl font-bold text-blue-600\">{stats.avg_time_to_fix}m</div>\n              <div className=\"text-sm text-gray-600\">Avg Fix Time</div>\n              <div className=\"text-xs text-gray-500\">median resolution</div>\n            </CardContent>\n          </Card>\n          \n          <Card>\n            <CardContent className=\"p-4\">\n              <div className=\"text-2xl font-bold text-green-600\">\n                {stats.common_failure_types[0]?.type || 'N/A'}\n              </div>\n              <div className=\"text-sm text-gray-600\">Top Issue</div>\n              <div className=\"text-xs text-gray-500\">\n                {stats.common_failure_types[0]?.percentage || 0}% of failures\n              </div>\n            </CardContent>\n          </Card>\n        </div>\n      )}\n\n      {/* Time Range Selector */}\n      <div className=\"flex justify-between items-center\">\n        <h2 className=\"text-xl font-semibold\">CI Failure Analysis</h2>\n        <select\n          value={timeRange}\n          onChange={(e) => setTimeRange(e.target.value)}\n          className=\"px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500\"\n        >\n          <option value=\"1h\">Last Hour</option>\n          <option value=\"24h\">Last 24 Hours</option>\n          <option value=\"7d\">Last 7 Days</option>\n          <option value=\"30d\">Last 30 Days</option>\n        </select>\n      </div>\n\n      {/* Main Content */}\n      <Tabs value={activeTab} onValueChange={setActiveTab}>\n        <TabsList className=\"grid w-full grid-cols-3\">\n          <TabsTrigger value=\"failures\">Recent Failures</TabsTrigger>\n          <TabsTrigger value=\"trends\">Trends & Patterns</TabsTrigger>\n          <TabsTrigger value=\"health\">Pipeline Health</TabsTrigger>\n        </TabsList>\n\n        {/* Recent Failures */}\n        <TabsContent value=\"failures\" className=\"space-y-4\">\n          {failures.map((failure) => (\n            <Card key={failure.id}>\n              <CardContent className=\"p-4\">\n                <div className=\"flex items-start justify-between\">\n                  <div className=\"flex-1\">\n                    <div className=\"flex items-center gap-2 mb-2\">\n                      <Badge className={getFailureTypeColor(failure.failure_type)}>\n                        {failure.failure_type}\n                      </Badge>\n                      <Badge variant=\"outline\">{failure.stage}</Badge>\n                      {failure.failure_analysis && (\n                        <Badge className={getImpactColor(failure.failure_analysis.impact_level)}>\n                          {failure.failure_analysis.impact_level}\n                        </Badge>\n                      )}\n                    </div>\n                    \n                    <h3 className=\"font-semibold text-lg mb-1\">{failure.job_name}</h3>\n                    <p className=\"text-red-600 text-sm mb-2\">{failure.error_message}</p>\n                    \n                    <div className=\"grid grid-cols-2 gap-4 text-sm text-gray-600\">\n                      <div>\n                        <span className=\"font-medium\">Branch:</span> {failure.branch}\n                      </div>\n                      <div>\n                        <span className=\"font-medium\">Author:</span> {failure.author}\n                      </div>\n                      <div>\n                        <span className=\"font-medium\">Commit:</span> {failure.commit_sha.slice(0, 8)}\n                      </div>\n                      <div>\n                        <span className=\"font-medium\">Duration:</span> {failure.duration}s\n                      </div>\n                    </div>\n\n                    {failure.commit_message && (\n                      <div className=\"mt-2 text-sm\">\n                        <span className=\"font-medium\">Commit:</span> {failure.commit_message}\n                      </div>\n                    )}\n\n                    {failure.failure_analysis && (\n                      <div className=\"mt-3 p-3 bg-blue-50 rounded-lg\">\n                        <div className=\"text-sm\">\n                          <span className=\"font-medium\">Analysis:</span> {failure.failure_analysis.category}\n                          <span className=\"ml-2 text-blue-600\">\n                            ({failure.failure_analysis.confidence}% confidence)\n                          </span>\n                        </div>\n                        <div className=\"text-sm mt-1\">\n                          <span className=\"font-medium\">Suggested Fix:</span> {failure.failure_analysis.suggested_fix}\n                        </div>\n                      </div>\n                    )}\n                  </div>\n                  \n                  <div className=\"flex flex-col gap-2 ml-4\">\n                    <Button size=\"sm\" onClick={() => handleAnalyzeFailure(failure)}>\n                      View Details\n                    </Button>\n                    {failure.artifacts?.logs_url && (\n                      <Button size=\"sm\" variant=\"outline\" asChild>\n                        <a href={failure.artifacts.logs_url} target=\"_blank\" rel=\"noopener noreferrer\">\n                          View Logs\n                        </a>\n                      </Button>\n                    )}\n                    {failure.pull_request && (\n                      <Button size=\"sm\" variant=\"outline\" asChild>\n                        <a href={failure.pull_request.url} target=\"_blank\" rel=\"noopener noreferrer\">\n                          View PR\n                        </a>\n                      </Button>\n                    )}\n                  </div>\n                </div>\n              </CardContent>\n            </Card>\n          ))}\n        </TabsContent>\n\n        {/* Trends & Patterns */}\n        <TabsContent value=\"trends\" className=\"space-y-4\">\n          {stats && (\n            <>\n              <Card>\n                <CardHeader>\n                  <CardTitle>Common Failure Types</CardTitle>\n                </CardHeader>\n                <CardContent>\n                  <div className=\"space-y-3\">\n                    {stats.common_failure_types.map((type, index) => (\n                      <div key={index} className=\"flex items-center justify-between\">\n                        <div className=\"flex items-center gap-2\">\n                          <Badge className={getFailureTypeColor(type.type)}>\n                            {type.type}\n                          </Badge>\n                          <span className=\"text-sm\">{type.count} failures</span>\n                        </div>\n                        <span className=\"text-sm text-gray-600\">{type.percentage}%</span>\n                      </div>\n                    ))}\n                  </div>\n                </CardContent>\n              </Card>\n\n              <Card>\n                <CardHeader>\n                  <CardTitle>Trending Issues</CardTitle>\n                </CardHeader>\n                <CardContent>\n                  <div className=\"space-y-3\">\n                    {stats.trending_issues.map((issue, index) => (\n                      <div key={index} className=\"p-3 bg-yellow-50 rounded-lg\">\n                        <div className=\"font-medium text-yellow-800\">{issue.pattern}</div>\n                        <div className=\"text-sm text-yellow-600\">\n                          {issue.occurrences} occurrences since {new Date(issue.first_seen).toLocaleDateString()}\n                        </div>\n                      </div>\n                    ))}\n                  </div>\n                </CardContent>\n              </Card>\n            </>\n          )}\n        </TabsContent>\n\n        {/* Pipeline Health */}\n        <TabsContent value=\"health\" className=\"space-y-4\">\n          {stats && (\n            <Card>\n              <CardHeader>\n                <CardTitle>Pipeline Health Status</CardTitle>\n              </CardHeader>\n              <CardContent>\n                <div className=\"space-y-4\">\n                  {Object.entries(stats.pipeline_health).map(([pipeline, health]) => (\n                    <div key={pipeline} className=\"flex items-center justify-between p-3 bg-gray-50 rounded-lg\">\n                      <div>\n                        <h4 className=\"font-medium\">{pipeline}</h4>\n                        <div className=\"text-sm text-gray-600\">\n                          Last success: {new Date(health.last_success).toLocaleString()}\n                        </div>\n                      </div>\n                      <div className=\"text-right\">\n                        <div className=\"text-lg font-semibold text-green-600\">\n                          {health.success_rate}%\n                        </div>\n                        <div className=\"text-sm text-gray-600\">\n                          {health.avg_duration}s avg\n                        </div>\n                      </div>\n                    </div>\n                  ))}\n                </div>\n              </CardContent>\n            </Card>\n          )}\n        </TabsContent>\n      </Tabs>\n\n      {/* Analysis Modal */}\n      {showAnalysisModal && selectedFailure && (\n        <Modal\n          isOpen={showAnalysisModal}\n          onClose={() => setShowAnalysisModal(false)}\n          title={`Failure Analysis: ${selectedFailure.job_name}`}\n        >\n          <div className=\"space-y-4\">\n            <div>\n              <h4 className=\"font-semibold mb-2\">Error Details</h4>\n              <pre className=\"bg-gray-100 p-3 rounded text-sm overflow-x-auto\">\n                {selectedFailure.error_message}\n              </pre>\n            </div>\n\n            {selectedFailure.stack_trace && (\n              <div>\n                <h4 className=\"font-semibold mb-2\">Stack Trace</h4>\n                <pre className=\"bg-gray-100 p-3 rounded text-sm overflow-x-auto max-h-32\">\n                  {selectedFailure.stack_trace}\n                </pre>\n              </div>\n            )}\n\n            {selectedFailure.failure_analysis && (\n              <div className=\"bg-blue-50 p-4 rounded-lg\">\n                <h4 className=\"font-semibold mb-2 text-blue-900\">AI Analysis</h4>\n                <div className=\"space-y-2 text-sm\">\n                  <div>\n                    <span className=\"font-medium\">Category:</span> {selectedFailure.failure_analysis.category}\n                  </div>\n                  <div>\n                    <span className=\"font-medium\">Confidence:</span> {selectedFailure.failure_analysis.confidence}%\n                  </div>\n                  <div>\n                    <span className=\"font-medium\">Suggested Fix:</span>\n                    <p className=\"mt-1\">{selectedFailure.failure_analysis.suggested_fix}</p>\n                  </div>\n                  {selectedFailure.failure_analysis.similar_failures && selectedFailure.failure_analysis.similar_failures > 0 && (\n                    <div>\n                      <span className=\"font-medium\">Similar Failures:</span> {selectedFailure.failure_analysis.similar_failures} in the past\n                    </div>\n                  )}\n                </div>\n                <div className=\"mt-3\">\n                  <Button \n                    size=\"sm\" \n                    onClick={() => handleApplyFix(selectedFailure.failure_analysis!.suggested_fix)}\n                  >\n                    Apply Fix Suggestion\n                  </Button>\n                </div>\n              </div>\n            )}\n\n            <div className=\"flex gap-2\">\n              {selectedFailure.artifacts?.logs_url && (\n                <Button variant=\"outline\" asChild>\n                  <a href={selectedFailure.artifacts.logs_url} target=\"_blank\" rel=\"noopener noreferrer\">\n                    View Full Logs\n                  </a>\n                </Button>\n              )}\n              {selectedFailure.artifacts?.test_results_url && (\n                <Button variant=\"outline\" asChild>\n                  <a href={selectedFailure.artifacts.test_results_url} target=\"_blank\" rel=\"noopener noreferrer\">\n                    Test Results\n                  </a>\n                </Button>\n              )}\n              {selectedFailure.pull_request && (\n                <Button variant=\"outline\" asChild>\n                  <a href={selectedFailure.pull_request.url} target=\"_blank\" rel=\"noopener noreferrer\">\n                    View Pull Request\n                  </a>\n                </Button>\n              )}\n            </div>\n          </div>\n        </Modal>\n      )}\n    </div>\n  );\n};\n\nexport default CIFailureAnalyzer;"],"names":["CIFailureAnalyzer","alertId","pipelineId","projectId","compact","onFixSuggestion","showToast","useToast","failures","setFailures","useState","stats","setStats","selectedFailure","setSelectedFailure","activeTab","setActiveTab","timeRange","setTimeRange","loading","setLoading","showAnalysisModal","setShowAnalysisModal","useEffect","loadCIFailures","mockFailures","id","pipeline_id","job_name","stage","failure_type","error_message","stack_trace","timestamp","duration","commit_sha","commit_message","author","branch","pull_request","number","title","url","failure_analysis","category","confidence","suggested_fix","similar_failures","impact_level","artifacts","logs_url","test_results_url","coverage_url","mockStats","total_failures","failure_rate","avg_time_to_fix","common_failure_types","type","count","percentage","trending_issues","pattern","occurrences","first_seen","last_seen","pipeline_health","success_rate","avg_duration","last_success","error","console","handleAnalyzeFailure","failure","handleApplyFix","suggestion","getFailureTypeColor","getImpactColor","level","div","className","Card","CardHeader","CardTitle","CardContent","slice","map","Badge","span","Button","size","variant","onClick","h2","select","value","onChange","e","target","option","Tabs","onValueChange","TabsList","TabsTrigger","TabsContent","h3","p","asChild","a","href","rel","index","issue","Date","toLocaleDateString","Object","entries","pipeline","health","h4","toLocaleString","Modal","isOpen","onClose","pre"],"mappings":"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"}