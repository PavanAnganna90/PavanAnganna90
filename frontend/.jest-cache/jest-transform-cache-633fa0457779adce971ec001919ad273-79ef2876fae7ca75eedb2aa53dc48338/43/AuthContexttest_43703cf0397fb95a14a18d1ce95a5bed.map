{"version":3,"sources":["/Users/pavan/Desktop/Devops-app-dev-cursor/frontend/src/tests/contexts/AuthContext.test.tsx"],"sourcesContent":["/**\n * Unit tests for AuthContext.\n * Tests authentication state management, API integration, and error handling.\n */\n\nimport React from 'react';\nimport { render, screen, fireEvent, waitFor, act } from '@testing-library/react';\nimport { AuthProvider, useAuth } from '../../contexts/AuthContext';\n\n// Mock fetch globally\nconst mockFetch = jest.fn();\nglobal.fetch = mockFetch;\n\n// Mock localStorage\nconst mockLocalStorage = {\n  getItem: jest.fn(),\n  setItem: jest.fn(),\n  removeItem: jest.fn(),\n  clear: jest.fn(),\n};\nObject.defineProperty(window, 'localStorage', {\n  value: mockLocalStorage,\n});\n\n// Mock sessionStorage\nconst mockSessionStorage = {\n  getItem: jest.fn(),\n  setItem: jest.fn(),\n  removeItem: jest.fn(),\n  clear: jest.fn(),\n};\nObject.defineProperty(window, 'sessionStorage', {\n  value: mockSessionStorage,\n});\n\n// Mock import.meta.env\nObject.defineProperty(global, 'importMeta', {\n  value: {\n    env: {\n      VITE_API_BASE_URL: 'http://localhost:8000/api/v1',\n    },\n  },\n  writable: true,\n});\n\n// Test component that uses auth context\nconst TestComponent: React.FC = () => {\n  const { state, login, logout, refreshToken, getCurrentUser } = useAuth();\n\n  return (\n    <div>\n      <div data-testid=\"auth-status\">\n        {state.isAuthenticated ? 'authenticated' : 'unauthenticated'}\n      </div>\n      <div data-testid=\"loading-status\">\n        {state.isLoading ? 'loading' : 'not-loading'}\n      </div>\n      <div data-testid=\"user-data\">\n        {state.user ? state.user.github_username : 'no-user'}\n      </div>\n      <div data-testid=\"error-message\">\n        {state.error || 'no-error'}\n      </div>\n      <button \n        data-testid=\"login-button\" \n        onClick={() => login('test-code', 'test-state')}\n      >\n        Login\n      </button>\n      <button \n        data-testid=\"logout-button\" \n        onClick={() => logout()}\n      >\n        Logout\n      </button>\n      <button \n        data-testid=\"refresh-button\" \n        onClick={() => refreshToken()}\n      >\n        Refresh\n      </button>\n      <button \n        data-testid=\"get-user-button\" \n        onClick={() => getCurrentUser()}\n      >\n        Get User\n      </button>\n    </div>\n  );\n};\n\n// Mock user data\nconst mockUser = {\n  id: 1,\n  github_id: '12345',\n  github_username: 'testuser',\n  email: 'test@example.com',\n  full_name: 'Test User',\n  avatar_url: 'https://example.com/avatar.jpg',\n  bio: 'Test bio',\n  company: 'Test Company',\n  location: 'Test Location',\n  blog: 'https://test.com',\n  is_active: true,\n  is_superuser: false,\n  created_at: '2023-01-01T00:00:00Z',\n  updated_at: '2023-01-01T00:00:00Z',\n  last_login: '2023-01-01T00:00:00Z',\n};\n\n// Mock tokens\nconst mockTokens = {\n  access_token: 'test-access-token',\n  refresh_token: 'test-refresh-token',\n  token_type: 'bearer',\n  expires_in: 3600,\n};\n\ndescribe('AuthContext', () => {\n  beforeEach(() => {\n    jest.clearAllMocks();\n    mockLocalStorage.getItem.mockReturnValue(null);\n    mockSessionStorage.getItem.mockReturnValue(null);\n  });\n\n  describe('Initial State', () => {\n    it('should render with initial unauthenticated state', () => {\n      render(\n        <AuthProvider>\n          <TestComponent />\n        </AuthProvider>\n      );\n\n      expect(screen.getByTestId('auth-status')).toHaveTextContent('unauthenticated');\n      expect(screen.getByTestId('loading-status')).toHaveTextContent('not-loading');\n      expect(screen.getByTestId('user-data')).toHaveTextContent('no-user');\n      expect(screen.getByTestId('error-message')).toHaveTextContent('no-error');\n    });\n\n    it('should throw error when useAuth is used outside provider', () => {\n      // Suppress console.error for this test\n      const consoleSpy = jest.spyOn(console, 'error').mockImplementation();\n\n      expect(() => {\n        render(<TestComponent />);\n      }).toThrow('useAuth must be used within an AuthProvider');\n\n      consoleSpy.mockRestore();\n    });\n  });\n\n  describe('Initialization from localStorage', () => {\n    it('should restore authentication state from localStorage', async () => {\n      mockLocalStorage.getItem.mockImplementation((key) => {\n        switch (key) {\n          case 'opsight_access_token':\n            return 'stored-access-token';\n          case 'opsight_refresh_token':\n            return 'stored-refresh-token';\n          case 'opsight_user_data':\n            return JSON.stringify(mockUser);\n          default:\n            return null;\n        }\n      });\n\n      // Mock getCurrentUser API call\n      mockFetch.mockResolvedValueOnce({\n        ok: true,\n        json: async () => mockUser,\n      });\n\n      render(\n        <AuthProvider>\n          <TestComponent />\n        </AuthProvider>\n      );\n\n      await waitFor(() => {\n        expect(screen.getByTestId('auth-status')).toHaveTextContent('authenticated');\n        expect(screen.getByTestId('user-data')).toHaveTextContent('testuser');\n      });\n    });\n\n    it('should clear invalid stored data on initialization error', async () => {\n      mockLocalStorage.getItem.mockImplementation((key) => {\n        switch (key) {\n          case 'opsight_access_token':\n            return 'invalid-token';\n          case 'opsight_user_data':\n            return 'invalid-json';\n          default:\n            return null;\n        }\n      });\n\n      render(\n        <AuthProvider>\n          <TestComponent />\n        </AuthProvider>\n      );\n\n      await waitFor(() => {\n        expect(mockLocalStorage.removeItem).toHaveBeenCalledWith('opsight_access_token');\n        expect(mockLocalStorage.removeItem).toHaveBeenCalledWith('opsight_refresh_token');\n        expect(mockLocalStorage.removeItem).toHaveBeenCalledWith('opsight_user_data');\n      });\n    });\n  });\n\n  describe('Login Flow', () => {\n    it('should handle successful login', async () => {\n      // Mock login API call\n      mockFetch.mockResolvedValueOnce({\n        ok: true,\n        json: async () => mockTokens,\n      });\n\n      // Mock user data API call\n      mockFetch.mockResolvedValueOnce({\n        ok: true,\n        json: async () => mockUser,\n      });\n\n      render(\n        <AuthProvider>\n          <TestComponent />\n        </AuthProvider>\n      );\n\n      fireEvent.click(screen.getByTestId('login-button'));\n\n      // Should show loading state\n      expect(screen.getByTestId('loading-status')).toHaveTextContent('loading');\n\n      await waitFor(() => {\n        expect(screen.getByTestId('auth-status')).toHaveTextContent('authenticated');\n        expect(screen.getByTestId('user-data')).toHaveTextContent('testuser');\n        expect(screen.getByTestId('loading-status')).toHaveTextContent('not-loading');\n      });\n\n      // Verify API calls\n      expect(mockFetch).toHaveBeenCalledWith(\n        'http://localhost:8000/api/v1/auth/login/github',\n        expect.objectContaining({\n          method: 'POST',\n          headers: { 'Content-Type': 'application/json' },\n          body: JSON.stringify({ code: 'test-code', state: 'test-state' }),\n        })\n      );\n\n      // Verify localStorage calls\n      expect(mockLocalStorage.setItem).toHaveBeenCalledWith('opsight_access_token', mockTokens.access_token);\n      expect(mockLocalStorage.setItem).toHaveBeenCalledWith('opsight_refresh_token', mockTokens.refresh_token);\n      expect(mockLocalStorage.setItem).toHaveBeenCalledWith('opsight_user_data', JSON.stringify(mockUser));\n    });\n\n    it('should handle login API error', async () => {\n      mockFetch.mockResolvedValueOnce({\n        ok: false,\n        json: async () => ({ detail: 'Login failed' }),\n      });\n\n      render(\n        <AuthProvider>\n          <TestComponent />\n        </AuthProvider>\n      );\n\n      fireEvent.click(screen.getByTestId('login-button'));\n\n      await waitFor(() => {\n        expect(screen.getByTestId('error-message')).toHaveTextContent('Login failed');\n        expect(screen.getByTestId('auth-status')).toHaveTextContent('unauthenticated');\n        expect(screen.getByTestId('loading-status')).toHaveTextContent('not-loading');\n      });\n    });\n\n    it('should handle user data fetch error during login', async () => {\n      // Mock successful token exchange\n      mockFetch.mockResolvedValueOnce({\n        ok: true,\n        json: async () => mockTokens,\n      });\n\n      // Mock failed user data fetch\n      mockFetch.mockResolvedValueOnce({\n        ok: false,\n      });\n\n      render(\n        <AuthProvider>\n          <TestComponent />\n        </AuthProvider>\n      );\n\n      fireEvent.click(screen.getByTestId('login-button'));\n\n      await waitFor(() => {\n        expect(screen.getByTestId('error-message')).toHaveTextContent('Failed to fetch user data');\n        expect(screen.getByTestId('auth-status')).toHaveTextContent('unauthenticated');\n      });\n    });\n  });\n\n  describe('Logout Flow', () => {\n    it('should handle successful logout', async () => {\n      // Set up authenticated state\n      mockLocalStorage.getItem.mockImplementation((key) => {\n        switch (key) {\n          case 'opsight_access_token':\n            return 'test-token';\n          case 'opsight_user_data':\n            return JSON.stringify(mockUser);\n          default:\n            return null;\n        }\n      });\n\n      // Mock getCurrentUser for initialization\n      mockFetch.mockResolvedValueOnce({\n        ok: true,\n        json: async () => mockUser,\n      });\n\n      // Mock logout API call\n      mockFetch.mockResolvedValueOnce({\n        ok: true,\n      });\n\n      render(\n        <AuthProvider>\n          <TestComponent />\n        </AuthProvider>\n      );\n\n      await waitFor(() => {\n        expect(screen.getByTestId('auth-status')).toHaveTextContent('authenticated');\n      });\n\n      fireEvent.click(screen.getByTestId('logout-button'));\n\n      await waitFor(() => {\n        expect(screen.getByTestId('auth-status')).toHaveTextContent('unauthenticated');\n        expect(screen.getByTestId('user-data')).toHaveTextContent('no-user');\n      });\n\n      // Verify localStorage is cleared\n      expect(mockLocalStorage.removeItem).toHaveBeenCalledWith('opsight_access_token');\n      expect(mockLocalStorage.removeItem).toHaveBeenCalledWith('opsight_refresh_token');\n      expect(mockLocalStorage.removeItem).toHaveBeenCalledWith('opsight_user_data');\n    });\n\n    it('should clear state even if logout API fails', async () => {\n      // Set up authenticated state\n      mockLocalStorage.getItem.mockImplementation((key) => {\n        switch (key) {\n          case 'opsight_access_token':\n            return 'test-token';\n          case 'opsight_user_data':\n            return JSON.stringify(mockUser);\n          default:\n            return null;\n        }\n      });\n\n      // Mock getCurrentUser for initialization\n      mockFetch.mockResolvedValueOnce({\n        ok: true,\n        json: async () => mockUser,\n      });\n\n      // Mock failed logout API call\n      mockFetch.mockRejectedValueOnce(new Error('Network error'));\n\n      const consoleSpy = jest.spyOn(console, 'warn').mockImplementation();\n\n      render(\n        <AuthProvider>\n          <TestComponent />\n        </AuthProvider>\n      );\n\n      await waitFor(() => {\n        expect(screen.getByTestId('auth-status')).toHaveTextContent('authenticated');\n      });\n\n      fireEvent.click(screen.getByTestId('logout-button'));\n\n      await waitFor(() => {\n        expect(screen.getByTestId('auth-status')).toHaveTextContent('unauthenticated');\n      });\n\n      expect(consoleSpy).toHaveBeenCalledWith('Logout API call failed:', expect.any(Error));\n      consoleSpy.mockRestore();\n    });\n  });\n\n  describe('Token Refresh', () => {\n    it('should handle successful token refresh', async () => {\n      // Set up authenticated state with refresh token\n      const initialState = {\n        isAuthenticated: true,\n        isLoading: false,\n        user: mockUser,\n        tokens: mockTokens,\n        error: null,\n      };\n\n      const newTokens = {\n        ...mockTokens,\n        access_token: 'new-access-token',\n      };\n\n      // Mock refresh API call\n      mockFetch.mockResolvedValueOnce({\n        ok: true,\n        json: async () => newTokens,\n      });\n\n      render(\n        <AuthProvider>\n          <TestComponent />\n        </AuthProvider>\n      );\n\n      // Set initial state manually for this test\n      fireEvent.click(screen.getByTestId('refresh-button'));\n\n      await waitFor(() => {\n        expect(mockFetch).toHaveBeenCalledWith(\n          'http://localhost:8000/api/v1/auth/refresh',\n          expect.objectContaining({\n            method: 'POST',\n            headers: { 'Content-Type': 'application/json' },\n            body: JSON.stringify({ refresh_token: undefined }),\n          })\n        );\n      });\n    });\n\n    it('should handle refresh token error', async () => {\n      mockFetch.mockResolvedValueOnce({\n        ok: false,\n      });\n\n      render(\n        <AuthProvider>\n          <TestComponent />\n        </AuthProvider>\n      );\n\n      fireEvent.click(screen.getByTestId('refresh-button'));\n\n      await waitFor(() => {\n        // Should logout user on refresh failure\n        expect(screen.getByTestId('auth-status')).toHaveTextContent('unauthenticated');\n      });\n    });\n  });\n\n  describe('Get Current User', () => {\n    it('should fetch and update current user data', async () => {\n      const updatedUser = { ...mockUser, full_name: 'Updated Name' };\n\n      mockFetch.mockResolvedValueOnce({\n        ok: true,\n        json: async () => updatedUser,\n      });\n\n      render(\n        <AuthProvider>\n          <TestComponent />\n        </AuthProvider>\n      );\n\n      fireEvent.click(screen.getByTestId('get-user-button'));\n\n      await waitFor(() => {\n        expect(mockLocalStorage.setItem).toHaveBeenCalledWith(\n          'opsight_user_data',\n          JSON.stringify(updatedUser)\n        );\n      });\n    });\n\n    it('should handle get user API error', async () => {\n      const consoleSpy = jest.spyOn(console, 'error').mockImplementation();\n\n      mockFetch.mockResolvedValueOnce({\n        ok: false,\n      });\n\n      render(\n        <AuthProvider>\n          <TestComponent />\n        </AuthProvider>\n      );\n\n      fireEvent.click(screen.getByTestId('get-user-button'));\n\n      await waitFor(() => {\n        expect(consoleSpy).toHaveBeenCalledWith(\n          'Failed to get current user:',\n          expect.any(Error)\n        );\n      });\n\n      consoleSpy.mockRestore();\n    });\n  });\n\n  describe('Edge Cases', () => {\n    it('should handle malformed localStorage data', () => {\n      mockLocalStorage.getItem.mockImplementation((key) => {\n        if (key === 'opsight_user_data') return '{invalid json}';\n        return null;\n      });\n\n      render(\n        <AuthProvider>\n          <TestComponent />\n        </AuthProvider>\n      );\n\n      expect(screen.getByTestId('auth-status')).toHaveTextContent('unauthenticated');\n    });\n\n    it('should handle missing refresh token during refresh', async () => {\n      render(\n        <AuthProvider>\n          <TestComponent />\n        </AuthProvider>\n      );\n\n      fireEvent.click(screen.getByTestId('refresh-button'));\n\n      // Should not make API call without refresh token\n      expect(mockFetch).not.toHaveBeenCalled();\n    });\n\n    it('should handle network errors gracefully', async () => {\n      mockFetch.mockRejectedValueOnce(new Error('Network error'));\n\n      render(\n        <AuthProvider>\n          <TestComponent />\n        </AuthProvider>\n      );\n\n      fireEvent.click(screen.getByTestId('login-button'));\n\n      await waitFor(() => {\n        expect(screen.getByTestId('error-message')).toHaveTextContent('Network error');\n        expect(screen.getByTestId('auth-status')).toHaveTextContent('unauthenticated');\n      });\n    });\n  });\n}); "],"names":["mockFetch","jest","fn","global","fetch","mockLocalStorage","getItem","setItem","removeItem","clear","Object","defineProperty","window","value","mockSessionStorage","env","VITE_API_BASE_URL","writable","TestComponent","state","login","logout","refreshToken","getCurrentUser","useAuth","div","data-testid","isAuthenticated","isLoading","user","github_username","error","button","onClick","mockUser","id","github_id","email","full_name","avatar_url","bio","company","location","blog","is_active","is_superuser","created_at","updated_at","last_login","mockTokens","access_token","refresh_token","token_type","expires_in","describe","beforeEach","clearAllMocks","mockReturnValue","it","render","AuthProvider","expect","screen","getByTestId","toHaveTextContent","consoleSpy","spyOn","console","mockImplementation","toThrow","mockRestore","key","JSON","stringify","mockResolvedValueOnce","ok","json","waitFor","toHaveBeenCalledWith","fireEvent","click","objectContaining","method","headers","body","code","detail","mockRejectedValueOnce","Error","any","initialState","tokens","newTokens","undefined","updatedUser","not","toHaveBeenCalled"],"mappings":"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"}