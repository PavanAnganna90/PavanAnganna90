{"version":3,"sources":["/Users/pavan/Desktop/Devops-app-dev-cursor/frontend/src/components/rbac/__tests__/PermissionGuard.test.tsx"],"sourcesContent":["/**\n * Unit tests for PermissionGuard component.\n * Tests permission-based rendering, role checks, and resource access control.\n */\n\nimport React from 'react';\nimport { render, screen } from '@testing-library/react';\nimport { PermissionGuard, AdminOnly, RoleGuard, ResourceGuard } from '../PermissionGuard';\nimport { useAuth } from '../../../contexts/AuthContext';\n\n// Mock the useAuth hook\njest.mock('../../../contexts/AuthContext', () => ({\n  useAuth: jest.fn(),\n}));\n\nconst mockUseAuth = useAuth as jest.MockedFunction<typeof useAuth>;\n\n// Test component to wrap with PermissionGuard\nconst TestComponent = () => <div data-testid=\"protected-content\">Protected Content</div>;\n\ndescribe('PermissionGuard', () => {\n  beforeEach(() => {\n    jest.clearAllMocks();\n  });\n\n  describe('permission-based rendering', () => {\n    it('renders children when user has required permission', () => {\n      mockUseAuth.mockReturnValue({\n        hasPermission: jest.fn(() => true),\n        hasRole: jest.fn(() => false),\n        hasAnyRole: jest.fn(() => false),\n        hasAnyPermission: jest.fn(() => false),\n        canAccess: jest.fn(() => false),\n        state: { isAuthenticated: true, user: null, tokens: null, isLoading: false, error: null },\n        login: jest.fn(),\n        logout: jest.fn(),\n        refreshToken: jest.fn(),\n        getCurrentUser: jest.fn(),\n        getUserPermissions: jest.fn(() => []),\n        getUserRoles: jest.fn(() => []),\n        isAdmin: jest.fn(() => false),\n      });\n\n      render(\n        <PermissionGuard permission=\"view_dashboard\">\n          <TestComponent />\n        </PermissionGuard>\n      );\n\n      expect(screen.getByTestId('protected-content')).toBeInTheDocument();\n    });\n\n    it('does not render children when user lacks required permission', () => {\n      mockUseAuth.mockReturnValue({\n        hasPermission: jest.fn(() => false),\n        hasRole: jest.fn(() => false),\n        hasAnyRole: jest.fn(() => false),\n        hasAnyPermission: jest.fn(() => false),\n        canAccess: jest.fn(() => false),\n        state: { isAuthenticated: true, user: null, tokens: null, isLoading: false, error: null },\n        login: jest.fn(),\n        logout: jest.fn(),\n        refreshToken: jest.fn(),\n        getCurrentUser: jest.fn(),\n        getUserPermissions: jest.fn(() => []),\n        getUserRoles: jest.fn(() => []),\n        isAdmin: jest.fn(() => false),\n      });\n\n      render(\n        <PermissionGuard permission=\"view_dashboard\">\n          <TestComponent />\n        </PermissionGuard>\n      );\n\n      expect(screen.queryByTestId('protected-content')).not.toBeInTheDocument();\n    });\n\n    it('renders fallback when user lacks permission and fallback is provided', () => {\n      mockUseAuth.mockReturnValue({\n        hasPermission: jest.fn(() => false),\n        hasRole: jest.fn(() => false),\n        hasAnyRole: jest.fn(() => false),\n        hasAnyPermission: jest.fn(() => false),\n        canAccess: jest.fn(() => false),\n        state: { isAuthenticated: true, user: null, tokens: null, isLoading: false, error: null },\n        login: jest.fn(),\n        logout: jest.fn(),\n        refreshToken: jest.fn(),\n        getCurrentUser: jest.fn(),\n        getUserPermissions: jest.fn(() => []),\n        getUserRoles: jest.fn(() => []),\n        isAdmin: jest.fn(() => false),\n      });\n\n      const fallback = <div data-testid=\"fallback-content\">Access Denied</div>;\n\n      render(\n        <PermissionGuard permission=\"view_dashboard\" fallback={fallback}>\n          <TestComponent />\n        </PermissionGuard>\n      );\n\n      expect(screen.queryByTestId('protected-content')).not.toBeInTheDocument();\n      expect(screen.getByTestId('fallback-content')).toBeInTheDocument();\n    });\n  });\n\n  describe('multiple permissions', () => {\n    it('renders when user has any required permission (requireAll=false)', () => {\n      mockUseAuth.mockReturnValue({\n        hasPermission: jest.fn(() => false),\n        hasRole: jest.fn(() => false),\n        hasAnyRole: jest.fn(() => false),\n        hasAnyPermission: jest.fn(() => true),\n        canAccess: jest.fn(() => false),\n        state: { isAuthenticated: true, user: null, tokens: null, isLoading: false, error: null },\n        login: jest.fn(),\n        logout: jest.fn(),\n        refreshToken: jest.fn(),\n        getCurrentUser: jest.fn(),\n        getUserPermissions: jest.fn(() => []),\n        getUserRoles: jest.fn(() => []),\n        isAdmin: jest.fn(() => false),\n      });\n\n      render(\n        <PermissionGuard permissions={['view_dashboard', 'view_infrastructure']} requireAll={false}>\n          <TestComponent />\n        </PermissionGuard>\n      );\n\n      expect(screen.getByTestId('protected-content')).toBeInTheDocument();\n    });\n\n    it('does not render when user lacks all required permissions (requireAll=true)', () => {\n      mockUseAuth.mockReturnValue({\n        hasPermission: jest.fn(() => false),\n        hasRole: jest.fn(() => false),\n        hasAnyRole: jest.fn(() => false),\n        hasAnyPermission: jest.fn(() => false),\n        canAccess: jest.fn(() => false),\n        state: { isAuthenticated: true, user: null, tokens: null, isLoading: false, error: null },\n        login: jest.fn(),\n        logout: jest.fn(),\n        refreshToken: jest.fn(),\n        getCurrentUser: jest.fn(),\n        getUserPermissions: jest.fn(() => []),\n        getUserRoles: jest.fn(() => []),\n        isAdmin: jest.fn(() => false),\n      });\n\n      render(\n        <PermissionGuard permissions={['view_dashboard', 'view_infrastructure']} requireAll={true}>\n          <TestComponent />\n        </PermissionGuard>\n      );\n\n      expect(screen.queryByTestId('protected-content')).not.toBeInTheDocument();\n    });\n  });\n\n  describe('role-based rendering', () => {\n    it('renders when user has required role', () => {\n      mockUseAuth.mockReturnValue({\n        hasPermission: jest.fn(() => false),\n        hasRole: jest.fn(() => true),\n        hasAnyRole: jest.fn(() => false),\n        hasAnyPermission: jest.fn(() => false),\n        canAccess: jest.fn(() => false),\n        state: { isAuthenticated: true, user: null, tokens: null, isLoading: false, error: null },\n        login: jest.fn(),\n        logout: jest.fn(),\n        refreshToken: jest.fn(),\n        getCurrentUser: jest.fn(),\n        getUserPermissions: jest.fn(() => []),\n        getUserRoles: jest.fn(() => []),\n        isAdmin: jest.fn(() => false),\n      });\n\n      render(\n        <PermissionGuard role=\"organization_owner\">\n          <TestComponent />\n        </PermissionGuard>\n      );\n\n      expect(screen.getByTestId('protected-content')).toBeInTheDocument();\n    });\n\n    it('renders when user has any of the required roles', () => {\n      mockUseAuth.mockReturnValue({\n        hasPermission: jest.fn(() => false),\n        hasRole: jest.fn(() => false),\n        hasAnyRole: jest.fn(() => true),\n        hasAnyPermission: jest.fn(() => false),\n        canAccess: jest.fn(() => false),\n        state: { isAuthenticated: true, user: null, tokens: null, isLoading: false, error: null },\n        login: jest.fn(),\n        logout: jest.fn(),\n        refreshToken: jest.fn(),\n        getCurrentUser: jest.fn(),\n        getUserPermissions: jest.fn(() => []),\n        getUserRoles: jest.fn(() => []),\n        isAdmin: jest.fn(() => false),\n      });\n\n      render(\n        <PermissionGuard roles={['organization_owner', 'devops_admin']}>\n          <TestComponent />\n        </PermissionGuard>\n      );\n\n      expect(screen.getByTestId('protected-content')).toBeInTheDocument();\n    });\n  });\n\n  describe('resource-based access', () => {\n    it('renders when user can access resource with specified action', () => {\n      mockUseAuth.mockReturnValue({\n        hasPermission: jest.fn(() => false),\n        hasRole: jest.fn(() => false),\n        hasAnyRole: jest.fn(() => false),\n        hasAnyPermission: jest.fn(() => false),\n        canAccess: jest.fn(() => true),\n        state: { isAuthenticated: true, user: null, tokens: null, isLoading: false, error: null },\n        login: jest.fn(),\n        logout: jest.fn(),\n        refreshToken: jest.fn(),\n        getCurrentUser: jest.fn(),\n        getUserPermissions: jest.fn(() => []),\n        getUserRoles: jest.fn(() => []),\n        isAdmin: jest.fn(() => false),\n      });\n\n      render(\n        <PermissionGuard resource=\"infrastructure\" action=\"manage\">\n          <TestComponent />\n        </PermissionGuard>\n      );\n\n      expect(screen.getByTestId('protected-content')).toBeInTheDocument();\n    });\n\n    it('does not render when user cannot access resource with specified action', () => {\n      mockUseAuth.mockReturnValue({\n        hasPermission: jest.fn(() => false),\n        hasRole: jest.fn(() => false),\n        hasAnyRole: jest.fn(() => false),\n        hasAnyPermission: jest.fn(() => false),\n        canAccess: jest.fn(() => false),\n        state: { isAuthenticated: true, user: null, tokens: null, isLoading: false, error: null },\n        login: jest.fn(),\n        logout: jest.fn(),\n        refreshToken: jest.fn(),\n        getCurrentUser: jest.fn(),\n        getUserPermissions: jest.fn(() => []),\n        getUserRoles: jest.fn(() => []),\n        isAdmin: jest.fn(() => false),\n      });\n\n      render(\n        <PermissionGuard resource=\"infrastructure\" action=\"manage\">\n          <TestComponent />\n        </PermissionGuard>\n      );\n\n      expect(screen.queryByTestId('protected-content')).not.toBeInTheDocument();\n    });\n  });\n\n  describe('convenience components', () => {\n    describe('AdminOnly', () => {\n      it('renders for admin users', () => {\n        mockUseAuth.mockReturnValue({\n          hasPermission: jest.fn(() => false),\n          hasRole: jest.fn(() => false),\n          hasAnyRole: jest.fn(() => true),\n          hasAnyPermission: jest.fn(() => false),\n          canAccess: jest.fn(() => false),\n          state: { isAuthenticated: true, user: null, tokens: null, isLoading: false, error: null },\n          login: jest.fn(),\n          logout: jest.fn(),\n          refreshToken: jest.fn(),\n          getCurrentUser: jest.fn(),\n          getUserPermissions: jest.fn(() => []),\n          getUserRoles: jest.fn(() => []),\n          isAdmin: jest.fn(() => false),\n        });\n\n        render(\n          <AdminOnly>\n            <TestComponent />\n          </AdminOnly>\n        );\n\n        expect(screen.getByTestId('protected-content')).toBeInTheDocument();\n      });\n\n      it('does not render for non-admin users', () => {\n        mockUseAuth.mockReturnValue({\n          hasPermission: jest.fn(() => false),\n          hasRole: jest.fn(() => false),\n          hasAnyRole: jest.fn(() => false),\n          hasAnyPermission: jest.fn(() => false),\n          canAccess: jest.fn(() => false),\n          state: { isAuthenticated: true, user: null, tokens: null, isLoading: false, error: null },\n          login: jest.fn(),\n          logout: jest.fn(),\n          refreshToken: jest.fn(),\n          getCurrentUser: jest.fn(),\n          getUserPermissions: jest.fn(() => []),\n          getUserRoles: jest.fn(() => []),\n          isAdmin: jest.fn(() => false),\n        });\n\n        render(\n          <AdminOnly>\n            <TestComponent />\n          </AdminOnly>\n        );\n\n        expect(screen.queryByTestId('protected-content')).not.toBeInTheDocument();\n      });\n    });\n\n    describe('RoleGuard', () => {\n      it('renders when user has the specified role', () => {\n        mockUseAuth.mockReturnValue({\n          hasPermission: jest.fn(() => false),\n          hasRole: jest.fn(() => true),\n          hasAnyRole: jest.fn(() => false),\n          hasAnyPermission: jest.fn(() => false),\n          canAccess: jest.fn(() => false),\n          state: { isAuthenticated: true, user: null, tokens: null, isLoading: false, error: null },\n          login: jest.fn(),\n          logout: jest.fn(),\n          refreshToken: jest.fn(),\n          getCurrentUser: jest.fn(),\n          getUserPermissions: jest.fn(() => []),\n          getUserRoles: jest.fn(() => []),\n          isAdmin: jest.fn(() => false),\n        });\n\n        render(\n          <RoleGuard role=\"devops_admin\">\n            <TestComponent />\n          </RoleGuard>\n        );\n\n        expect(screen.getByTestId('protected-content')).toBeInTheDocument();\n      });\n    });\n\n    describe('ResourceGuard', () => {\n      it('renders when user can access the resource', () => {\n        mockUseAuth.mockReturnValue({\n          hasPermission: jest.fn(() => false),\n          hasRole: jest.fn(() => false),\n          hasAnyRole: jest.fn(() => false),\n          hasAnyPermission: jest.fn(() => false),\n          canAccess: jest.fn(() => true),\n          state: { isAuthenticated: true, user: null, tokens: null, isLoading: false, error: null },\n          login: jest.fn(),\n          logout: jest.fn(),\n          refreshToken: jest.fn(),\n          getCurrentUser: jest.fn(),\n          getUserPermissions: jest.fn(() => []),\n          getUserRoles: jest.fn(() => []),\n          isAdmin: jest.fn(() => false),\n        });\n\n        render(\n          <ResourceGuard resource=\"teams\" action=\"create\">\n            <TestComponent />\n          </ResourceGuard>\n        );\n\n        expect(screen.getByTestId('protected-content')).toBeInTheDocument();\n      });\n    });\n  });\n});"],"names":["jest","mock","useAuth","fn","mockUseAuth","TestComponent","div","data-testid","describe","beforeEach","clearAllMocks","it","mockReturnValue","hasPermission","hasRole","hasAnyRole","hasAnyPermission","canAccess","state","isAuthenticated","user","tokens","isLoading","error","login","logout","refreshToken","getCurrentUser","getUserPermissions","getUserRoles","isAdmin","render","PermissionGuard","permission","expect","screen","getByTestId","toBeInTheDocument","queryByTestId","not","fallback","permissions","requireAll","role","roles","resource","action","AdminOnly","RoleGuard","ResourceGuard"],"mappings":"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"}