{"version":3,"sources":["/Users/pavan/Desktop/Devops-app-dev-cursor/frontend/src/utils/accessibility.ts"],"sourcesContent":["/**\n * Accessibility utilities for WCAG 2.1 AA compliance\n * Provides color contrast calculations, ARIA helpers, and keyboard navigation\n */\n\n// Color contrast calculation utilities\nexport interface ContrastResult {\n  ratio: number;\n  isAA: boolean;\n  isAAA: boolean;\n  level: 'fail' | 'AA' | 'AAA';\n}\n\n/**\n * Convert hex color to RGB values\n */\nfunction hexToRgb(hex: string): { r: number; g: number; b: number } | null {\n  const result = /^#?([a-f\\d]{2})([a-f\\d]{2})([a-f\\d]{2})$/i.exec(hex);\n  return result\n    ? {\n        r: parseInt(result[1], 16),\n        g: parseInt(result[2], 16),\n        b: parseInt(result[3], 16),\n      }\n    : null;\n}\n\n/**\n * Calculate relative luminance of a color\n * Based on WCAG 2.1 specification\n */\nfunction getRelativeLuminance(r: number, g: number, b: number): number {\n  const normalize = (channel: number) => {\n    const c = channel / 255;\n    return c <= 0.03928 ? c / 12.92 : Math.pow((c + 0.055) / 1.055, 2.4);\n  };\n\n  return 0.2126 * normalize(r) + 0.7152 * normalize(g) + 0.0722 * normalize(b);\n}\n\n/**\n * Parse OKLCH color format to RGB\n */\nfunction oklchToRgb(oklch: string): { r: number; g: number; b: number } | null {\n  const match = oklch.match(/oklch\\(([0-9.]+)\\s+([0-9.]+)\\s+([0-9.]+)\\)/);\n  if (!match) return null;\n\n  const [, l, c, h] = match.map(Number);\n  \n  // Simple approximation - in production, use a proper color conversion library\n  const lightness = l * 255;\n  return { r: lightness, g: lightness, b: lightness };\n}\n\n/**\n * Parse CSS color to RGB values\n */\nfunction parseColor(color: string): { r: number; g: number; b: number } | null {\n  if (color.startsWith('#')) {\n    return hexToRgb(color);\n  }\n  \n  if (color.startsWith('oklch(')) {\n    return oklchToRgb(color);\n  }\n\n  if (color.startsWith('rgb(')) {\n    const match = color.match(/rgb\\(([0-9]+),\\s*([0-9]+),\\s*([0-9]+)\\)/);\n    if (match) {\n      return {\n        r: parseInt(match[1]),\n        g: parseInt(match[2]),\n        b: parseInt(match[3]),\n      };\n    }\n  }\n\n  // Default fallback for CSS color names\n  const canvas = document.createElement('canvas');\n  const ctx = canvas.getContext('2d');\n  if (!ctx) return null;\n  \n  ctx.fillStyle = color;\n  const rgba = ctx.fillStyle;\n  \n  if (rgba.startsWith('#')) {\n    return hexToRgb(rgba);\n  }\n  \n  return null;\n}\n\n/**\n * Calculate color contrast ratio between two colors\n * Returns ratio and WCAG compliance levels\n */\nexport function calculateContrastRatio(\n  foreground: string,\n  background: string\n): ContrastResult {\n  const fg = parseColor(foreground);\n  const bg = parseColor(background);\n\n  if (!fg || !bg) {\n    return { ratio: 1, isAA: false, isAAA: false, level: 'fail' };\n  }\n\n  const fgLuminance = getRelativeLuminance(fg.r, fg.g, fg.b);\n  const bgLuminance = getRelativeLuminance(bg.r, bg.g, bg.b);\n\n  const lighter = Math.max(fgLuminance, bgLuminance);\n  const darker = Math.min(fgLuminance, bgLuminance);\n  const ratio = (lighter + 0.05) / (darker + 0.05);\n\n  const isAA = ratio >= 4.5;\n  const isAAA = ratio >= 7;\n\n  return {\n    ratio: Math.round(ratio * 100) / 100,\n    isAA,\n    isAAA,\n    level: isAAA ? 'AAA' : isAA ? 'AA' : 'fail',\n  };\n}\n\n/**\n * Check if a color combination meets WCAG contrast requirements\n */\nexport function meetsContrastRequirement(\n  foreground: string,\n  background: string,\n  level: 'AA' | 'AAA' = 'AA'\n): boolean {\n  const result = calculateContrastRatio(foreground, background);\n  return level === 'AA' ? result.isAA : result.isAAA;\n}\n\n/**\n * Validate all theme color combinations for contrast compliance\n */\nexport function validateThemeContrast(theme: any): {\n  issues: Array<{\n    combination: string;\n    foreground: string;\n    background: string;\n    ratio: number;\n    level: string;\n  }>;\n  isCompliant: boolean;\n} {\n  const issues: Array<{\n    combination: string;\n    foreground: string;\n    background: string;\n    ratio: number;\n    level: string;\n  }> = [];\n\n  // Common text/background combinations to check\n  const combinations = [\n    { name: 'Primary text on light background', fg: theme.semantic?.text?.primary || '#000000', bg: theme.semantic?.background?.primary || '#ffffff' },\n    { name: 'Secondary text on light background', fg: theme.semantic?.text?.secondary || '#666666', bg: theme.semantic?.background?.primary || '#ffffff' },\n    { name: 'Primary button text', fg: '#ffffff', bg: theme.colors?.primary?.[500] || '#0066cc' },\n    { name: 'Link text', fg: theme.colors?.primary?.[600] || '#0052a3', bg: theme.semantic?.background?.primary || '#ffffff' },\n  ];\n\n  combinations.forEach((combo) => {\n    const result = calculateContrastRatio(combo.fg, combo.bg);\n    if (!result.isAA) {\n      issues.push({\n        combination: combo.name,\n        foreground: combo.fg,\n        background: combo.bg,\n        ratio: result.ratio,\n        level: result.level,\n      });\n    }\n  });\n\n  return {\n    issues,\n    isCompliant: issues.length === 0,\n  };\n}\n\n// ARIA and Semantic HTML utilities\nexport interface AriaAttributes {\n  'aria-label'?: string;\n  'aria-labelledby'?: string;\n  'aria-describedby'?: string;\n  'aria-expanded'?: boolean;\n  'aria-hidden'?: boolean;\n  'aria-live'?: 'polite' | 'assertive' | 'off';\n  'aria-current'?: 'page' | 'step' | 'location' | 'date' | 'time' | 'true' | 'false';\n  'aria-modal'?: boolean;\n  'aria-selected'?: boolean;\n  'aria-checked'?: boolean;\n  role?: string;\n  tabIndex?: number;\n}\n\n/**\n * Generate appropriate ARIA attributes for common component patterns\n */\nexport function generateAriaAttributes(\n  type: 'button' | 'modal' | 'dropdown' | 'tab' | 'toggle' | 'input',\n  options: {\n    label?: string;\n    expanded?: boolean;\n    current?: boolean;\n    describedBy?: string;\n    hidden?: boolean;\n    live?: 'polite' | 'assertive';\n  } = {}\n): AriaAttributes {\n  const base: AriaAttributes = {};\n\n  switch (type) {\n    case 'button':\n      if (options.label) base['aria-label'] = options.label;\n      if (options.expanded !== undefined) base['aria-expanded'] = options.expanded;\n      break;\n\n    case 'modal':\n      base.role = 'dialog';\n      base['aria-modal'] = true;\n      if (options.label) base['aria-label'] = options.label;\n      break;\n\n    case 'dropdown':\n      base.role = 'menu';\n      base['aria-expanded'] = options.expanded || false;\n      break;\n\n    case 'tab':\n      base.role = 'tab';\n      base['aria-selected'] = options.current || false;\n      if (options.current) base['aria-current'] = 'page';\n      break;\n\n    case 'toggle':\n      base.role = 'switch';\n      base['aria-checked'] = options.expanded || false;\n      if (options.label) base['aria-label'] = options.label;\n      break;\n\n    case 'input':\n      if (options.describedBy) base['aria-describedby'] = options.describedBy;\n      if (options.label) base['aria-label'] = options.label;\n      break;\n  }\n\n  if (options.hidden) base['aria-hidden'] = true;\n  if (options.live) base['aria-live'] = options.live;\n\n  return base;\n}\n\n/**\n * Create announcements for screen readers\n */\nexport function announceToScreenReader(\n  message: string,\n  priority: 'polite' | 'assertive' = 'polite'\n): void {\n  const announcement = document.createElement('div');\n  announcement.setAttribute('aria-live', priority);\n  announcement.setAttribute('aria-atomic', 'true');\n  announcement.className = 'sr-only';\n  announcement.textContent = message;\n\n  document.body.appendChild(announcement);\n\n  // Remove after announcement\n  setTimeout(() => {\n    document.body.removeChild(announcement);\n  }, 1000);\n}\n\n// Keyboard navigation utilities\nexport interface KeyboardNavigation {\n  onKeyDown: (event: KeyboardEvent) => void;\n  trapFocus: (container: HTMLElement) => () => void;\n  manageFocus: (elements: HTMLElement[]) => void;\n}\n\n/**\n * Get all focusable elements within a container\n */\nexport function getFocusableElements(container: HTMLElement): HTMLElement[] {\n  const focusableSelectors = [\n    'button:not([disabled])',\n    'input:not([disabled])',\n    'select:not([disabled])',\n    'textarea:not([disabled])',\n    'a[href]',\n    '[tabindex]:not([tabindex=\"-1\"])',\n    '[contenteditable]',\n  ].join(', ');\n\n  return Array.from(container.querySelectorAll(focusableSelectors));\n}\n\n/**\n * Trap focus within a container (for modals, dropdowns)\n */\nexport function createFocusTrap(container: HTMLElement): () => void {\n  const focusableElements = getFocusableElements(container);\n  const firstElement = focusableElements[0];\n  const lastElement = focusableElements[focusableElements.length - 1];\n\n  const handleKeyDown = (event: KeyboardEvent) => {\n    if (event.key === 'Tab') {\n      if (event.shiftKey) {\n        // Shift + Tab\n        if (document.activeElement === firstElement) {\n          event.preventDefault();\n          lastElement?.focus();\n        }\n      } else {\n        // Tab\n        if (document.activeElement === lastElement) {\n          event.preventDefault();\n          firstElement?.focus();\n        }\n      }\n    }\n\n    if (event.key === 'Escape') {\n      // Allow parent to handle escape\n      event.stopPropagation();\n    }\n  };\n\n  container.addEventListener('keydown', handleKeyDown);\n\n  // Focus first element\n  firstElement?.focus();\n\n  // Return cleanup function\n  return () => {\n    container.removeEventListener('keydown', handleKeyDown);\n  };\n}\n\n/**\n * Create keyboard navigation for a list of elements\n */\nexport function createKeyboardNavigation(\n  elements: HTMLElement[],\n  options: {\n    orientation?: 'horizontal' | 'vertical' | 'both';\n    loop?: boolean;\n    onActivate?: (element: HTMLElement, index: number) => void;\n  } = {}\n): (event: KeyboardEvent) => void {\n  const { orientation = 'vertical', loop = true, onActivate } = options;\n  let currentIndex = 0;\n\n  const getNextIndex = (direction: 'next' | 'prev'): number => {\n    if (direction === 'next') {\n      return loop\n        ? (currentIndex + 1) % elements.length\n        : Math.min(currentIndex + 1, elements.length - 1);\n    } else {\n      return loop\n        ? currentIndex === 0 ? elements.length - 1 : currentIndex - 1\n        : Math.max(currentIndex - 1, 0);\n    }\n  };\n\n  return (event: KeyboardEvent) => {\n    const { key } = event;\n    let handled = false;\n\n    switch (key) {\n      case 'ArrowDown':\n        if (orientation === 'vertical' || orientation === 'both') {\n          currentIndex = getNextIndex('next');\n          handled = true;\n        }\n        break;\n\n      case 'ArrowUp':\n        if (orientation === 'vertical' || orientation === 'both') {\n          currentIndex = getNextIndex('prev');\n          handled = true;\n        }\n        break;\n\n      case 'ArrowRight':\n        if (orientation === 'horizontal' || orientation === 'both') {\n          currentIndex = getNextIndex('next');\n          handled = true;\n        }\n        break;\n\n      case 'ArrowLeft':\n        if (orientation === 'horizontal' || orientation === 'both') {\n          currentIndex = getNextIndex('prev');\n          handled = true;\n        }\n        break;\n\n      case 'Home':\n        currentIndex = 0;\n        handled = true;\n        break;\n\n      case 'End':\n        currentIndex = elements.length - 1;\n        handled = true;\n        break;\n\n      case 'Enter':\n      case ' ':\n        if (onActivate) {\n          onActivate(elements[currentIndex], currentIndex);\n          handled = true;\n        }\n        break;\n    }\n\n    if (handled) {\n      event.preventDefault();\n      elements[currentIndex]?.focus();\n    }\n  };\n}\n\n// Reduced motion utilities\nexport function prefersReducedMotion(): boolean {\n  return window.matchMedia('(prefers-reduced-motion: reduce)').matches;\n}\n\nexport function respectReducedMotion<T>(\n  normalValue: T,\n  reducedValue: T\n): T {\n  return prefersReducedMotion() ? reducedValue : normalValue;\n}\n\n// Screen reader utilities\nexport const ScreenReaderClass = 'sr-only';\n\nexport const screenReaderStyles = `\n  .${ScreenReaderClass} {\n    position: absolute;\n    width: 1px;\n    height: 1px;\n    padding: 0;\n    margin: -1px;\n    overflow: hidden;\n    clip: rect(0, 0, 0, 0);\n    white-space: nowrap;\n    border: 0;\n  }\n`;\n\n// Focus management utilities\nexport function saveFocusPosition(): () => void {\n  const activeElement = document.activeElement as HTMLElement;\n  \n  return () => {\n    if (activeElement && typeof activeElement.focus === 'function') {\n      activeElement.focus();\n    }\n  };\n}\n\nexport function setFocusToFirstError(container: HTMLElement): void {\n  const errorElement = container.querySelector('[aria-invalid=\"true\"], .error input, .error textarea, .error select');\n  if (errorElement && typeof (errorElement as HTMLElement).focus === 'function') {\n    (errorElement as HTMLElement).focus();\n  }\n}\n\n// Validation utilities for common accessibility patterns\nexport function validateHeadingStructure(container: HTMLElement = document.body): {\n  isValid: boolean;\n  issues: string[];\n} {\n  const headings = Array.from(container.querySelectorAll('h1, h2, h3, h4, h5, h6'));\n  const issues: string[] = [];\n  \n  let hasH1 = false;\n  let lastLevel = 0;\n\n  headings.forEach((heading, index) => {\n    const level = parseInt(heading.tagName.substring(1));\n    \n    if (level === 1) {\n      if (hasH1) {\n        issues.push(`Multiple h1 elements found. Page should have only one h1.`);\n      }\n      hasH1 = true;\n    }\n\n    if (index === 0 && level !== 1) {\n      issues.push(`First heading should be h1, found ${heading.tagName.toLowerCase()}`);\n    }\n\n    if (lastLevel > 0 && level > lastLevel + 1) {\n      issues.push(`Heading level skipped: ${heading.tagName.toLowerCase()} follows h${lastLevel}`);\n    }\n\n    lastLevel = level;\n  });\n\n  if (!hasH1 && headings.length > 0) {\n    issues.push('No h1 element found. Page should have exactly one h1.');\n  }\n\n  return {\n    isValid: issues.length === 0,\n    issues,\n  };\n}\n\nexport function validateFormLabels(container: HTMLElement = document.body): {\n  isValid: boolean;\n  issues: string[];\n} {\n  const inputs = Array.from(container.querySelectorAll('input, textarea, select'));\n  const issues: string[] = [];\n\n  inputs.forEach((input) => {\n    const hasLabel = \n      input.hasAttribute('aria-label') ||\n      input.hasAttribute('aria-labelledby') ||\n      container.querySelector(`label[for=\"${input.id}\"]`) ||\n      input.closest('label');\n\n    if (!hasLabel) {\n      issues.push(`Form input missing label: ${input.tagName.toLowerCase()}${input.id ? `#${input.id}` : ''}`);\n    }\n  });\n\n  return {\n    isValid: issues.length === 0,\n    issues,\n  };\n}\n\n// Export validation function for all contextual themes\nexport function validateAllContextualThemes(): boolean {\n  // Implementation for validating contextual themes\n  // This would check that all contextual themes meet accessibility standards\n  return true;\n} "],"names":["ScreenReaderClass","announceToScreenReader","calculateContrastRatio","createFocusTrap","createKeyboardNavigation","generateAriaAttributes","getFocusableElements","meetsContrastRequirement","prefersReducedMotion","respectReducedMotion","saveFocusPosition","screenReaderStyles","setFocusToFirstError","validateAllContextualThemes","validateFormLabels","validateHeadingStructure","validateThemeContrast","hexToRgb","hex","result","exec","r","parseInt","g","b","getRelativeLuminance","normalize","channel","c","Math","pow","oklchToRgb","oklch","match","l","h","map","Number","lightness","parseColor","color","startsWith","canvas","document","createElement","ctx","getContext","fillStyle","rgba","foreground","background","fg","bg","ratio","isAA","isAAA","level","fgLuminance","bgLuminance","lighter","max","darker","min","round","theme","issues","combinations","name","semantic","text","primary","secondary","colors","forEach","combo","push","combination","isCompliant","length","type","options","base","label","expanded","undefined","role","current","describedBy","hidden","live","message","priority","announcement","setAttribute","className","textContent","body","appendChild","setTimeout","removeChild","container","focusableSelectors","join","Array","from","querySelectorAll","focusableElements","firstElement","lastElement","handleKeyDown","event","key","shiftKey","activeElement","preventDefault","focus","stopPropagation","addEventListener","removeEventListener","elements","orientation","loop","onActivate","currentIndex","getNextIndex","direction","handled","window","matchMedia","matches","normalValue","reducedValue","errorElement","querySelector","headings","hasH1","lastLevel","heading","index","tagName","substring","toLowerCase","isValid","inputs","input","hasLabel","hasAttribute","id","closest"],"mappings":"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"}