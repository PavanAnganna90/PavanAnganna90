{"version":3,"sources":["/Users/pavan/Desktop/Devops-app-dev-cursor/frontend/src/components/charts/BarChart.tsx"],"sourcesContent":["'use client';\n\nimport React, { useMemo } from 'react';\nimport { useChartTheme } from '@/hooks/useChartTheme';\nimport { \n  sanitizeBarChartData, \n  sanitizeChartProps, \n  validationMonitor,\n  ChartValidationError \n} from '@/lib/chartValidation';\n\ninterface BarChartProps {\n  data: Array<{ label: string; value: number; color?: string }>;\n  height?: number;\n  showLabels?: boolean;\n  showValues?: boolean;\n  animated?: boolean;\n  className?: string;\n  barSpacing?: number;\n}\n\nexport const BarChart = React.memo(function BarChart(props: BarChartProps) {\n  const { getColor } = useChartTheme();\n  \n  // Validate and sanitize props\n  const {\n    data: rawData,\n    height = 120,\n    showLabels = true,\n    showValues = false,\n    animated = true,\n    className = '',\n    barSpacing = 8\n  } = useMemo(() => {\n    return validationMonitor.measureValidation('BarChart', () => {\n      try {\n        const sanitizedProps = sanitizeChartProps(props);\n        const sanitizedData = sanitizeBarChartData(props.data);\n        \n        return {\n          ...props,\n          ...sanitizedProps,\n          data: sanitizedData\n        };\n      } catch (error) {\n        if (error instanceof ChartValidationError) {\n          console.error('BarChart validation error:', error);\n          // Return safe defaults\n          return {\n            ...props,\n            data: [],\n            height: 120,\n            showLabels: true,\n            showValues: false,\n            animated: true,\n            className: '',\n            barSpacing: 8\n          };\n        }\n        throw error;\n      }\n    });\n  }, [props]);\n\n  const data = rawData;\n  \n  if (!data || data.length === 0) {\n    return (\n      <div className={`w-full bg-gray-100 dark:bg-invary-secondary/20 rounded ${className}`} style={{ height }}>\n        <div className=\"flex items-center justify-center h-full text-invary-neutral dark:text-gray-400 text-xs\">\n          No data\n        </div>\n      </div>\n    );\n  }\n\n  const maxValue = Math.max(...data.map(d => d.value));\n  const labelHeight = showLabels ? 20 : 0;\n  const chartHeight = height - labelHeight;\n\n  return (\n    <div className={`w-full ${className}`} style={{ height }}>\n      <div className=\"flex items-end justify-between h-full\">\n        {data.map((item, index) => {\n          const barHeight = (item.value / maxValue) * chartHeight;\n          const barColor = item.color || getColor(index);\n          \n          return (\n            <div\n              key={index}\n              className=\"flex flex-col items-center flex-1\"\n              style={{ marginRight: index < data.length - 1 ? barSpacing : 0 }}\n            >\n              {/* Value label */}\n              {showValues && (\n                <div className=\"text-xs text-invary-neutral dark:text-gray-300 mb-1 font-medium\">\n                  {item.value}\n                </div>\n              )}\n              \n              {/* Bar */}\n              <div className=\"relative w-full flex items-end\">\n                <div\n                  className={`w-full rounded-t ${animated ? 'transition-all duration-500 ease-out' : ''}`}\n                  style={{\n                    height: barHeight,\n                    backgroundColor: barColor,\n                    backgroundImage: `linear-gradient(to top, ${barColor}, ${barColor}dd)`\n                  }}\n                >\n                  {/* Shine effect */}\n                  <div \n                    className=\"absolute inset-0 rounded-t-sm\"\n                    style={{\n                      background: 'linear-gradient(135deg, rgba(255,255,255,0.1) 0%, transparent 50%)'\n                    }}\n                  />\n                </div>\n              </div>\n              \n              {/* Label */}\n              {showLabels && (\n                <div className=\"text-xs text-invary-neutral dark:text-gray-400 mt-2 text-center truncate w-full\">\n                  {item.label}\n                </div>\n              )}\n            </div>\n          );\n        })}\n      </div>\n    </div>\n  );\n}, (prevProps, nextProps) => {\n  // Custom comparison for array data\n  if (prevProps.data.length !== nextProps.data.length) return false;\n  \n  const dataEqual = prevProps.data.every((item, idx) => {\n    const nextItem = nextProps.data[idx];\n    return item.label === nextItem.label && \n           item.value === nextItem.value && \n           item.color === nextItem.color;\n  });\n  \n  return (\n    dataEqual &&\n    prevProps.height === nextProps.height &&\n    prevProps.showLabels === nextProps.showLabels &&\n    prevProps.showValues === nextProps.showValues &&\n    prevProps.animated === nextProps.animated &&\n    prevProps.className === nextProps.className &&\n    prevProps.barSpacing === nextProps.barSpacing\n  );\n});\n\nexport default BarChart;"],"names":["BarChart","React","memo","props","getColor","useChartTheme","data","rawData","height","showLabels","showValues","animated","className","barSpacing","useMemo","validationMonitor","measureValidation","sanitizedProps","sanitizeChartProps","sanitizedData","sanitizeBarChartData","error","ChartValidationError","console","length","div","style","maxValue","Math","max","map","d","value","labelHeight","chartHeight","item","index","barHeight","barColor","color","marginRight","backgroundColor","backgroundImage","background","label","prevProps","nextProps","dataEqual","every","idx","nextItem"],"mappings":"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"}