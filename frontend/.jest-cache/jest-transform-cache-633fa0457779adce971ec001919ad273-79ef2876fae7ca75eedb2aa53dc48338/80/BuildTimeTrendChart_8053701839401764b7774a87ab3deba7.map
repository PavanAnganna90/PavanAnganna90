{"version":3,"sources":["/Users/pavan/Desktop/Devops-app-dev-cursor/frontend/src/components/charts/BuildTimeTrendChart.tsx"],"sourcesContent":["/**\n * Build Time Trend Chart Component\n * \n * Displays build time trends over the past 30 days using a line chart.\n * Features:\n * - Time series visualization of average build times\n * - Outlier detection and highlighting\n * - Responsive design with mobile optimization\n * - Filtering by pipeline and time range\n * - Accessibility compliance\n */\n\nimport React, { useMemo, useState } from 'react';\nimport {\n  LineChart,\n  Line,\n  XAxis,\n  YAxis,\n  CartesianGrid,\n  Tooltip,\n  ResponsiveContainer,\n  ReferenceLine,\n  Dot\n} from 'recharts';\nimport { format, subDays, startOfDay, parseISO, startOfWeek, getWeek, getYear } from 'date-fns';\nimport { useResponsive } from '../../hooks/useResponsive';\n\n// Types\ninterface PipelineRun {\n  id: number;\n  pipeline_id: number;\n  run_number: number;\n  status: 'pending' | 'running' | 'success' | 'failure' | 'cancelled';\n  started_at?: string;\n  finished_at?: string;\n  duration_seconds?: number;\n  branch: string;\n}\n\ninterface Pipeline {\n  id: number;\n  name: string;\n  runs?: PipelineRun[];\n}\n\ninterface TrendDataPoint {\n  date: string;\n  dateLabel: string;\n  weekLabel?: string;\n  averageDuration: number;\n  medianDuration: number;\n  minDuration: number;\n  maxDuration: number;\n  runCount: number;\n  outliers: Array<{\n    duration: number;\n    pipelineName: string;\n    runId: number;\n  }>;\n}\n\ninterface BuildTimeTrendChartProps {\n  pipelines: Pipeline[];\n  selectedPipelineId?: number;\n  timeRange?: 7 | 14 | 30;\n  className?: string;\n}\n\nconst BuildTimeTrendChart: React.FC<BuildTimeTrendChartProps> = ({\n  pipelines,\n  selectedPipelineId,\n  timeRange = 30,\n  className = ''\n}) => {\n  const { isMobile } = useResponsive();\n  const [showOutliers, setShowOutliers] = useState(true);\n  const [granularity, setGranularity] = useState<'daily' | 'weekly'>('daily');\n\n  // Process data for trend analysis\n  const trendData = useMemo(() => {\n    const endDate = new Date();\n    const startDate = subDays(endDate, timeRange);\n    \n    // Filter pipelines and runs\n    const relevantPipelines = selectedPipelineId \n      ? pipelines.filter(p => p.id === selectedPipelineId)\n      : pipelines;\n\n    // Collect all runs within time range\n    const allRuns: Array<PipelineRun & { pipelineName: string }> = [];\n    relevantPipelines.forEach(pipeline => {\n      if (pipeline.runs) {\n        pipeline.runs.forEach(run => {\n          if (run.finished_at && run.duration_seconds && run.status === 'success') {\n            const runDate = parseISO(run.finished_at);\n            if (runDate >= startDate && runDate <= endDate) {\n              allRuns.push({\n                ...run,\n                pipelineName: pipeline.name\n              });\n            }\n          }\n        });\n      }\n    });\n\n    // Group runs by date or week\n    const groupedData = new Map<string, Array<PipelineRun & { pipelineName: string }>>();\n    \n    allRuns.forEach(run => {\n      const runDate = parseISO(run.finished_at!);\n      const dateKey = granularity === 'daily' \n        ? format(startOfDay(runDate), 'yyyy-MM-dd')\n        : `${getYear(runDate)}-W${getWeek(runDate).toString().padStart(2, '0')}`;\n      \n      if (!groupedData.has(dateKey)) {\n        groupedData.set(dateKey, []);\n      }\n      groupedData.get(dateKey)!.push(run);\n    });\n\n    // Calculate statistics for each period (daily or weekly)\n    const trendPoints: TrendDataPoint[] = [];\n    \n    if (granularity === 'daily') {\n      // Daily grouping logic\n      for (let i = 0; i < timeRange; i++) {\n        const currentDate = subDays(endDate, timeRange - 1 - i);\n        const dateKey = format(startOfDay(currentDate), 'yyyy-MM-dd');\n        const runsForDate = groupedData.get(dateKey) || [];\n        \n        if (runsForDate.length > 0) {\n          const durations = runsForDate.map(run => run.duration_seconds!);\n          durations.sort((a, b) => a - b);\n          \n          const average = durations.reduce((sum, d) => sum + d, 0) / durations.length;\n          const median = durations[Math.floor(durations.length / 2)];\n          const min = durations[0];\n          const max = durations[durations.length - 1];\n          \n          // Detect outliers using IQR method\n          const q1 = durations[Math.floor(durations.length * 0.25)];\n          const q3 = durations[Math.floor(durations.length * 0.75)];\n          const iqr = q3 - q1;\n          const lowerBound = q1 - 1.5 * iqr;\n          const upperBound = q3 + 1.5 * iqr;\n          \n          const outliers = runsForDate\n            .filter(run => run.duration_seconds! < lowerBound || run.duration_seconds! > upperBound)\n            .map(run => ({\n              duration: run.duration_seconds!,\n              pipelineName: run.pipelineName,\n              runId: run.id\n            }));\n\n          trendPoints.push({\n            date: dateKey,\n            dateLabel: format(currentDate, isMobile ? 'MM/dd' : 'MMM dd'),\n            averageDuration: Math.round(average),\n            medianDuration: Math.round(median),\n            minDuration: min,\n            maxDuration: max,\n            runCount: runsForDate.length,\n            outliers\n          });\n        } else {\n          // Add empty data point to maintain continuity\n          trendPoints.push({\n            date: dateKey,\n            dateLabel: format(currentDate, isMobile ? 'MM/dd' : 'MMM dd'),\n            averageDuration: 0,\n            medianDuration: 0,\n            minDuration: 0,\n            maxDuration: 0,\n            runCount: 0,\n            outliers: []\n          });\n        }\n      }\n    } else {\n      // Weekly grouping logic\n      const weeksToShow = Math.ceil(timeRange / 7);\n      const weekSet = new Set<string>();\n      \n      // Generate week keys for the time range\n      for (let i = 0; i < timeRange; i++) {\n        const currentDate = subDays(endDate, i);\n        const weekKey = `${getYear(currentDate)}-W${getWeek(currentDate).toString().padStart(2, '0')}`;\n        weekSet.add(weekKey);\n      }\n      \n      // Sort weeks chronologically\n      const sortedWeeks = Array.from(weekSet).sort();\n      \n      sortedWeeks.forEach(weekKey => {\n        const runsForWeek = groupedData.get(weekKey) || [];\n        const [year, weekNum] = weekKey.split('-W');\n        const weekStart = startOfWeek(new Date(parseInt(year), 0, 1 + (parseInt(weekNum) - 1) * 7));\n        \n        if (runsForWeek.length > 0) {\n          const durations = runsForWeek.map(run => run.duration_seconds!);\n          durations.sort((a, b) => a - b);\n          \n          const average = durations.reduce((sum, d) => sum + d, 0) / durations.length;\n          const median = durations[Math.floor(durations.length / 2)];\n          const min = durations[0];\n          const max = durations[durations.length - 1];\n          \n          // Detect outliers using IQR method\n          const q1 = durations[Math.floor(durations.length * 0.25)];\n          const q3 = durations[Math.floor(durations.length * 0.75)];\n          const iqr = q3 - q1;\n          const lowerBound = q1 - 1.5 * iqr;\n          const upperBound = q3 + 1.5 * iqr;\n          \n          const outliers = runsForWeek\n            .filter(run => run.duration_seconds! < lowerBound || run.duration_seconds! > upperBound)\n            .map(run => ({\n              duration: run.duration_seconds!,\n              pipelineName: run.pipelineName,\n              runId: run.id\n            }));\n\n          trendPoints.push({\n            date: weekKey,\n            dateLabel: `Week ${weekNum}`,\n            weekLabel: format(weekStart, 'MMM dd'),\n            averageDuration: Math.round(average),\n            medianDuration: Math.round(median),\n            minDuration: min,\n            maxDuration: max,\n            runCount: runsForWeek.length,\n            outliers\n          });\n        } else {\n          trendPoints.push({\n            date: weekKey,\n            dateLabel: `Week ${weekNum}`,\n            weekLabel: format(weekStart, 'MMM dd'),\n            averageDuration: 0,\n            medianDuration: 0,\n            minDuration: 0,\n            maxDuration: 0,\n            runCount: 0,\n            outliers: []\n          });\n        }\n      });\n    }\n\n    return trendPoints;\n  }, [pipelines, selectedPipelineId, timeRange, granularity, isMobile]);\n\n  // Calculate overall statistics\n  const overallStats = useMemo(() => {\n    const validPoints = trendData.filter(point => point.runCount > 0);\n    if (validPoints.length === 0) {\n      return { avgBuildTime: 0, trend: 'neutral', improvement: 0 };\n    }\n\n    const totalAverage = validPoints.reduce((sum, point) => sum + point.averageDuration, 0) / validPoints.length;\n    \n    // Calculate trend (compare first half vs second half)\n    const midPoint = Math.floor(validPoints.length / 2);\n    const firstHalf = validPoints.slice(0, midPoint);\n    const secondHalf = validPoints.slice(midPoint);\n    \n    const firstHalfAvg = firstHalf.reduce((sum, point) => sum + point.averageDuration, 0) / firstHalf.length;\n    const secondHalfAvg = secondHalf.reduce((sum, point) => sum + point.averageDuration, 0) / secondHalf.length;\n    \n    const improvement = ((firstHalfAvg - secondHalfAvg) / firstHalfAvg) * 100;\n    const trend = improvement > 5 ? 'improving' : improvement < -5 ? 'degrading' : 'stable';\n\n    return {\n      avgBuildTime: Math.round(totalAverage),\n      trend,\n      improvement: Math.round(improvement)\n    };\n  }, [trendData]);\n\n  // Format duration for display\n  const formatDuration = (seconds: number): string => {\n    if (seconds === 0) return '0s';\n    const minutes = Math.floor(seconds / 60);\n    const remainingSeconds = seconds % 60;\n    if (minutes > 0) {\n      return `${minutes}m ${remainingSeconds}s`;\n    }\n    return `${remainingSeconds}s`;\n  };\n\n  // Custom tooltip component\n  const CustomTooltip = ({ active, payload, label }: any) => {\n    if (active && payload && payload.length) {\n      const data = payload[0].payload as TrendDataPoint;\n      return (\n        <div className=\"bg-white dark:bg-gray-800 border border-gray-200 dark:border-gray-700 rounded-lg shadow-lg p-3\">\n          <div className=\"mb-2\">\n            <p className=\"font-semibold text-gray-900 dark:text-white\">{label}</p>\n            {granularity === 'weekly' && data.weekLabel && (\n              <p className=\"text-xs text-gray-500 dark:text-gray-400\">Starting {data.weekLabel}</p>\n            )}\n          </div>\n          <div className=\"space-y-1 text-sm\">\n            <p className=\"text-blue-600 dark:text-blue-400\">\n              Average: {formatDuration(data.averageDuration)}\n            </p>\n            <p className=\"text-green-600 dark:text-green-400\">\n              Median: {formatDuration(data.medianDuration)}\n            </p>\n            <p className=\"text-gray-600 dark:text-gray-400\">\n              Runs: {data.runCount}\n            </p>\n            {data.runCount > 0 && (\n              <p className=\"text-gray-600 dark:text-gray-400\">\n                Range: {formatDuration(data.minDuration)} - {formatDuration(data.maxDuration)}\n              </p>\n            )}\n            {data.outliers.length > 0 && (\n              <p className=\"text-orange-600 dark:text-orange-400\">\n                Outliers: {data.outliers.length}\n              </p>\n            )}\n          </div>\n        </div>\n      );\n    }\n    return null;\n  };\n\n  // Custom dot component for outliers\n  const OutlierDot = (props: any) => {\n    const { cx, cy, payload } = props;\n    if (payload.outliers && payload.outliers.length > 0 && showOutliers) {\n      return (\n        <Dot\n          cx={cx}\n          cy={cy}\n          r={4}\n          fill=\"#f59e0b\"\n          stroke=\"#d97706\"\n          strokeWidth={2}\n        />\n      );\n    }\n    return null;\n  };\n\n  return (\n    <div className={`bg-white dark:bg-gray-800 rounded-lg border border-gray-200 dark:border-gray-700 p-6 ${className}`}>\n      {/* Header */}\n      <div className=\"flex flex-col sm:flex-row sm:items-center sm:justify-between mb-6\">\n        <div>\n          <h3 className=\"text-lg font-semibold text-gray-900 dark:text-white\">\n            Build Time Trends\n          </h3>\n          <p className=\"text-sm text-gray-500 dark:text-gray-400\">\n            Last {timeRange} days • Average: {formatDuration(overallStats.avgBuildTime)}\n          </p>\n        </div>\n\n        <div className=\"flex flex-wrap items-center gap-2 mt-4 sm:mt-0\">\n          {/* Granularity selector */}\n          <div className=\"flex bg-gray-100 dark:bg-gray-700 rounded-md p-1\">\n            <button\n              onClick={() => setGranularity('daily')}\n              className={`px-3 py-1 rounded text-xs font-medium transition-colors ${\n                granularity === 'daily'\n                  ? 'bg-white dark:bg-gray-600 text-gray-900 dark:text-white shadow'\n                  : 'text-gray-600 dark:text-gray-400 hover:text-gray-900 dark:hover:text-white'\n              }`}\n            >\n              Daily\n            </button>\n            <button\n              onClick={() => setGranularity('weekly')}\n              className={`px-3 py-1 rounded text-xs font-medium transition-colors ${\n                granularity === 'weekly'\n                  ? 'bg-white dark:bg-gray-600 text-gray-900 dark:text-white shadow'\n                  : 'text-gray-600 dark:text-gray-400 hover:text-gray-900 dark:hover:text-white'\n              }`}\n            >\n              Weekly\n            </button>\n          </div>\n\n          {/* Trend indicator */}\n          <div className={`inline-flex items-center px-2 py-1 rounded text-xs font-medium ${\n            overallStats.trend === 'improving' \n              ? 'bg-green-100 dark:bg-green-900/20 text-green-800 dark:text-green-200'\n              : overallStats.trend === 'degrading'\n              ? 'bg-red-100 dark:bg-red-900/20 text-red-800 dark:text-red-200'\n              : 'bg-gray-100 dark:bg-gray-700 text-gray-800 dark:text-gray-200'\n          }`}>\n            {overallStats.trend === 'improving' && '↗ Improving'}\n            {overallStats.trend === 'degrading' && '↘ Degrading'}\n            {overallStats.trend === 'stable' && '→ Stable'}\n            {overallStats.improvement !== 0 && ` (${Math.abs(overallStats.improvement)}%)`}\n          </div>\n\n          {/* Outliers toggle */}\n          <button\n            onClick={() => setShowOutliers(!showOutliers)}\n            className={`px-3 py-1 rounded text-xs font-medium transition-colors ${\n              showOutliers\n                ? 'bg-orange-100 dark:bg-orange-900/20 text-orange-800 dark:text-orange-200'\n                : 'bg-gray-100 dark:bg-gray-700 text-gray-600 dark:text-gray-400'\n            }`}\n          >\n            Outliers\n          </button>\n        </div>\n      </div>\n\n      {/* Chart */}\n      <div className=\"h-80\">\n        <ResponsiveContainer width=\"100%\" height=\"100%\">\n          <LineChart\n            data={trendData}\n            margin={{\n              top: 5,\n              right: 30,\n              left: 20,\n              bottom: 5,\n            }}\n          >\n            <CartesianGrid strokeDasharray=\"3 3\" className=\"opacity-30\" />\n            <XAxis\n              dataKey=\"dateLabel\"\n              tick={{ fontSize: 12 }}\n              tickLine={false}\n              axisLine={false}\n              interval={isMobile ? 'preserveStartEnd' : 0}\n            />\n            <YAxis\n              tick={{ fontSize: 12 }}\n              tickLine={false}\n              axisLine={false}\n              tickFormatter={formatDuration}\n            />\n            <Tooltip content={<CustomTooltip />} />\n            \n            {/* Average build time line */}\n            <Line\n              type=\"monotone\"\n              dataKey=\"averageDuration\"\n              stroke=\"#3b82f6\"\n              strokeWidth={2}\n              dot={false}\n              connectNulls={false}\n              name=\"Average Duration\"\n            />\n            \n            {/* Median build time line */}\n            <Line\n              type=\"monotone\"\n              dataKey=\"medianDuration\"\n              stroke=\"#10b981\"\n              strokeWidth={2}\n              strokeDasharray=\"5 5\"\n              dot={false}\n              connectNulls={false}\n              name=\"Median Duration\"\n            />\n\n            {/* Outlier indicators */}\n            {showOutliers && (\n              <Line\n                type=\"monotone\"\n                dataKey=\"averageDuration\"\n                stroke=\"transparent\"\n                dot={<OutlierDot />}\n                connectNulls={false}\n              />\n            )}\n          </LineChart>\n        </ResponsiveContainer>\n      </div>\n\n      {/* Legend */}\n      <div className=\"flex flex-wrap items-center justify-center gap-4 mt-4 text-sm\">\n        <div className=\"flex items-center space-x-2\">\n          <div className=\"w-3 h-0.5 bg-blue-500\"></div>\n          <span className=\"text-gray-600 dark:text-gray-400\">Average Duration</span>\n        </div>\n        <div className=\"flex items-center space-x-2\">\n          <div className=\"w-3 h-0.5 bg-green-500 border-dashed border-t\"></div>\n          <span className=\"text-gray-600 dark:text-gray-400\">Median Duration</span>\n        </div>\n        {showOutliers && (\n          <div className=\"flex items-center space-x-2\">\n            <div className=\"w-2 h-2 bg-orange-500 rounded-full\"></div>\n            <span className=\"text-gray-600 dark:text-gray-400\">Outliers</span>\n          </div>\n        )}\n      </div>\n    </div>\n  );\n};\n\nexport default React.memo(BuildTimeTrendChart); "],"names":["BuildTimeTrendChart","pipelines","selectedPipelineId","timeRange","className","isMobile","useResponsive","showOutliers","setShowOutliers","useState","granularity","setGranularity","trendData","useMemo","endDate","Date","startDate","subDays","relevantPipelines","filter","p","id","allRuns","forEach","pipeline","runs","run","finished_at","duration_seconds","status","runDate","parseISO","push","pipelineName","name","groupedData","Map","dateKey","format","startOfDay","getYear","getWeek","toString","padStart","has","set","get","trendPoints","i","currentDate","runsForDate","length","durations","map","sort","a","b","average","reduce","sum","d","median","Math","floor","min","max","q1","q3","iqr","lowerBound","upperBound","outliers","duration","runId","date","dateLabel","averageDuration","round","medianDuration","minDuration","maxDuration","runCount","weeksToShow","ceil","weekSet","Set","weekKey","add","sortedWeeks","Array","from","runsForWeek","year","weekNum","split","weekStart","startOfWeek","parseInt","weekLabel","overallStats","validPoints","point","avgBuildTime","trend","improvement","totalAverage","midPoint","firstHalf","slice","secondHalf","firstHalfAvg","secondHalfAvg","formatDuration","seconds","minutes","remainingSeconds","CustomTooltip","active","payload","label","data","div","OutlierDot","props","cx","cy","Dot","r","fill","stroke","strokeWidth","h3","button","onClick","abs","ResponsiveContainer","width","height","LineChart","margin","top","right","left","bottom","CartesianGrid","strokeDasharray","XAxis","dataKey","tick","fontSize","tickLine","axisLine","interval","YAxis","tickFormatter","Tooltip","content","Line","type","dot","connectNulls","span","React","memo"],"mappings":"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"}