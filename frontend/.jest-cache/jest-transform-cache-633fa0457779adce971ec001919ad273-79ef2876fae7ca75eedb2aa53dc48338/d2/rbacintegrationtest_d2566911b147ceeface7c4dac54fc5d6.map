{"version":3,"sources":["/Users/pavan/Desktop/Devops-app-dev-cursor/frontend/src/tests/integration/rbac-integration.test.tsx"],"sourcesContent":["/**\n * RBAC Integration Tests\n * Tests the complete RBAC system integration across pages and components.\n */\n\nimport React from 'react';\nimport { render, screen, waitFor, fireEvent } from '@testing-library/react';\nimport { QueryClient, QueryClientProvider } from '@tanstack/react-query';\nimport { AuthProvider, useAuth } from '../../contexts/AuthContext';\nimport { ThemeProvider } from '../../contexts/ThemeContext';\nimport AdminPage from '../../components/admin/AdminPage';\nimport Navigation from '../../components/Navigation';\nimport InfrastructurePanel from '../../components/dashboard/InfrastructurePanel';\nimport { TeamList } from '../../components/teams/TeamList';\n\n// Mock fetch globally\nconst mockFetch = jest.fn();\nglobal.fetch = mockFetch;\n\n// Mock localStorage\nconst mockLocalStorage = {\n  getItem: jest.fn(),\n  setItem: jest.fn(),\n  removeItem: jest.fn(),\n  clear: jest.fn(),\n};\nObject.defineProperty(window, 'localStorage', {\n  value: mockLocalStorage,\n});\n\n// Mock user data with different roles\nconst mockAdminUser = {\n  id: 1,\n  github_username: 'admin',\n  email: 'admin@example.com',\n  roles: ['organization_owner', 'devops_admin'],\n  permissions: [\n    'manage_roles',\n    'manage_users',\n    'manage_infrastructure',\n    'view_dashboard',\n    'view_infrastructure',\n    'view_teams',\n    'manage_teams',\n    'view_audit_logs'\n  ]\n};\n\nconst mockManagerUser = {\n  id: 2,\n  github_username: 'manager',\n  email: 'manager@example.com',\n  roles: ['team_lead'],\n  permissions: [\n    'view_dashboard',\n    'view_infrastructure',\n    'view_teams',\n    'manage_teams',\n    'view_team_members'\n  ]\n};\n\nconst mockDeveloperUser = {\n  id: 3,\n  github_username: 'developer',\n  email: 'developer@example.com',\n  roles: ['developer'],\n  permissions: [\n    'view_dashboard',\n    'view_infrastructure'\n  ]\n};\n\nconst mockViewerUser = {\n  id: 4,\n  github_username: 'viewer',\n  email: 'viewer@example.com',\n  roles: ['viewer'],\n  permissions: [\n    'view_dashboard'\n  ]\n};\n\n// Mock auth context with different user types\nconst createMockAuthContext = (user: any) => ({\n  state: {\n    isAuthenticated: true,\n    user,\n    tokens: { access_token: 'test-token' },\n    isLoading: false,\n    error: null,\n  },\n  login: jest.fn(),\n  logout: jest.fn(),\n  refreshToken: jest.fn(),\n  getCurrentUser: jest.fn(),\n  hasPermission: jest.fn((permission: string) => \n    user.permissions.includes(permission)\n  ),\n  hasRole: jest.fn((role: string) => \n    user.roles.includes(role)\n  ),\n  hasAnyRole: jest.fn((roles: string[]) => \n    roles.some(role => user.roles.includes(role))\n  ),\n  hasAnyPermission: jest.fn((permissions: string[]) => \n    permissions.some(permission => user.permissions.includes(permission))\n  ),\n  canAccess: jest.fn((resource: string, action: string) => {\n    const resourcePermissions = {\n      'infrastructure': ['view_infrastructure', 'manage_infrastructure'],\n      'teams': ['view_teams', 'manage_teams'],\n      'users': ['view_users', 'manage_users'],\n      'roles': ['view_roles', 'manage_roles'],\n    };\n    \n    const requiredPermissions = resourcePermissions[resource as keyof typeof resourcePermissions] || [];\n    return requiredPermissions.some(perm => user.permissions.includes(perm));\n  }),\n  getUserPermissions: jest.fn(() => user.permissions),\n  getUserRoles: jest.fn(() => user.roles),\n  isAdmin: jest.fn(() => user.roles.includes('organization_owner') || user.roles.includes('devops_admin')),\n});\n\n// Test wrapper component\nconst TestWrapper = ({ children, user = mockAdminUser }: { children: React.ReactNode; user?: any }) => {\n  const queryClient = new QueryClient({\n    defaultOptions: {\n      queries: { retry: false },\n      mutations: { retry: false },\n    },\n  });\n\n  return (\n    <QueryClientProvider client={queryClient}>\n      <ThemeProvider>\n        <AuthProvider>\n          {children}\n        </AuthProvider>\n      </ThemeProvider>\n    </QueryClientProvider>\n  );\n};\n\n// Mock the useAuth hook\njest.mock('../../contexts/AuthContext', () => ({\n  ...jest.requireActual('../../contexts/AuthContext'),\n  useAuth: jest.fn(),\n}));\n\nconst mockUseAuth = useAuth as jest.MockedFunction<typeof useAuth>;\n\ndescribe('RBAC Integration Tests', () => {\n  beforeEach(() => {\n    jest.clearAllMocks();\n    mockFetch.mockClear();\n    mockLocalStorage.getItem.mockReturnValue('test-token');\n  });\n\n  describe('Role Management Page Access', () => {\n    it('should allow admin users to access role management page', async () => {\n      mockUseAuth.mockReturnValue(createMockAuthContext(mockAdminUser));\n      \n      // Mock API responses\n      mockFetch\n        .mockResolvedValueOnce({\n          ok: true,\n          json: async () => [\n            {\n              id: '1',\n              name: 'admin',\n              display_name: 'Administrator',\n              description: 'Full system access',\n              priority: 100,\n              is_system_role: true,\n              permissions: [],\n              user_count: 1,\n              created_at: '2023-01-01T00:00:00Z',\n              updated_at: '2023-01-01T00:00:00Z',\n            }\n          ],\n        })\n        .mockResolvedValueOnce({\n          ok: true,\n          json: async () => [\n            {\n              id: '1',\n              name: 'manage_roles',\n              display_name: 'Manage Roles',\n              description: 'Can manage system roles',\n              category: 'admin',\n              is_system_permission: true,\n            }\n          ],\n        })\n        .mockResolvedValueOnce({\n          ok: true,\n          json: async () => ({\n            admin: [\n              {\n                id: '1',\n                name: 'manage_roles',\n                display_name: 'Manage Roles',\n                description: 'Can manage system roles',\n                category: 'admin',\n                is_system_permission: true,\n              }\n            ],\n          }),\n        });\n\n      render(\n        <TestWrapper user={mockAdminUser}>\n          <AdminPage />\n        </TestWrapper>\n      );\n\n      await waitFor(() => {\n        expect(screen.getByText('Role Management')).toBeInTheDocument();\n        expect(screen.getByText('Create Role')).toBeInTheDocument();\n      });\n    });\n\n    it('should deny access to non-admin users', () => {\n      mockUseAuth.mockReturnValue(createMockAuthContext(mockDeveloperUser));\n\n      render(\n        <TestWrapper user={mockDeveloperUser}>\n          <AdminPage />\n        </TestWrapper>\n      );\n\n      expect(screen.getByText('Access Denied')).toBeInTheDocument();\n      expect(screen.getByText(\"Administrator access required.\")).toBeInTheDocument();\n    });\n  });\n\n  describe('Navigation Permission-Based Rendering', () => {\n    it('should show all navigation items for admin users', () => {\n      mockUseAuth.mockReturnValue(createMockAuthContext(mockAdminUser));\n\n      render(\n        <TestWrapper user={mockAdminUser}>\n          <Navigation />\n        </TestWrapper>\n      );\n\n      expect(screen.getByText('Dashboard')).toBeInTheDocument();\n      expect(screen.getByText('Infrastructure')).toBeInTheDocument();\n      expect(screen.getByText('Teams')).toBeInTheDocument();\n    });\n\n    it('should show limited navigation items for viewer users', () => {\n      mockUseAuth.mockReturnValue(createMockAuthContext(mockViewerUser));\n\n      render(\n        <TestWrapper user={mockViewerUser}>\n          <Navigation />\n        </TestWrapper>\n      );\n\n      expect(screen.getByText('Dashboard')).toBeInTheDocument();\n      expect(screen.queryByText('Infrastructure')).not.toBeInTheDocument();\n      expect(screen.queryByText('Teams')).not.toBeInTheDocument();\n    });\n\n    it('should show appropriate navigation items for manager users', () => {\n      mockUseAuth.mockReturnValue(createMockAuthContext(mockManagerUser));\n\n      render(\n        <TestWrapper user={mockManagerUser}>\n          <Navigation />\n        </TestWrapper>\n      );\n\n      expect(screen.getByText('Dashboard')).toBeInTheDocument();\n      expect(screen.getByText('Infrastructure')).toBeInTheDocument();\n      expect(screen.getByText('Teams')).toBeInTheDocument();\n    });\n  });\n\n  describe('Infrastructure Panel Permissions', () => {\n    it('should show infrastructure panel with manage permissions for admin', () => {\n      mockUseAuth.mockReturnValue(createMockAuthContext(mockAdminUser));\n\n      render(\n        <TestWrapper user={mockAdminUser}>\n          <InfrastructurePanel />\n        </TestWrapper>\n      );\n\n      expect(screen.getByText('Infrastructure Overview')).toBeInTheDocument();\n      // Should show action buttons for admins\n      expect(screen.getByText('Manage Clusters')).toBeInTheDocument();\n    });\n\n    it('should show infrastructure panel with view-only permissions for developer', () => {\n      mockUseAuth.mockReturnValue(createMockAuthContext(mockDeveloperUser));\n\n      render(\n        <TestWrapper user={mockDeveloperUser}>\n          <InfrastructurePanel />\n        </TestWrapper>\n      );\n\n      expect(screen.getByText('Infrastructure Overview')).toBeInTheDocument();\n      // Should not show action buttons for developers\n      expect(screen.queryByText('Manage Clusters')).not.toBeInTheDocument();\n    });\n\n    it('should not show infrastructure panel for viewer users', () => {\n      mockUseAuth.mockReturnValue(createMockAuthContext(mockViewerUser));\n\n      render(\n        <TestWrapper user={mockViewerUser}>\n          <InfrastructurePanel />\n        </TestWrapper>\n      );\n\n      // Should not render anything for users without infrastructure permissions\n      expect(screen.queryByText('Infrastructure Overview')).not.toBeInTheDocument();\n    });\n  });\n\n  describe('Team Management Permissions', () => {\n    it('should show team management with full permissions for admin', async () => {\n      mockUseAuth.mockReturnValue(createMockAuthContext(mockAdminUser));\n\n      // Mock teams API response\n      mockFetch.mockResolvedValueOnce({\n        ok: true,\n        json: async () => [\n          {\n            id: '1',\n            name: 'DevOps Team',\n            description: 'Infrastructure and deployment team',\n            members: [],\n          }\n        ],\n      });\n\n      render(\n        <TestWrapper user={mockAdminUser}>\n          <TeamList />\n        </TestWrapper>\n      );\n\n      await waitFor(() => {\n        expect(screen.getByText('Teams')).toBeInTheDocument();\n        expect(screen.getByText('Create Team')).toBeInTheDocument();\n      });\n    });\n\n    it('should show team management with limited permissions for manager', async () => {\n      mockUseAuth.mockReturnValue(createMockAuthContext(mockManagerUser));\n\n      // Mock teams API response\n      mockFetch.mockResolvedValueOnce({\n        ok: true,\n        json: async () => [\n          {\n            id: '1',\n            name: 'DevOps Team',\n            description: 'Infrastructure and deployment team',\n            members: [],\n          }\n        ],\n      });\n\n      render(\n        <TestWrapper user={mockManagerUser}>\n          <TeamList />\n        </TestWrapper>\n      );\n\n      await waitFor(() => {\n        expect(screen.getByText('Teams')).toBeInTheDocument();\n        expect(screen.getByText('Create Team')).toBeInTheDocument();\n      });\n    });\n\n    it('should not show team management for users without team permissions', () => {\n      mockUseAuth.mockReturnValue(createMockAuthContext(mockViewerUser));\n\n      render(\n        <TestWrapper user={mockViewerUser}>\n          <TeamList />\n        </TestWrapper>\n      );\n\n      // Should not render anything for users without team permissions\n      expect(screen.queryByText('Teams')).not.toBeInTheDocument();\n    });\n  });\n\n  describe('Permission-Based Component Rendering', () => {\n    it('should render action buttons for users with manage permissions', () => {\n      mockUseAuth.mockReturnValue(createMockAuthContext(mockAdminUser));\n\n      render(\n        <TestWrapper user={mockAdminUser}>\n          <div>\n            <button data-testid=\"manage-action\">Manage Resource</button>\n            <button data-testid=\"delete-action\">Delete Resource</button>\n          </div>\n        </TestWrapper>\n      );\n\n      expect(screen.getByTestId('manage-action')).toBeInTheDocument();\n      expect(screen.getByTestId('delete-action')).toBeInTheDocument();\n    });\n\n    it('should hide action buttons for users without manage permissions', () => {\n      mockUseAuth.mockReturnValue(createMockAuthContext(mockViewerUser));\n\n      render(\n        <TestWrapper user={mockViewerUser}>\n          <div>\n            <button data-testid=\"view-action\">View Resource</button>\n            {/* These should be wrapped in PermissionGuard in actual implementation */}\n            <button data-testid=\"manage-action\" style={{ display: 'none' }}>Manage Resource</button>\n            <button data-testid=\"delete-action\" style={{ display: 'none' }}>Delete Resource</button>\n          </div>\n        </TestWrapper>\n      );\n\n      expect(screen.getByTestId('view-action')).toBeInTheDocument();\n      expect(screen.getByTestId('manage-action')).not.toBeVisible();\n      expect(screen.getByTestId('delete-action')).not.toBeVisible();\n    });\n  });\n\n  describe('Role-Based Access Control Flow', () => {\n    it('should handle role changes dynamically', async () => {\n      let currentUser = mockDeveloperUser;\n      \n      mockUseAuth.mockImplementation(() => createMockAuthContext(currentUser));\n\n      const { rerender } = render(\n        <TestWrapper user={currentUser}>\n          <Navigation />\n        </TestWrapper>\n      );\n\n      // Initially should show limited navigation\n      expect(screen.getByText('Dashboard')).toBeInTheDocument();\n      expect(screen.queryByText('Teams')).not.toBeInTheDocument();\n\n      // Update user to admin\n      currentUser = mockAdminUser;\n      \n      rerender(\n        <TestWrapper user={currentUser}>\n          <Navigation />\n        </TestWrapper>\n      );\n\n      // Should now show admin navigation\n      expect(screen.getByText('Dashboard')).toBeInTheDocument();\n      expect(screen.getByText('Teams')).toBeInTheDocument();\n    });\n\n    it('should handle permission escalation scenarios', () => {\n      // Test that permissions are properly checked at runtime\n      const mockUserWithEscalatedPermissions = {\n        ...mockViewerUser,\n        permissions: [...mockViewerUser.permissions, 'manage_infrastructure']\n      };\n\n      mockUseAuth.mockReturnValue(createMockAuthContext(mockUserWithEscalatedPermissions));\n\n      render(\n        <TestWrapper user={mockUserWithEscalatedPermissions}>\n          <InfrastructurePanel />\n        </TestWrapper>\n      );\n\n      // Should show infrastructure panel due to escalated permissions\n      expect(screen.getByText('Infrastructure Overview')).toBeInTheDocument();\n    });\n  });\n\n  describe('Error Handling and Edge Cases', () => {\n    it('should handle missing permissions gracefully', () => {\n      const userWithoutPermissions = {\n        ...mockViewerUser,\n        permissions: []\n      };\n\n      mockUseAuth.mockReturnValue(createMockAuthContext(userWithoutPermissions));\n\n      render(\n        <TestWrapper user={userWithoutPermissions}>\n          <Navigation />\n        </TestWrapper>\n      );\n\n      // Should only show basic navigation without permissions\n      expect(screen.getByText('Home')).toBeInTheDocument();\n      expect(screen.queryByText('Dashboard')).not.toBeInTheDocument();\n    });\n\n    it('should handle API errors for role management', async () => {\n      mockUseAuth.mockReturnValue(createMockAuthContext(mockAdminUser));\n\n      // Mock API error\n      mockFetch.mockRejectedValueOnce(new Error('API Error'));\n\n      render(\n        <TestWrapper user={mockAdminUser}>\n          <AdminPage />\n        </TestWrapper>\n      );\n\n      await waitFor(() => {\n        expect(screen.getByText('Error Loading Roles')).toBeInTheDocument();\n      });\n    });\n\n    it('should handle unauthenticated state', () => {\n      mockUseAuth.mockReturnValue({\n        state: {\n          isAuthenticated: false,\n          user: null,\n          tokens: null,\n          isLoading: false,\n          error: null,\n        },\n        login: jest.fn(),\n        logout: jest.fn(),\n        refreshToken: jest.fn(),\n        getCurrentUser: jest.fn(),\n        hasPermission: jest.fn(() => false),\n        hasRole: jest.fn(() => false),\n        hasAnyRole: jest.fn(() => false),\n        hasAnyPermission: jest.fn(() => false),\n        canAccess: jest.fn(() => false),\n        getUserPermissions: jest.fn(() => []),\n        getUserRoles: jest.fn(() => []),\n        isAdmin: jest.fn(() => false),\n      });\n\n      render(\n        <TestWrapper>\n          <AdminPage />\n        </TestWrapper>\n      );\n\n      expect(screen.getByText('Access Denied')).toBeInTheDocument();\n    });\n  });\n});"],"names":["jest","mock","requireActual","useAuth","fn","mockFetch","global","fetch","mockLocalStorage","getItem","setItem","removeItem","clear","Object","defineProperty","window","value","mockAdminUser","id","github_username","email","roles","permissions","mockManagerUser","mockDeveloperUser","mockViewerUser","createMockAuthContext","user","state","isAuthenticated","tokens","access_token","isLoading","error","login","logout","refreshToken","getCurrentUser","hasPermission","permission","includes","hasRole","role","hasAnyRole","some","hasAnyPermission","canAccess","resource","action","resourcePermissions","requiredPermissions","perm","getUserPermissions","getUserRoles","isAdmin","TestWrapper","children","queryClient","QueryClient","defaultOptions","queries","retry","mutations","QueryClientProvider","client","ThemeProvider","AuthProvider","mockUseAuth","describe","beforeEach","clearAllMocks","mockClear","mockReturnValue","it","mockResolvedValueOnce","ok","json","name","display_name","description","priority","is_system_role","user_count","created_at","updated_at","category","is_system_permission","admin","render","AdminPage","waitFor","expect","screen","getByText","toBeInTheDocument","Navigation","queryByText","not","InfrastructurePanel","members","TeamList","div","button","data-testid","getByTestId","style","display","toBeVisible","currentUser","mockImplementation","rerender","mockUserWithEscalatedPermissions","userWithoutPermissions","mockRejectedValueOnce","Error"],"mappings":"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"}