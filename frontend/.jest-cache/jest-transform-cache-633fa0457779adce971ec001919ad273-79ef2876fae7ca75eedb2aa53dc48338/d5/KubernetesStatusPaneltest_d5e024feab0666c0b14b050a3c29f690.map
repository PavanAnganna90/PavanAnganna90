{"version":3,"sources":["/Users/pavan/Desktop/Devops-app-dev-cursor/frontend/src/components/dashboard/__tests__/KubernetesStatusPanel.test.tsx"],"sourcesContent":["/**\n * Tests for KubernetesStatusPanel Component\n * \n * Comprehensive test suite covering component functionality,\n * API integration, user interactions, and edge cases.\n */\n\nimport React from 'react';\nimport { render, screen, fireEvent, waitFor } from '@testing-library/react';\nimport userEvent from '@testing-library/user-event';\nimport { jest } from '@jest/globals';\nimport KubernetesStatusPanel from '../KubernetesStatusPanel';\nimport { Cluster, ClusterStats, NodeDetail } from '../../../types/cluster';\n\n// Mock hooks\njest.mock('../../../hooks/useResponsive', () => ({\n  useResponsive: () => ({\n    isMobile: false,\n    isTablet: false,\n    isDesktop: true\n  })\n}));\n\n// Mock fetch API\nconst mockFetch = jest.fn();\nglobal.fetch = mockFetch as any;\n\n// Helper to create mock Response objects\nconst createMockResponse = (data: any, ok = true): Partial<Response> => ({\n  ok,\n  status: ok ? 200 : 500,\n  json: async () => data,\n  headers: new Headers(),\n  redirected: false,\n  statusText: ok ? 'OK' : 'Internal Server Error',\n  type: 'basic',\n  url: '',\n  body: null,\n  bodyUsed: false,\n  clone: jest.fn(),\n  arrayBuffer: jest.fn(),\n  blob: jest.fn(),\n  formData: jest.fn(),\n  text: jest.fn(),\n});\n\n// Mock localStorage\nconst mockLocalStorage = {\n  getItem: jest.fn(() => 'mock-token'),\n  setItem: jest.fn(),\n  removeItem: jest.fn()\n};\nObject.defineProperty(window, 'localStorage', {\n  value: mockLocalStorage\n});\n\n// Test data\nconst mockCluster: Cluster = {\n  id: 1,\n  cluster_id: 'test-cluster-1',\n  name: 'test-cluster',\n  display_name: 'Test Cluster',\n  version: '1.25.0',\n  status: 'healthy',\n  health_score: 95,\n  last_health_check: '2025-01-16T12:00:00Z',\n  provider: 'AWS',\n  region: 'us-west-2',\n  zone: 'us-west-2a',\n  endpoint_url: 'https://test-cluster.eks.amazonaws.com',\n  monitoring_enabled: true,\n  prometheus_endpoint: 'http://prometheus.cluster.local:9090',\n  grafana_dashboard_url: 'http://grafana.cluster.local:3000',\n  log_aggregation_url: 'http://elasticsearch.cluster.local:9200',\n  cpu_alert_threshold: 80,\n  memory_alert_threshold: 85,\n  storage_alert_threshold: 90,\n  project_id: 1,\n  created_at: '2025-01-01T00:00:00Z',\n  updated_at: '2025-01-16T12:00:00Z',\n  last_sync: '2025-01-16T12:00:00Z',\n  // Metrics\n  total_nodes: 3,\n  ready_nodes: 3,\n  not_ready_nodes: 0,\n  node_details: [\n    {\n      name: 'node-1',\n      status: 'ready',\n      last_heartbeat: '2025-01-16T12:00:00Z',\n      cpu_usage: 45,\n      memory_usage: 60,\n      disk_usage: 30\n    },\n    {\n      name: 'node-2',\n      status: 'ready',\n      last_heartbeat: '2025-01-16T12:00:00Z',\n      cpu_usage: 55,\n      memory_usage: 70,\n      disk_usage: 40\n    },\n    {\n      name: 'node-3',\n      status: 'not_ready',\n      last_heartbeat: '2025-01-16T11:30:00Z',\n      cpu_usage: 0,\n      memory_usage: 0,\n      disk_usage: 0\n    }\n  ],\n  total_pods: 120,\n  running_pods: 115,\n  pending_pods: 3,\n  failed_pods: 2,\n  total_cpu_cores: 24,\n  allocatable_cpu_cores: 22,\n  used_cpu_cores: 11,\n  cpu_utilization_percent: 50,\n  total_memory_gb: 96,\n  allocatable_memory_gb: 88,\n  used_memory_gb: 55,\n  memory_utilization_percent: 62,\n  total_storage_gb: 500,\n  used_storage_gb: 200,\n  storage_utilization_percent: 40,\n  network_in_bytes: 1024000000,\n  network_out_bytes: 2048000000,\n  network_errors: 0,\n  total_namespaces: 15,\n  total_services: 45,\n  total_ingresses: 8,\n  total_deployments: 32,\n  total_statefulsets: 5,\n  total_daemonsets: 3\n};\n\nconst mockClusterStats: ClusterStats = {\n  total_clusters: 2,\n  healthy_clusters: 1,\n  warning_clusters: 1,\n  critical_clusters: 0,\n  offline_clusters: 0,\n  total_nodes: 6,\n  total_pods: 250,\n  average_cpu_utilization: 55,\n  average_memory_utilization: 65,\n  clusters_needing_attention: 1\n};\n\ndescribe('KubernetesStatusPanel', () => {\n  beforeEach(() => {\n    jest.clearAllMocks();\n    mockFetch.mockClear();\n  });\n\n  afterEach(() => {\n    jest.restoreAllMocks();\n  });\n\n  /**\n   * Test: Component renders loading state initially\n   */\n  it('renders loading state initially', () => {\n    mockFetch.mockImplementation(() => new Promise(() => {})); // Never resolves\n    \n    render(<KubernetesStatusPanel />);\n    \n    expect(screen.getByRole('status')).toBeInTheDocument();\n  });\n\n  /**\n   * Test: Component displays error state when API fails\n   */\n  it('displays error state when cluster fetch fails', async () => {\n    mockFetch.mockRejectedValueOnce(new Error('Network error'));\n    \n    render(<KubernetesStatusPanel />);\n    \n    await waitFor(() => {\n      expect(screen.getByText('Failed to load cluster data')).toBeInTheDocument();\n      expect(screen.getByText('Network error')).toBeInTheDocument();\n      expect(screen.getByRole('button', { name: /retry/i })).toBeInTheDocument();\n    });\n  });\n\n  /**\n   * Test: Component displays no clusters state\n   */\n  it('displays no clusters message when no clusters available', async () => {\n    mockFetch\n      .mockResolvedValueOnce({\n        ok: true,\n        json: async () => []\n      })\n      .mockResolvedValueOnce({\n        ok: true,\n        json: async () => mockClusterStats\n      });\n    \n    render(<KubernetesStatusPanel />);\n    \n    await waitFor(() => {\n      expect(screen.getByText('No Kubernetes Clusters')).toBeInTheDocument();\n      expect(screen.getByText('No clusters are configured for monitoring. Add a cluster to get started.')).toBeInTheDocument();\n    });\n  });\n\n  /**\n   * Test: Component renders clusters successfully\n   */\n  it('renders clusters successfully with all sections', async () => {\n    mockFetch\n      .mockResolvedValueOnce({\n        ok: true,\n        json: async () => [mockCluster]\n      })\n      .mockResolvedValueOnce({\n        ok: true,\n        json: async () => mockClusterStats\n      })\n      .mockResolvedValueOnce({\n        ok: true,\n        json: async () => ({\n          cluster_id: 1,\n          cluster_name: 'test-cluster',\n          timestamp: '2025-01-16T12:00:00Z',\n          node_metrics: {\n            total_nodes: 3,\n            ready_nodes: 3,\n            not_ready_nodes: 0,\n            node_details: mockCluster.node_details,\n            cpu_metrics: { usage_percent: 50 },\n            memory_metrics: { usage_percent: 62 },\n            disk_metrics: { usage_percent: 40 }\n          },\n          pod_metrics: {\n            total_pods: 120,\n            running_pods: 115,\n            pending_pods: 3,\n            failed_pods: 2,\n            succeeded_pods: 0\n          },\n          resource_metrics: {\n            cpu: { total: 24, allocatable: 22, used: 11, utilization_percent: 50 },\n            memory: { total_gb: 96, allocatable_gb: 88, used_gb: 55, utilization_percent: 62 },\n            storage: { total_gb: 500, used_gb: 200, utilization_percent: 40 }\n          },\n          workload_metrics: {\n            namespaces: 15,\n            services: 45,\n            ingresses: 8,\n            deployments: 32,\n            statefulsets: 5,\n            daemonsets: 3\n          }\n        })\n      });\n    \n    render(<KubernetesStatusPanel />);\n    \n    await waitFor(() => {\n      // Header\n      expect(screen.getByText('Kubernetes Clusters')).toBeInTheDocument();\n      expect(screen.getByText('Monitor cluster health, resource utilization, and node status')).toBeInTheDocument();\n      \n      // Statistics cards\n      expect(screen.getByText('Total Clusters')).toBeInTheDocument();\n      expect(screen.getByText('2')).toBeInTheDocument();\n      expect(screen.getByText('Healthy Clusters')).toBeInTheDocument();\n      expect(screen.getByText('1')).toBeInTheDocument();\n      \n      // Cluster overview\n      expect(screen.getByText('Cluster Overview')).toBeInTheDocument();\n      expect(screen.getByText('Test Cluster')).toBeInTheDocument();\n      expect(screen.getByText('AWS â€¢ us-west-2')).toBeInTheDocument();\n      \n      // Resource utilization\n      expect(screen.getByText('Resource Utilization')).toBeInTheDocument();\n      expect(screen.getByText('CPU Usage')).toBeInTheDocument();\n      expect(screen.getByText('50%')).toBeInTheDocument();\n      \n      // Node status map\n      expect(screen.getByText('Node Status Map')).toBeInTheDocument();\n      expect(screen.getByText('Ready: 2')).toBeInTheDocument();\n      expect(screen.getByText('Not Ready: 1')).toBeInTheDocument();\n      \n      // Workload summary\n      expect(screen.getByText('Workload Summary')).toBeInTheDocument();\n      expect(screen.getByText('Namespaces')).toBeInTheDocument();\n      expect(screen.getByText('15')).toBeInTheDocument();\n    });\n  });\n\n  /**\n   * Test: Status filter functionality\n   */\n  it('filters clusters by status', async () => {\n    const warningCluster: Cluster = {\n      ...mockCluster,\n      id: 2,\n      name: 'warning-cluster',\n      display_name: 'Warning Cluster',\n      status: 'warning'\n    };\n    \n    mockFetch\n      .mockResolvedValueOnce({\n        ok: true,\n        json: async () => [mockCluster, warningCluster]\n      })\n      .mockResolvedValueOnce({\n        ok: true,\n        json: async () => mockClusterStats\n      });\n    \n    render(<KubernetesStatusPanel />);\n    \n    await waitFor(() => {\n      expect(screen.getByText('Test Cluster')).toBeInTheDocument();\n      expect(screen.getByText('Warning Cluster')).toBeInTheDocument();\n    });\n    \n    // Filter by warning status\n    const statusFilter = screen.getByDisplayValue('All Status');\n    await userEvent.selectOptions(statusFilter, 'warning');\n    \n    await waitFor(() => {\n      expect(screen.queryByText('Test Cluster')).not.toBeInTheDocument();\n      expect(screen.getByText('Warning Cluster')).toBeInTheDocument();\n    });\n    \n    // Reset filter\n    await userEvent.selectOptions(statusFilter, 'all');\n    \n    await waitFor(() => {\n      expect(screen.getByText('Test Cluster')).toBeInTheDocument();\n      expect(screen.getByText('Warning Cluster')).toBeInTheDocument();\n    });\n  });\n\n  /**\n   * Test: Cluster selection functionality\n   */\n  it('allows cluster selection and shows detailed view', async () => {\n    const secondCluster: Cluster = {\n      ...mockCluster,\n      id: 2,\n      name: 'second-cluster',\n      display_name: 'Second Cluster',\n      cpu_utilization_percent: 75\n    };\n    \n    mockFetch\n      .mockResolvedValueOnce({\n        ok: true,\n        json: async () => [mockCluster, secondCluster]\n      })\n      .mockResolvedValueOnce({\n        ok: true,\n        json: async () => mockClusterStats\n      })\n      .mockResolvedValue({\n        ok: true,\n        json: async () => ({ /* mock metrics */ })\n      });\n    \n    render(<KubernetesStatusPanel />);\n    \n    await waitFor(() => {\n      expect(screen.getByText('Test Cluster')).toBeInTheDocument();\n      expect(screen.getByText('Second Cluster')).toBeInTheDocument();\n    });\n    \n    // Click on second cluster\n    const secondClusterCard = screen.getByText('Second Cluster').closest('div[role=\\\"button\\\"]') ||\n                             screen.getByText('Second Cluster').closest('div');\n    if (secondClusterCard) {\n      fireEvent.click(secondClusterCard);\n    }\n    \n    await waitFor(() => {\n      // Should show detailed metrics for selected cluster\n      expect(screen.getByText('Resource Utilization')).toBeInTheDocument();\n    });\n  });\n\n  /**\n   * Test: Node interaction functionality\n   */\n  it('handles node selection and shows node details', async () => {\n    mockFetch\n      .mockResolvedValueOnce({\n        ok: true,\n        json: async () => [mockCluster]\n      })\n      .mockResolvedValueOnce({\n        ok: true,\n        json: async () => mockClusterStats\n      })\n      .mockResolvedValue({\n        ok: true,\n        json: async () => ({ /* mock metrics */ })\n      });\n    \n    render(<KubernetesStatusPanel />);\n    \n    await waitFor(() => {\n      expect(screen.getByText('Node Status Map')).toBeInTheDocument();\n    });\n    \n    // Click on a node (find by node name in the node map)\n    const nodeElements = screen.getAllByText(/node-/);\n    if (nodeElements.length > 0) {\n      fireEvent.click(nodeElements[0].closest('div') || nodeElements[0]);\n      \n      await waitFor(() => {\n        expect(screen.getByText(/Node Details:/)).toBeInTheDocument();\n      });\n    }\n  });\n\n  /**\n   * Test: Sync functionality\n   */\n  it('handles cluster health sync', async () => {\n    mockFetch\n      .mockResolvedValueOnce({\n        ok: true,\n        json: async () => [mockCluster]\n      })\n      .mockResolvedValueOnce({\n        ok: true,\n        json: async () => mockClusterStats\n      })\n      .mockResolvedValue({\n        ok: true,\n        json: async () => ({ /* mock metrics */ })\n      });\n    \n    render(<KubernetesStatusPanel />);\n    \n    await waitFor(() => {\n      expect(screen.getByRole('button', { name: /sync health/i })).toBeInTheDocument();\n    });\n    \n    const syncButton = screen.getByRole('button', { name: /sync health/i });\n    \n    // Mock sync API call\n    mockFetch.mockResolvedValueOnce({ ok: true });\n    \n    fireEvent.click(syncButton);\n    \n    await waitFor(() => {\n      expect(mockFetch).toHaveBeenCalledWith(\n        expect.stringContaining('/api/v1/kubernetes/clusters/1/sync'),\n        expect.objectContaining({\n          method: 'POST'\n        })\n      );\n    });\n  });\n\n  /**\n   * Test: Refresh interval functionality\n   */\n  it('refreshes data at specified intervals', async () => {\n    jest.useFakeTimers();\n    \n    mockFetch\n      .mockResolvedValue({\n        ok: true,\n        json: async () => [mockCluster]\n      });\n    \n    render(<KubernetesStatusPanel refreshInterval={5000} />);\n    \n    // Initial load\n    await waitFor(() => {\n      expect(mockFetch).toHaveBeenCalledTimes(2); // clusters + stats\n    });\n    \n    // Fast-forward time\n    jest.advanceTimersByTime(5000);\n    \n    await waitFor(() => {\n      expect(mockFetch).toHaveBeenCalledTimes(4); // Another refresh cycle\n    });\n    \n    jest.useRealTimers();\n  });\n\n  /**\n   * Test: Retry functionality on error\n   */\n  it('retries data fetch when retry button is clicked', async () => {\n    // First call fails\n    mockFetch.mockRejectedValueOnce(new Error('Network error'));\n    \n    render(<KubernetesStatusPanel />);\n    \n    await waitFor(() => {\n      expect(screen.getByText('Failed to load cluster data')).toBeInTheDocument();\n    });\n    \n    // Set up successful retry\n    mockFetch\n      .mockResolvedValueOnce({\n        ok: true,\n        json: async () => [mockCluster]\n      })\n      .mockResolvedValueOnce({\n        ok: true,\n        json: async () => mockClusterStats\n      });\n    \n    const retryButton = screen.getByRole('button', { name: /retry/i });\n    fireEvent.click(retryButton);\n    \n    await waitFor(() => {\n      expect(screen.getByText('Test Cluster')).toBeInTheDocument();\n      expect(screen.queryByText('Failed to load cluster data')).not.toBeInTheDocument();\n    });\n  });\n\n  /**\n   * Test: Project ID filtering\n   */\n  it('includes project ID in API calls when provided', async () => {\n    mockFetch\n      .mockResolvedValue({\n        ok: true,\n        json: async () => [mockCluster]\n      });\n    \n    render(<KubernetesStatusPanel projectId={123} />);\n    \n    await waitFor(() => {\n      expect(mockFetch).toHaveBeenCalledWith(\n        expect.stringContaining('project_id=123'),\n        expect.any(Object)\n      );\n    });\n  });\n\n  /**\n   * Test: Responsive behavior\n   */\n  it('adapts to mobile view', async () => {\n    // Mock mobile responsive hook\n    jest.doMock('../../../hooks/useResponsive', () => ({\n      useResponsive: () => ({\n        isMobile: true,\n        isTablet: false,\n        isDesktop: false\n      })\n    }));\n    \n    mockFetch\n      .mockResolvedValueOnce({\n        ok: true,\n        json: async () => [mockCluster]\n      })\n      .mockResolvedValueOnce({\n        ok: true,\n        json: async () => mockClusterStats\n      });\n    \n    // Note: In a real test, you'd re-import the component here\n    // to pick up the mocked hook\n    render(<KubernetesStatusPanel />);\n    \n    await waitFor(() => {\n      expect(screen.getByText('Kubernetes Clusters')).toBeInTheDocument();\n    });\n  });\n\n  /**\n   * Test: Disabled real-time updates\n   */\n  it('disables real-time updates when specified', async () => {\n    jest.useFakeTimers();\n    \n    mockFetch\n      .mockResolvedValue({\n        ok: true,\n        json: async () => [mockCluster]\n      });\n    \n    render(<KubernetesStatusPanel enableRealTimeUpdates={false} />);\n    \n    // Initial load\n    await waitFor(() => {\n      expect(mockFetch).toHaveBeenCalledTimes(2);\n    });\n    \n    // Fast-forward time - should not trigger more calls\n    jest.advanceTimersByTime(30000);\n    \n    await waitFor(() => {\n      expect(mockFetch).toHaveBeenCalledTimes(2); // No additional calls\n    });\n    \n    jest.useRealTimers();\n  });\n\n  /**\n   * Test: Component unmounting\n   */\n  it('cleans up intervals on unmount', async () => {\n    jest.useFakeTimers();\n    const clearIntervalSpy = jest.spyOn(global, 'clearInterval');\n    \n    mockFetch\n      .mockResolvedValue({\n        ok: true,\n        json: async () => [mockCluster]\n      });\n    \n    const { unmount } = render(<KubernetesStatusPanel />);\n    \n    await waitFor(() => {\n      expect(screen.getByText('Kubernetes Clusters')).toBeInTheDocument();\n    });\n    \n    unmount();\n    \n    expect(clearIntervalSpy).toHaveBeenCalled();\n    \n    jest.useRealTimers();\n    clearIntervalSpy.mockRestore();\n  });\n});"],"names":["jest","mock","useResponsive","isMobile","isTablet","isDesktop","mockFetch","fn","global","fetch","createMockResponse","data","ok","status","json","headers","Headers","redirected","statusText","type","url","body","bodyUsed","clone","arrayBuffer","blob","formData","text","mockLocalStorage","getItem","setItem","removeItem","Object","defineProperty","window","value","mockCluster","id","cluster_id","name","display_name","version","health_score","last_health_check","provider","region","zone","endpoint_url","monitoring_enabled","prometheus_endpoint","grafana_dashboard_url","log_aggregation_url","cpu_alert_threshold","memory_alert_threshold","storage_alert_threshold","project_id","created_at","updated_at","last_sync","total_nodes","ready_nodes","not_ready_nodes","node_details","last_heartbeat","cpu_usage","memory_usage","disk_usage","total_pods","running_pods","pending_pods","failed_pods","total_cpu_cores","allocatable_cpu_cores","used_cpu_cores","cpu_utilization_percent","total_memory_gb","allocatable_memory_gb","used_memory_gb","memory_utilization_percent","total_storage_gb","used_storage_gb","storage_utilization_percent","network_in_bytes","network_out_bytes","network_errors","total_namespaces","total_services","total_ingresses","total_deployments","total_statefulsets","total_daemonsets","mockClusterStats","total_clusters","healthy_clusters","warning_clusters","critical_clusters","offline_clusters","average_cpu_utilization","average_memory_utilization","clusters_needing_attention","describe","beforeEach","clearAllMocks","mockClear","afterEach","restoreAllMocks","it","mockImplementation","Promise","render","KubernetesStatusPanel","expect","screen","getByRole","toBeInTheDocument","mockRejectedValueOnce","Error","waitFor","getByText","mockResolvedValueOnce","cluster_name","timestamp","node_metrics","cpu_metrics","usage_percent","memory_metrics","disk_metrics","pod_metrics","succeeded_pods","resource_metrics","cpu","total","allocatable","used","utilization_percent","memory","total_gb","allocatable_gb","used_gb","storage","workload_metrics","namespaces","services","ingresses","deployments","statefulsets","daemonsets","warningCluster","statusFilter","getByDisplayValue","userEvent","selectOptions","queryByText","not","secondCluster","mockResolvedValue","secondClusterCard","closest","fireEvent","click","nodeElements","getAllByText","length","syncButton","toHaveBeenCalledWith","stringContaining","objectContaining","method","useFakeTimers","refreshInterval","toHaveBeenCalledTimes","advanceTimersByTime","useRealTimers","retryButton","projectId","any","doMock","enableRealTimeUpdates","clearIntervalSpy","spyOn","unmount","toHaveBeenCalled","mockRestore"],"mappings":"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"}