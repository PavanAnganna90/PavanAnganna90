{"version":3,"sources":["/Users/pavan/Desktop/Devops-app-dev-cursor/frontend/src/components/rbac/__tests__/withPermissions.test.tsx"],"sourcesContent":["/**\n * Unit tests for withPermissions HOC.\n * Tests higher-order component for page-level permission protection.\n */\n\nimport React from 'react';\nimport { render, screen } from '@testing-library/react';\nimport { withPermissions, withAdminAccess } from '../withPermissions';\nimport { useAuth } from '../../../contexts/AuthContext';\n\n// Mock router\nconst mockRouter = {\n  push: jest.fn(),\n  replace: jest.fn(),\n  back: jest.fn(),\n};\n\n// Mock Next.js router\njest.mock('next/navigation', () => ({\n  useRouter: () => mockRouter,\n}));\n\n// Mock the useAuth hook\njest.mock('../../../contexts/AuthContext', () => ({\n  useAuth: jest.fn(),\n}));\n\nconst mockUseAuth = useAuth as jest.MockedFunction<typeof useAuth>;\n\n// Test component to wrap with HOCs\nconst TestComponent = () => <div data-testid=\"protected-page\">Protected Page Content</div>;\n\n// Create mock user\nconst createMockUser = () => ({\n  id: 1,\n  github_id: 'gh_123',\n  github_username: 'testuser',\n  email: 'test@example.com',\n  full_name: 'Test User',\n  avatar_url: 'https://example.com/avatar.png',\n  bio: 'Test bio',\n  company: 'Test Company',\n  location: 'Test Location',\n  blog: 'https://example.com',\n  is_active: true,\n  is_superuser: false,\n  created_at: '2024-01-01T00:00:00Z',\n  updated_at: '2024-01-01T00:00:00Z',\n  last_login: '2024-01-01T00:00:00Z',\n});\n\n// Create mock permissions\nconst createMockPermissions = (names: string[]) => names.map((name, index) => ({\n  id: `perm_${index}`,\n  name,\n  display_name: name.replace(/_/g, ' ').replace(/\\b\\w/g, l => l.toUpperCase()),\n  description: `Permission for ${name}`,\n  category: 'general',\n  is_system_permission: true,\n}));\n\n// Create mock roles\nconst createMockRoles = (names: string[]) => names.map((name, index) => ({\n  id: `role_${index}`,\n  name,\n  display_name: name.replace(/_/g, ' ').replace(/\\b\\w/g, l => l.toUpperCase()),\n  description: `Role for ${name}`,\n  priority: index,\n  is_system_role: true,\n  permissions: [],\n}));\n\n// Mock auth context\nconst createMockAuth = (permissionNames: string[] = [], roleNames: string[] = [], isAdmin = false) => {\n  const permissions = createMockPermissions(permissionNames);\n  const roles = createMockRoles(roleNames);\n  \n  return {\n    state: {\n      isAuthenticated: true,\n      user: createMockUser(),\n      tokens: null,\n      isLoading: false,\n      error: null,\n    },\n    login: jest.fn(),\n    logout: jest.fn(),\n    refreshToken: jest.fn(),\n    getCurrentUser: jest.fn(),\n    hasPermission: jest.fn((permission: string) => permissionNames.includes(permission)),\n    hasRole: jest.fn((role: string) => roleNames.includes(role)),\n    hasAnyRole: jest.fn((roleList: string[]) => roleList.some(role => roleNames.includes(role))),\n    hasAnyPermission: jest.fn((permList: string[]) => permList.some(perm => permissionNames.includes(perm))),\n    canAccess: jest.fn((resource: string) => {\n      const resourcePermissions = {\n        'users': ['view_users', 'manage_users'],\n        'roles': ['view_roles', 'manage_roles'],\n        'infrastructure': ['view_infrastructure', 'manage_infrastructure'],\n      };\n      const requiredPerms = resourcePermissions[resource as keyof typeof resourcePermissions] || [];\n      return requiredPerms.some(perm => permissionNames.includes(perm));\n    }),\n    getUserPermissions: jest.fn(() => permissions),\n    getUserRoles: jest.fn(() => roles),\n    isAdmin: jest.fn(() => isAdmin),\n  };\n};\n\ndescribe('withPermissions HOC', () => {\n  beforeEach(() => {\n    jest.clearAllMocks();\n    mockRouter.push.mockClear();\n    mockRouter.replace.mockClear();\n    mockRouter.back.mockClear();\n  });\n\n  describe('withPermissions', () => {\n    it('renders component when user has required permission', () => {\n      mockUseAuth.mockReturnValue(createMockAuth(['view_dashboard']));\n      \n      const ProtectedComponent = withPermissions(TestComponent, {\n        permissions: ['view_dashboard']\n      });\n\n      render(<ProtectedComponent />);\n\n      expect(screen.getByTestId('protected-page')).toBeInTheDocument();\n    });\n\n    it('renders access denied when user lacks required permission', () => {\n      mockUseAuth.mockReturnValue(createMockAuth([]));\n      \n      const ProtectedComponent = withPermissions(TestComponent, {\n        permissions: ['view_dashboard']\n      });\n\n      render(<ProtectedComponent />);\n\n      expect(screen.queryByTestId('protected-page')).not.toBeInTheDocument();\n      expect(screen.getByText('Access Denied')).toBeInTheDocument();\n      expect(screen.getByText(/Required permissions: view_dashboard/)).toBeInTheDocument();\n      expect(mockRouter.push).toHaveBeenCalledWith('/unauthorized');\n    });\n\n    it('renders component when user has any of multiple permissions (requireAll=false)', () => {\n      mockUseAuth.mockReturnValue(createMockAuth(['view_dashboard']));\n      \n      const ProtectedComponent = withPermissions(TestComponent, {\n        permissions: ['view_dashboard', 'manage_infrastructure'],\n        requireAll: false\n      });\n\n      render(<ProtectedComponent />);\n\n      expect(screen.getByTestId('protected-page')).toBeInTheDocument();\n    });\n\n    it('requires all permissions when requireAll=true', () => {\n      mockUseAuth.mockReturnValue(createMockAuth(['view_dashboard']));\n      \n      const ProtectedComponent = withPermissions(TestComponent, {\n        permissions: ['view_dashboard', 'manage_infrastructure'],\n        requireAll: true\n      });\n\n      render(<ProtectedComponent />);\n\n      expect(screen.queryByTestId('protected-page')).not.toBeInTheDocument();\n      expect(screen.getByText('Access Denied')).toBeInTheDocument();\n      expect(screen.getByText(/Required permissions: view_dashboard and manage_infrastructure/)).toBeInTheDocument();\n      expect(mockRouter.push).toHaveBeenCalledWith('/unauthorized');\n    });\n\n    it('renders component when user has required role', () => {\n      mockUseAuth.mockReturnValue(createMockAuth([], ['organization_owner']));\n      \n      const ProtectedComponent = withPermissions(TestComponent, {\n        roles: ['organization_owner']\n      });\n\n      render(<ProtectedComponent />);\n\n      expect(screen.getByTestId('protected-page')).toBeInTheDocument();\n    });\n\n    it('renders component when user has any of multiple roles', () => {\n      mockUseAuth.mockReturnValue(createMockAuth([], ['team_lead']));\n      \n      const ProtectedComponent = withPermissions(TestComponent, {\n        roles: ['organization_owner', 'team_lead', 'devops_admin']\n      });\n\n      render(<ProtectedComponent />);\n\n      expect(screen.getByTestId('protected-page')).toBeInTheDocument();\n    });\n\n    it('renders access denied when user lacks required roles', () => {\n      mockUseAuth.mockReturnValue(createMockAuth([], ['developer']));\n      \n      const ProtectedComponent = withPermissions(TestComponent, {\n        roles: ['organization_owner', 'devops_admin']\n      });\n\n      render(<ProtectedComponent />);\n\n      expect(screen.queryByTestId('protected-page')).not.toBeInTheDocument();\n      expect(screen.getByText('Access Denied')).toBeInTheDocument();\n      expect(screen.getByText(/Required roles: organization_owner or devops_admin/)).toBeInTheDocument();\n      expect(mockRouter.push).toHaveBeenCalledWith('/unauthorized');\n    });\n\n    it('renders component when user can access resource with required action', () => {\n      mockUseAuth.mockReturnValue(createMockAuth(['manage_users']));\n      \n      const ProtectedComponent = withPermissions(TestComponent, {\n        resource: 'users',\n        action: 'manage'\n      });\n\n      render(<ProtectedComponent />);\n\n      expect(screen.getByTestId('protected-page')).toBeInTheDocument();\n    });\n\n    it('renders access denied when user cannot access resource', () => {\n      mockUseAuth.mockReturnValue(createMockAuth(['view_dashboard']));\n      \n      const ProtectedComponent = withPermissions(TestComponent, {\n        resource: 'users',\n        action: 'manage'\n      });\n\n      render(<ProtectedComponent />);\n\n      expect(screen.queryByTestId('protected-page')).not.toBeInTheDocument();\n      expect(screen.getByText('Access Denied')).toBeInTheDocument();\n      expect(screen.getByText(/You don't have permission to manage users/)).toBeInTheDocument();\n      expect(mockRouter.push).toHaveBeenCalledWith('/unauthorized');\n    });\n\n    it('renders custom fallback component when provided', () => {\n      mockUseAuth.mockReturnValue(createMockAuth([]));\n      \n      const CustomFallback = () => <div data-testid=\"custom-fallback\">Custom Access Denied</div>;\n      \n      const ProtectedComponent = withPermissions(TestComponent, {\n        permissions: ['view_dashboard'],\n        fallback: CustomFallback\n      });\n\n      render(<ProtectedComponent />);\n\n      expect(screen.queryByTestId('protected-page')).not.toBeInTheDocument();\n      expect(screen.getByTestId('custom-fallback')).toBeInTheDocument();\n      expect(mockRouter.push).toHaveBeenCalledWith('/unauthorized');\n    });\n\n    it('redirects to login when user is not authenticated', () => {\n      mockUseAuth.mockReturnValue({\n        ...createMockAuth([]),\n        state: {\n          isAuthenticated: false,\n          user: null,\n          tokens: null,\n          isLoading: false,\n          error: null,\n        }\n      });\n      \n      const ProtectedComponent = withPermissions(TestComponent, {\n        permissions: ['view_dashboard']\n      });\n\n      render(<ProtectedComponent />);\n\n      expect(screen.getByText('Authentication Required')).toBeInTheDocument();\n      expect(screen.getByText('Redirecting to login...')).toBeInTheDocument();\n      expect(mockRouter.push).toHaveBeenCalledWith('/login');\n    });\n\n    it('handles complex permission combinations', () => {\n      mockUseAuth.mockReturnValue(createMockAuth(\n        ['view_dashboard', 'view_infrastructure'], \n        ['team_lead']\n      ));\n      \n      const ProtectedComponent = withPermissions(TestComponent, {\n        permissions: ['view_dashboard'],\n        roles: ['team_lead'],\n        resource: 'infrastructure',\n        action: 'view'\n      });\n\n      render(<ProtectedComponent />);\n\n      expect(screen.getByTestId('protected-page')).toBeInTheDocument();\n    });\n\n    it('denies access when any permission check fails in complex combinations', () => {\n      mockUseAuth.mockReturnValue(createMockAuth(\n        ['view_dashboard'], \n        ['developer'] // Wrong role\n      ));\n      \n      const ProtectedComponent = withPermissions(TestComponent, {\n        permissions: ['view_dashboard'],\n        roles: ['team_lead'], // Required role user doesn't have\n        resource: 'infrastructure',\n        action: 'view'\n      });\n\n      render(<ProtectedComponent />);\n\n      expect(screen.queryByTestId('protected-page')).not.toBeInTheDocument();\n      expect(screen.getByText('Access Denied')).toBeInTheDocument();\n      expect(mockRouter.push).toHaveBeenCalledWith('/unauthorized');\n    });\n\n    it('uses custom redirect path when provided', () => {\n      mockUseAuth.mockReturnValue(createMockAuth([]));\n      \n      const ProtectedComponent = withPermissions(TestComponent, {\n        permissions: ['view_dashboard'],\n        redirectTo: '/custom-unauthorized'\n      });\n\n      render(<ProtectedComponent />);\n\n      expect(screen.queryByTestId('protected-page')).not.toBeInTheDocument();\n      expect(mockRouter.push).toHaveBeenCalledWith('/custom-unauthorized');\n    });\n  });\n\n  describe('withAdminAccess HOC', () => {\n    it('renders component for admin users', () => {\n      mockUseAuth.mockReturnValue(createMockAuth(\n        ['manage_roles', 'manage_users'], \n        ['organization_owner'], \n        true\n      ));\n      \n      const AdminComponent = withAdminAccess(TestComponent);\n\n      render(<AdminComponent />);\n\n      expect(screen.getByTestId('protected-page')).toBeInTheDocument();\n    });\n\n    it('renders access denied for non-admin users', () => {\n      mockUseAuth.mockReturnValue(createMockAuth(\n        ['view_dashboard'], \n        ['developer'], \n        false\n      ));\n      \n      const AdminComponent = withAdminAccess(TestComponent);\n\n      render(<AdminComponent />);\n\n      expect(screen.queryByTestId('protected-page')).not.toBeInTheDocument();\n      expect(screen.getByText('Access Denied')).toBeInTheDocument();\n      expect(screen.getByText('Administrator access required.')).toBeInTheDocument();\n      expect(mockRouter.push).toHaveBeenCalledWith('/unauthorized');\n    });\n\n    it('preserves component props', () => {\n      mockUseAuth.mockReturnValue(createMockAuth(\n        ['manage_roles'], \n        ['organization_owner'], \n        true\n      ));\n      \n      const PropsTestComponent = ({ testProp }: { testProp: string }) => (\n        <div data-testid=\"props-test\">{testProp}</div>\n      );\n      \n      const AdminComponent = withAdminAccess(PropsTestComponent);\n\n      render(<AdminComponent testProp=\"test-value\" />);\n\n      expect(screen.getByTestId('props-test')).toHaveTextContent('test-value');\n    });\n\n    it('preserves component display name', () => {\n      const NamedComponent = () => <div>Test</div>;\n      NamedComponent.displayName = 'NamedComponent';\n      \n      const AdminComponent = withAdminAccess(NamedComponent);\n      \n      expect(AdminComponent.displayName).toBe('withPermissions(NamedComponent)');\n    });\n  });\n\n  describe('HOC Edge Cases', () => {\n    it('handles undefined permissions gracefully', () => {\n      mockUseAuth.mockReturnValue(createMockAuth());\n      \n      const ProtectedComponent = withPermissions(TestComponent, {\n        permissions: undefined as any\n      });\n\n      render(<ProtectedComponent />);\n\n      // Should render component when no permissions are required\n      expect(screen.getByTestId('protected-page')).toBeInTheDocument();\n    });\n\n    it('handles empty permissions array', () => {\n      mockUseAuth.mockReturnValue(createMockAuth());\n      \n      const ProtectedComponent = withPermissions(TestComponent, {\n        permissions: []\n      });\n\n      render(<ProtectedComponent />);\n\n      // Should render component when no permissions are required\n      expect(screen.getByTestId('protected-page')).toBeInTheDocument();\n    });\n\n    it('handles missing auth context gracefully', () => {\n      // Mock useAuth to throw error (simulating missing provider)\n      mockUseAuth.mockImplementation(() => {\n        throw new Error('useAuth must be used within an AuthProvider');\n      });\n      \n      const ProtectedComponent = withPermissions(TestComponent, {\n        permissions: ['view_dashboard']\n      });\n\n      // Should throw when auth context is missing\n      expect(() => render(<ProtectedComponent />)).toThrow('useAuth must be used within an AuthProvider');\n    });\n\n    it('handles auth error state', () => {\n      mockUseAuth.mockReturnValue({\n        ...createMockAuth([]),\n        state: {\n          isAuthenticated: false,\n          user: null,\n          tokens: null,\n          isLoading: false,\n          error: 'Authentication failed',\n        }\n      });\n      \n      const ProtectedComponent = withPermissions(TestComponent, {\n        permissions: ['view_dashboard']\n      });\n\n      render(<ProtectedComponent />);\n\n      // When not authenticated, should redirect to login\n      expect(screen.getByText('Authentication Required')).toBeInTheDocument();\n      expect(mockRouter.push).toHaveBeenCalledWith('/login');\n    });\n\n    it('handles organization-scoped permissions', () => {\n      const mockAuth = createMockAuth(['view_dashboard']);\n      \n      // The implementation doesn't actually check organizationId in hasPermission\n      // so this test needs to be adjusted\n      const ProtectedComponent = withPermissions(TestComponent, {\n        permissions: ['view_dashboard'],\n        organizationId: 'org-123'\n      });\n\n      mockUseAuth.mockReturnValue(mockAuth);\n      render(<ProtectedComponent />);\n\n      expect(screen.getByTestId('protected-page')).toBeInTheDocument();\n    });\n\n    it('handles loading state', () => {\n      mockUseAuth.mockReturnValue({\n        ...createMockAuth(['view_dashboard']), // User has the required permission\n        state: {\n          isAuthenticated: true,\n          user: createMockUser(),\n          tokens: null,\n          isLoading: true,\n          error: null,\n        }\n      });\n      \n      const ProtectedComponent = withPermissions(TestComponent, {\n        permissions: ['view_dashboard']\n      });\n\n      render(<ProtectedComponent />);\n\n      // Should render when loading if authenticated and has permissions\n      expect(screen.getByTestId('protected-page')).toBeInTheDocument();\n    });\n  });\n});"],"names":["jest","mock","useRouter","mockRouter","useAuth","fn","push","replace","back","mockUseAuth","TestComponent","div","data-testid","createMockUser","id","github_id","github_username","email","full_name","avatar_url","bio","company","location","blog","is_active","is_superuser","created_at","updated_at","last_login","createMockPermissions","names","map","name","index","display_name","l","toUpperCase","description","category","is_system_permission","createMockRoles","priority","is_system_role","permissions","createMockAuth","permissionNames","roleNames","isAdmin","roles","state","isAuthenticated","user","tokens","isLoading","error","login","logout","refreshToken","getCurrentUser","hasPermission","permission","includes","hasRole","role","hasAnyRole","roleList","some","hasAnyPermission","permList","perm","canAccess","resource","resourcePermissions","requiredPerms","getUserPermissions","getUserRoles","describe","beforeEach","clearAllMocks","mockClear","it","mockReturnValue","ProtectedComponent","withPermissions","render","expect","screen","getByTestId","toBeInTheDocument","queryByTestId","not","getByText","toHaveBeenCalledWith","requireAll","action","CustomFallback","fallback","redirectTo","AdminComponent","withAdminAccess","PropsTestComponent","testProp","toHaveTextContent","NamedComponent","displayName","toBe","undefined","mockImplementation","Error","toThrow","mockAuth","organizationId"],"mappings":"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"}