520bcc6442bca4dfd20b6be56d3a9807
/**
 * Unit tests for GitHubLoginButton component
 * Tests OAuth initiation, props handling, and accessibility features
 */ "use strict";
Object.defineProperty(exports, "__esModule", {
    value: true
});
const _jsxruntime = require("react/jsx-runtime");
const _react = /*#__PURE__*/ _interop_require_default(require("react"));
const _react1 = require("@testing-library/react");
require("@testing-library/jest-dom");
const _GitHubLoginButton = /*#__PURE__*/ _interop_require_default(require("../../../components/auth/GitHubLoginButton"));
function _interop_require_default(obj) {
    return obj && obj.__esModule ? obj : {
        default: obj
    };
}
// Mock environment variables
const mockEnv = {
    VITE_GITHUB_CLIENT_ID: 'test-client-id'
};
// Mock process.env for Jest
process.env.VITE_GITHUB_CLIENT_ID = 'test-client-id';
// Mock window.location
const mockLocation = {
    origin: 'http://localhost:3000',
    href: ''
};
Object.defineProperty(window, 'location', {
    value: mockLocation,
    writable: true
});
// Mock sessionStorage
const mockSessionStorage = {
    setItem: jest.fn(),
    getItem: jest.fn(),
    removeItem: jest.fn(),
    clear: jest.fn()
};
Object.defineProperty(window, 'sessionStorage', {
    value: mockSessionStorage,
    writable: true
});
describe('GitHubLoginButton', ()=>{
    beforeEach(()=>{
        jest.clearAllMocks();
        mockLocation.href = '';
        process.env.VITE_GITHUB_CLIENT_ID = 'test-client-id';
    });
    afterEach(()=>{
        jest.restoreAllMocks();
    });
    describe('rendering', ()=>{
        // Expected use test
        it('should render with default props', ()=>{
            (0, _react1.render)(/*#__PURE__*/ (0, _jsxruntime.jsx)(_GitHubLoginButton.default, {}));
            const button = _react1.screen.getByRole('button', {
                name: /sign in with github/i
            });
            expect(button).toBeInTheDocument();
            expect(button).toHaveTextContent('Continue with GitHub');
            expect(button).not.toBeDisabled();
        });
        // Expected use test
        it('should render GitHub icon', ()=>{
            (0, _react1.render)(/*#__PURE__*/ (0, _jsxruntime.jsx)(_GitHubLoginButton.default, {}));
            const icon = _react1.screen.getByRole('button').querySelector('svg');
            expect(icon).toBeInTheDocument();
            expect(icon).toHaveAttribute('viewBox', '0 0 24 24');
        });
        // Expected use test
        it('should display loading state correctly', ()=>{
            (0, _react1.render)(/*#__PURE__*/ (0, _jsxruntime.jsx)(_GitHubLoginButton.default, {
                isLoading: true
            }));
            const button = _react1.screen.getByRole('button');
            expect(button).toBeDisabled();
            expect(button).toHaveTextContent('Connecting...');
            // Should show loading spinner
            const spinner = button.querySelector('.animate-spin');
            expect(spinner).toBeInTheDocument();
        });
        // Edge case test
        it('should apply size variants correctly', ()=>{
            const { rerender } = (0, _react1.render)(/*#__PURE__*/ (0, _jsxruntime.jsx)(_GitHubLoginButton.default, {
                size: "sm"
            }));
            let button = _react1.screen.getByRole('button');
            expect(button).toHaveClass('px-3', 'py-2', 'text-sm');
            rerender(/*#__PURE__*/ (0, _jsxruntime.jsx)(_GitHubLoginButton.default, {
                size: "lg"
            }));
            button = _react1.screen.getByRole('button');
            expect(button).toHaveClass('px-6', 'py-3', 'text-lg');
        });
        // Edge case test
        it('should apply style variants correctly', ()=>{
            const { rerender } = (0, _react1.render)(/*#__PURE__*/ (0, _jsxruntime.jsx)(_GitHubLoginButton.default, {
                variant: "primary"
            }));
            let button = _react1.screen.getByRole('button');
            expect(button).toHaveClass('bg-neutral-900', 'text-neutral-0');
            rerender(/*#__PURE__*/ (0, _jsxruntime.jsx)(_GitHubLoginButton.default, {
                variant: "secondary"
            }));
            button = _react1.screen.getByRole('button');
            expect(button).toHaveClass('bg-neutral-100', 'text-neutral-900');
            rerender(/*#__PURE__*/ (0, _jsxruntime.jsx)(_GitHubLoginButton.default, {
                variant: "outline"
            }));
            button = _react1.screen.getByRole('button');
            expect(button).toHaveClass('bg-transparent', 'border-neutral-300');
        });
        // Edge case test
        it('should apply custom className', ()=>{
            (0, _react1.render)(/*#__PURE__*/ (0, _jsxruntime.jsx)(_GitHubLoginButton.default, {
                className: "custom-class"
            }));
            const button = _react1.screen.getByRole('button');
            expect(button).toHaveClass('custom-class');
        });
    });
    describe('accessibility', ()=>{
        // Expected use test
        it('should have proper ARIA attributes', ()=>{
            (0, _react1.render)(/*#__PURE__*/ (0, _jsxruntime.jsx)(_GitHubLoginButton.default, {}));
            const button = _react1.screen.getByRole('button');
            expect(button).toHaveAttribute('aria-label', 'Sign in with GitHub');
            expect(button).toHaveAttribute('type', 'button');
            expect(button).toHaveAttribute('data-testid', 'github-login-button');
        });
        // Expected use test
        it('should be keyboard accessible', ()=>{
            (0, _react1.render)(/*#__PURE__*/ (0, _jsxruntime.jsx)(_GitHubLoginButton.default, {}));
            const button = _react1.screen.getByRole('button');
            expect(button).toHaveClass('focus:outline-none', 'focus:ring-2');
        });
        // Edge case test
        it('should hide decorative icons from screen readers', ()=>{
            (0, _react1.render)(/*#__PURE__*/ (0, _jsxruntime.jsx)(_GitHubLoginButton.default, {}));
            const icons = _react1.screen.getByRole('button').querySelectorAll('svg');
            icons.forEach((icon)=>{
                expect(icon).toHaveAttribute('aria-hidden', 'true');
            });
        });
    });
    describe('OAuth functionality', ()=>{
        // Expected use test
        it('should initiate OAuth flow on click', ()=>{
            (0, _react1.render)(/*#__PURE__*/ (0, _jsxruntime.jsx)(_GitHubLoginButton.default, {}));
            const button = _react1.screen.getByRole('button');
            _react1.fireEvent.click(button);
            // Should set state in sessionStorage
            expect(mockSessionStorage.setItem).toHaveBeenCalledWith('github_oauth_state', expect.any(String));
            // Should redirect to GitHub OAuth URL
            expect(mockLocation.href).toContain('https://github.com/login/oauth/authorize');
            expect(mockLocation.href).toContain('client_id=test-client-id');
            expect(mockLocation.href).toContain('redirect_uri=http://localhost:3000/auth/callback');
            expect(mockLocation.href).toContain('scope=user:email%20read:user');
            expect(mockLocation.href).toContain('state=');
            expect(mockLocation.href).toContain('allow_signup=true');
        });
        // Expected use test
        it('should call onLoginStart callback when provided', ()=>{
            const onLoginStart = jest.fn();
            (0, _react1.render)(/*#__PURE__*/ (0, _jsxruntime.jsx)(_GitHubLoginButton.default, {
                onLoginStart: onLoginStart
            }));
            const button = _react1.screen.getByRole('button');
            _react1.fireEvent.click(button);
            expect(onLoginStart).toHaveBeenCalledTimes(1);
        });
        // Edge case test
        it('should generate unique state parameter', ()=>{
            (0, _react1.render)(/*#__PURE__*/ (0, _jsxruntime.jsx)(_GitHubLoginButton.default, {}));
            const button = _react1.screen.getByRole('button');
            // Click multiple times
            _react1.fireEvent.click(button);
            const firstCall = mockSessionStorage.setItem.mock.calls[0][1];
            mockSessionStorage.setItem.mockClear();
            _react1.fireEvent.click(button);
            const secondCall = mockSessionStorage.setItem.mock.calls[0][1];
            // State should be different each time
            expect(firstCall).not.toBe(secondCall);
        });
        // Edge case test
        it('should include timestamp and random data in state', ()=>{
            (0, _react1.render)(/*#__PURE__*/ (0, _jsxruntime.jsx)(_GitHubLoginButton.default, {}));
            const button = _react1.screen.getByRole('button');
            _react1.fireEvent.click(button);
            const stateParam = mockSessionStorage.setItem.mock.calls[0][1];
            const decodedState = JSON.parse(atob(stateParam));
            expect(decodedState).toHaveProperty('timestamp');
            expect(decodedState).toHaveProperty('random');
            expect(typeof decodedState.timestamp).toBe('number');
            expect(typeof decodedState.random).toBe('string');
        });
    });
    describe('error handling', ()=>{
        // Failure case test
        it('should handle missing GitHub client ID', ()=>{
            const consoleSpy = jest.spyOn(console, 'error').mockImplementation(()=>{});
            const originalEnv = process.env.VITE_GITHUB_CLIENT_ID;
            delete process.env.VITE_GITHUB_CLIENT_ID;
            (0, _react1.render)(/*#__PURE__*/ (0, _jsxruntime.jsx)(_GitHubLoginButton.default, {}));
            const button = _react1.screen.getByRole('button');
            _react1.fireEvent.click(button);
            expect(consoleSpy).toHaveBeenCalledWith('GitHub Client ID not configured');
            expect(mockLocation.href).toBe('');
            // Restore
            process.env.VITE_GITHUB_CLIENT_ID = originalEnv;
            consoleSpy.mockRestore();
        });
        // Failure case test
        it('should not initiate OAuth when loading', ()=>{
            (0, _react1.render)(/*#__PURE__*/ (0, _jsxruntime.jsx)(_GitHubLoginButton.default, {
                isLoading: true
            }));
            const button = _react1.screen.getByRole('button');
            _react1.fireEvent.click(button);
            expect(mockSessionStorage.setItem).not.toHaveBeenCalled();
            expect(mockLocation.href).toBe('');
        });
        // Failure case test
        it('should handle sessionStorage errors gracefully', ()=>{
            mockSessionStorage.setItem.mockImplementation(()=>{
                throw new Error('SessionStorage error');
            });
            (0, _react1.render)(/*#__PURE__*/ (0, _jsxruntime.jsx)(_GitHubLoginButton.default, {}));
            const button = _react1.screen.getByRole('button');
            // Should not throw error
            expect(()=>_react1.fireEvent.click(button)).not.toThrow();
        });
    });
    describe('component state management', ()=>{
        // Expected use test
        it('should handle multiple rapid clicks', ()=>{
            (0, _react1.render)(/*#__PURE__*/ (0, _jsxruntime.jsx)(_GitHubLoginButton.default, {}));
            const button = _react1.screen.getByRole('button');
            // Rapidly click multiple times
            _react1.fireEvent.click(button);
            _react1.fireEvent.click(button);
            _react1.fireEvent.click(button);
            // Should still work (last click should execute)
            expect(mockSessionStorage.setItem).toHaveBeenCalled();
            expect(mockLocation.href).toContain('github.com');
        });
        // Edge case test
        it('should not interfere with button when disabled via loading', async ()=>{
            const { rerender } = (0, _react1.render)(/*#__PURE__*/ (0, _jsxruntime.jsx)(_GitHubLoginButton.default, {
                isLoading: false
            }));
            let button = _react1.screen.getByRole('button');
            expect(button).not.toBeDisabled();
            rerender(/*#__PURE__*/ (0, _jsxruntime.jsx)(_GitHubLoginButton.default, {
                isLoading: true
            }));
            button = _react1.screen.getByRole('button');
            expect(button).toBeDisabled();
            _react1.fireEvent.click(button);
            expect(mockSessionStorage.setItem).not.toHaveBeenCalled();
        });
    });
    describe('URL construction', ()=>{
        // Expected use test
        it('should construct proper OAuth URL with all parameters', ()=>{
            (0, _react1.render)(/*#__PURE__*/ (0, _jsxruntime.jsx)(_GitHubLoginButton.default, {}));
            const button = _react1.screen.getByRole('button');
            _react1.fireEvent.click(button);
            const url = new URL(mockLocation.href);
            expect(url.hostname).toBe('github.com');
            expect(url.pathname).toBe('/login/oauth/authorize');
            expect(url.searchParams.get('client_id')).toBe('test-client-id');
            expect(url.searchParams.get('redirect_uri')).toBe('http://localhost:3000/auth/callback');
            expect(url.searchParams.get('scope')).toBe('user:email read:user');
            expect(url.searchParams.get('allow_signup')).toBe('true');
            expect(url.searchParams.get('state')).toBeTruthy();
        });
        // Edge case test
        it('should handle different origin URLs', ()=>{
            mockLocation.origin = 'https://app.example.com';
            (0, _react1.render)(/*#__PURE__*/ (0, _jsxruntime.jsx)(_GitHubLoginButton.default, {}));
            const button = _react1.screen.getByRole('button');
            _react1.fireEvent.click(button);
            expect(mockLocation.href).toContain('redirect_uri=https://app.example.com/auth/callback');
        });
    });
});

//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi9Vc2Vycy9wYXZhbi9EZXNrdG9wL0Rldm9wcy1hcHAtZGV2LWN1cnNvci9mcm9udGVuZC9zcmMvdGVzdHMvY29tcG9uZW50cy9hdXRoL0dpdEh1YkxvZ2luQnV0dG9uLnRlc3QudHN4Il0sInNvdXJjZXNDb250ZW50IjpbIi8qKlxuICogVW5pdCB0ZXN0cyBmb3IgR2l0SHViTG9naW5CdXR0b24gY29tcG9uZW50XG4gKiBUZXN0cyBPQXV0aCBpbml0aWF0aW9uLCBwcm9wcyBoYW5kbGluZywgYW5kIGFjY2Vzc2liaWxpdHkgZmVhdHVyZXNcbiAqL1xuXG5pbXBvcnQgUmVhY3QgZnJvbSAncmVhY3QnO1xuaW1wb3J0IHsgcmVuZGVyLCBzY3JlZW4sIGZpcmVFdmVudCB9IGZyb20gJ0B0ZXN0aW5nLWxpYnJhcnkvcmVhY3QnO1xuaW1wb3J0ICdAdGVzdGluZy1saWJyYXJ5L2plc3QtZG9tJztcbmltcG9ydCBHaXRIdWJMb2dpbkJ1dHRvbiBmcm9tICcuLi8uLi8uLi9jb21wb25lbnRzL2F1dGgvR2l0SHViTG9naW5CdXR0b24nO1xuXG4vLyBNb2NrIGVudmlyb25tZW50IHZhcmlhYmxlc1xuY29uc3QgbW9ja0VudiA9IHtcbiAgVklURV9HSVRIVUJfQ0xJRU5UX0lEOiAndGVzdC1jbGllbnQtaWQnXG59O1xuXG4vLyBNb2NrIHByb2Nlc3MuZW52IGZvciBKZXN0XG5wcm9jZXNzLmVudi5WSVRFX0dJVEhVQl9DTElFTlRfSUQgPSAndGVzdC1jbGllbnQtaWQnO1xuXG4vLyBNb2NrIHdpbmRvdy5sb2NhdGlvblxuY29uc3QgbW9ja0xvY2F0aW9uID0ge1xuICBvcmlnaW46ICdodHRwOi8vbG9jYWxob3N0OjMwMDAnLFxuICBocmVmOiAnJ1xufTtcblxuT2JqZWN0LmRlZmluZVByb3BlcnR5KHdpbmRvdywgJ2xvY2F0aW9uJywge1xuICB2YWx1ZTogbW9ja0xvY2F0aW9uLFxuICB3cml0YWJsZTogdHJ1ZVxufSk7XG5cbi8vIE1vY2sgc2Vzc2lvblN0b3JhZ2VcbmNvbnN0IG1vY2tTZXNzaW9uU3RvcmFnZSA9IHtcbiAgc2V0SXRlbTogamVzdC5mbigpLFxuICBnZXRJdGVtOiBqZXN0LmZuKCksXG4gIHJlbW92ZUl0ZW06IGplc3QuZm4oKSxcbiAgY2xlYXI6IGplc3QuZm4oKVxufTtcblxuT2JqZWN0LmRlZmluZVByb3BlcnR5KHdpbmRvdywgJ3Nlc3Npb25TdG9yYWdlJywge1xuICB2YWx1ZTogbW9ja1Nlc3Npb25TdG9yYWdlLFxuICB3cml0YWJsZTogdHJ1ZVxufSk7XG5cbmRlc2NyaWJlKCdHaXRIdWJMb2dpbkJ1dHRvbicsICgpID0+IHtcbiAgYmVmb3JlRWFjaCgoKSA9PiB7XG4gICAgamVzdC5jbGVhckFsbE1vY2tzKCk7XG4gICAgbW9ja0xvY2F0aW9uLmhyZWYgPSAnJztcbiAgICBwcm9jZXNzLmVudi5WSVRFX0dJVEhVQl9DTElFTlRfSUQgPSAndGVzdC1jbGllbnQtaWQnO1xuICB9KTtcblxuICBhZnRlckVhY2goKCkgPT4ge1xuICAgIGplc3QucmVzdG9yZUFsbE1vY2tzKCk7XG4gIH0pO1xuXG4gIGRlc2NyaWJlKCdyZW5kZXJpbmcnLCAoKSA9PiB7XG4gICAgLy8gRXhwZWN0ZWQgdXNlIHRlc3RcbiAgICBpdCgnc2hvdWxkIHJlbmRlciB3aXRoIGRlZmF1bHQgcHJvcHMnLCAoKSA9PiB7XG4gICAgICByZW5kZXIoPEdpdEh1YkxvZ2luQnV0dG9uIC8+KTtcbiAgICAgIFxuICAgICAgY29uc3QgYnV0dG9uID0gc2NyZWVuLmdldEJ5Um9sZSgnYnV0dG9uJywgeyBuYW1lOiAvc2lnbiBpbiB3aXRoIGdpdGh1Yi9pIH0pO1xuICAgICAgZXhwZWN0KGJ1dHRvbikudG9CZUluVGhlRG9jdW1lbnQoKTtcbiAgICAgIGV4cGVjdChidXR0b24pLnRvSGF2ZVRleHRDb250ZW50KCdDb250aW51ZSB3aXRoIEdpdEh1YicpO1xuICAgICAgZXhwZWN0KGJ1dHRvbikubm90LnRvQmVEaXNhYmxlZCgpO1xuICAgIH0pO1xuXG4gICAgLy8gRXhwZWN0ZWQgdXNlIHRlc3RcbiAgICBpdCgnc2hvdWxkIHJlbmRlciBHaXRIdWIgaWNvbicsICgpID0+IHtcbiAgICAgIHJlbmRlcig8R2l0SHViTG9naW5CdXR0b24gLz4pO1xuICAgICAgXG4gICAgICBjb25zdCBpY29uID0gc2NyZWVuLmdldEJ5Um9sZSgnYnV0dG9uJykucXVlcnlTZWxlY3Rvcignc3ZnJyk7XG4gICAgICBleHBlY3QoaWNvbikudG9CZUluVGhlRG9jdW1lbnQoKTtcbiAgICAgIGV4cGVjdChpY29uKS50b0hhdmVBdHRyaWJ1dGUoJ3ZpZXdCb3gnLCAnMCAwIDI0IDI0Jyk7XG4gICAgfSk7XG5cbiAgICAvLyBFeHBlY3RlZCB1c2UgdGVzdFxuICAgIGl0KCdzaG91bGQgZGlzcGxheSBsb2FkaW5nIHN0YXRlIGNvcnJlY3RseScsICgpID0+IHtcbiAgICAgIHJlbmRlcig8R2l0SHViTG9naW5CdXR0b24gaXNMb2FkaW5nPXt0cnVlfSAvPik7XG4gICAgICBcbiAgICAgIGNvbnN0IGJ1dHRvbiA9IHNjcmVlbi5nZXRCeVJvbGUoJ2J1dHRvbicpO1xuICAgICAgZXhwZWN0KGJ1dHRvbikudG9CZURpc2FibGVkKCk7XG4gICAgICBleHBlY3QoYnV0dG9uKS50b0hhdmVUZXh0Q29udGVudCgnQ29ubmVjdGluZy4uLicpO1xuICAgICAgXG4gICAgICAvLyBTaG91bGQgc2hvdyBsb2FkaW5nIHNwaW5uZXJcbiAgICAgIGNvbnN0IHNwaW5uZXIgPSBidXR0b24ucXVlcnlTZWxlY3RvcignLmFuaW1hdGUtc3BpbicpO1xuICAgICAgZXhwZWN0KHNwaW5uZXIpLnRvQmVJblRoZURvY3VtZW50KCk7XG4gICAgfSk7XG5cbiAgICAvLyBFZGdlIGNhc2UgdGVzdFxuICAgIGl0KCdzaG91bGQgYXBwbHkgc2l6ZSB2YXJpYW50cyBjb3JyZWN0bHknLCAoKSA9PiB7XG4gICAgICBjb25zdCB7IHJlcmVuZGVyIH0gPSByZW5kZXIoPEdpdEh1YkxvZ2luQnV0dG9uIHNpemU9XCJzbVwiIC8+KTtcbiAgICAgIGxldCBidXR0b24gPSBzY3JlZW4uZ2V0QnlSb2xlKCdidXR0b24nKTtcbiAgICAgIGV4cGVjdChidXR0b24pLnRvSGF2ZUNsYXNzKCdweC0zJywgJ3B5LTInLCAndGV4dC1zbScpO1xuXG4gICAgICByZXJlbmRlcig8R2l0SHViTG9naW5CdXR0b24gc2l6ZT1cImxnXCIgLz4pO1xuICAgICAgYnV0dG9uID0gc2NyZWVuLmdldEJ5Um9sZSgnYnV0dG9uJyk7XG4gICAgICBleHBlY3QoYnV0dG9uKS50b0hhdmVDbGFzcygncHgtNicsICdweS0zJywgJ3RleHQtbGcnKTtcbiAgICB9KTtcblxuICAgIC8vIEVkZ2UgY2FzZSB0ZXN0XG4gICAgaXQoJ3Nob3VsZCBhcHBseSBzdHlsZSB2YXJpYW50cyBjb3JyZWN0bHknLCAoKSA9PiB7XG4gICAgICBjb25zdCB7IHJlcmVuZGVyIH0gPSByZW5kZXIoPEdpdEh1YkxvZ2luQnV0dG9uIHZhcmlhbnQ9XCJwcmltYXJ5XCIgLz4pO1xuICAgICAgbGV0IGJ1dHRvbiA9IHNjcmVlbi5nZXRCeVJvbGUoJ2J1dHRvbicpO1xuICAgICAgZXhwZWN0KGJ1dHRvbikudG9IYXZlQ2xhc3MoJ2JnLW5ldXRyYWwtOTAwJywgJ3RleHQtbmV1dHJhbC0wJyk7XG5cbiAgICAgIHJlcmVuZGVyKDxHaXRIdWJMb2dpbkJ1dHRvbiB2YXJpYW50PVwic2Vjb25kYXJ5XCIgLz4pO1xuICAgICAgYnV0dG9uID0gc2NyZWVuLmdldEJ5Um9sZSgnYnV0dG9uJyk7XG4gICAgICBleHBlY3QoYnV0dG9uKS50b0hhdmVDbGFzcygnYmctbmV1dHJhbC0xMDAnLCAndGV4dC1uZXV0cmFsLTkwMCcpO1xuXG4gICAgICByZXJlbmRlcig8R2l0SHViTG9naW5CdXR0b24gdmFyaWFudD1cIm91dGxpbmVcIiAvPik7XG4gICAgICBidXR0b24gPSBzY3JlZW4uZ2V0QnlSb2xlKCdidXR0b24nKTtcbiAgICAgIGV4cGVjdChidXR0b24pLnRvSGF2ZUNsYXNzKCdiZy10cmFuc3BhcmVudCcsICdib3JkZXItbmV1dHJhbC0zMDAnKTtcbiAgICB9KTtcblxuICAgIC8vIEVkZ2UgY2FzZSB0ZXN0XG4gICAgaXQoJ3Nob3VsZCBhcHBseSBjdXN0b20gY2xhc3NOYW1lJywgKCkgPT4ge1xuICAgICAgcmVuZGVyKDxHaXRIdWJMb2dpbkJ1dHRvbiBjbGFzc05hbWU9XCJjdXN0b20tY2xhc3NcIiAvPik7XG4gICAgICBcbiAgICAgIGNvbnN0IGJ1dHRvbiA9IHNjcmVlbi5nZXRCeVJvbGUoJ2J1dHRvbicpO1xuICAgICAgZXhwZWN0KGJ1dHRvbikudG9IYXZlQ2xhc3MoJ2N1c3RvbS1jbGFzcycpO1xuICAgIH0pO1xuICB9KTtcblxuICBkZXNjcmliZSgnYWNjZXNzaWJpbGl0eScsICgpID0+IHtcbiAgICAvLyBFeHBlY3RlZCB1c2UgdGVzdFxuICAgIGl0KCdzaG91bGQgaGF2ZSBwcm9wZXIgQVJJQSBhdHRyaWJ1dGVzJywgKCkgPT4ge1xuICAgICAgcmVuZGVyKDxHaXRIdWJMb2dpbkJ1dHRvbiAvPik7XG4gICAgICBcbiAgICAgIGNvbnN0IGJ1dHRvbiA9IHNjcmVlbi5nZXRCeVJvbGUoJ2J1dHRvbicpO1xuICAgICAgZXhwZWN0KGJ1dHRvbikudG9IYXZlQXR0cmlidXRlKCdhcmlhLWxhYmVsJywgJ1NpZ24gaW4gd2l0aCBHaXRIdWInKTtcbiAgICAgIGV4cGVjdChidXR0b24pLnRvSGF2ZUF0dHJpYnV0ZSgndHlwZScsICdidXR0b24nKTtcbiAgICAgIGV4cGVjdChidXR0b24pLnRvSGF2ZUF0dHJpYnV0ZSgnZGF0YS10ZXN0aWQnLCAnZ2l0aHViLWxvZ2luLWJ1dHRvbicpO1xuICAgIH0pO1xuXG4gICAgLy8gRXhwZWN0ZWQgdXNlIHRlc3RcbiAgICBpdCgnc2hvdWxkIGJlIGtleWJvYXJkIGFjY2Vzc2libGUnLCAoKSA9PiB7XG4gICAgICByZW5kZXIoPEdpdEh1YkxvZ2luQnV0dG9uIC8+KTtcbiAgICAgIFxuICAgICAgY29uc3QgYnV0dG9uID0gc2NyZWVuLmdldEJ5Um9sZSgnYnV0dG9uJyk7XG4gICAgICBleHBlY3QoYnV0dG9uKS50b0hhdmVDbGFzcygnZm9jdXM6b3V0bGluZS1ub25lJywgJ2ZvY3VzOnJpbmctMicpO1xuICAgIH0pO1xuXG4gICAgLy8gRWRnZSBjYXNlIHRlc3RcbiAgICBpdCgnc2hvdWxkIGhpZGUgZGVjb3JhdGl2ZSBpY29ucyBmcm9tIHNjcmVlbiByZWFkZXJzJywgKCkgPT4ge1xuICAgICAgcmVuZGVyKDxHaXRIdWJMb2dpbkJ1dHRvbiAvPik7XG4gICAgICBcbiAgICAgIGNvbnN0IGljb25zID0gc2NyZWVuLmdldEJ5Um9sZSgnYnV0dG9uJykucXVlcnlTZWxlY3RvckFsbCgnc3ZnJyk7XG4gICAgICBpY29ucy5mb3JFYWNoKGljb24gPT4ge1xuICAgICAgICBleHBlY3QoaWNvbikudG9IYXZlQXR0cmlidXRlKCdhcmlhLWhpZGRlbicsICd0cnVlJyk7XG4gICAgICB9KTtcbiAgICB9KTtcbiAgfSk7XG5cbiAgZGVzY3JpYmUoJ09BdXRoIGZ1bmN0aW9uYWxpdHknLCAoKSA9PiB7XG4gICAgLy8gRXhwZWN0ZWQgdXNlIHRlc3RcbiAgICBpdCgnc2hvdWxkIGluaXRpYXRlIE9BdXRoIGZsb3cgb24gY2xpY2snLCAoKSA9PiB7XG4gICAgICByZW5kZXIoPEdpdEh1YkxvZ2luQnV0dG9uIC8+KTtcbiAgICAgIFxuICAgICAgY29uc3QgYnV0dG9uID0gc2NyZWVuLmdldEJ5Um9sZSgnYnV0dG9uJyk7XG4gICAgICBmaXJlRXZlbnQuY2xpY2soYnV0dG9uKTtcblxuICAgICAgLy8gU2hvdWxkIHNldCBzdGF0ZSBpbiBzZXNzaW9uU3RvcmFnZVxuICAgICAgZXhwZWN0KG1vY2tTZXNzaW9uU3RvcmFnZS5zZXRJdGVtKS50b0hhdmVCZWVuQ2FsbGVkV2l0aChcbiAgICAgICAgJ2dpdGh1Yl9vYXV0aF9zdGF0ZScsXG4gICAgICAgIGV4cGVjdC5hbnkoU3RyaW5nKVxuICAgICAgKTtcblxuICAgICAgLy8gU2hvdWxkIHJlZGlyZWN0IHRvIEdpdEh1YiBPQXV0aCBVUkxcbiAgICAgIGV4cGVjdChtb2NrTG9jYXRpb24uaHJlZikudG9Db250YWluKCdodHRwczovL2dpdGh1Yi5jb20vbG9naW4vb2F1dGgvYXV0aG9yaXplJyk7XG4gICAgICBleHBlY3QobW9ja0xvY2F0aW9uLmhyZWYpLnRvQ29udGFpbignY2xpZW50X2lkPXRlc3QtY2xpZW50LWlkJyk7XG4gICAgICBleHBlY3QobW9ja0xvY2F0aW9uLmhyZWYpLnRvQ29udGFpbigncmVkaXJlY3RfdXJpPWh0dHA6Ly9sb2NhbGhvc3Q6MzAwMC9hdXRoL2NhbGxiYWNrJyk7XG4gICAgICBleHBlY3QobW9ja0xvY2F0aW9uLmhyZWYpLnRvQ29udGFpbignc2NvcGU9dXNlcjplbWFpbCUyMHJlYWQ6dXNlcicpO1xuICAgICAgZXhwZWN0KG1vY2tMb2NhdGlvbi5ocmVmKS50b0NvbnRhaW4oJ3N0YXRlPScpO1xuICAgICAgZXhwZWN0KG1vY2tMb2NhdGlvbi5ocmVmKS50b0NvbnRhaW4oJ2FsbG93X3NpZ251cD10cnVlJyk7XG4gICAgfSk7XG5cbiAgICAvLyBFeHBlY3RlZCB1c2UgdGVzdFxuICAgIGl0KCdzaG91bGQgY2FsbCBvbkxvZ2luU3RhcnQgY2FsbGJhY2sgd2hlbiBwcm92aWRlZCcsICgpID0+IHtcbiAgICAgIGNvbnN0IG9uTG9naW5TdGFydCA9IGplc3QuZm4oKTtcbiAgICAgIHJlbmRlcig8R2l0SHViTG9naW5CdXR0b24gb25Mb2dpblN0YXJ0PXtvbkxvZ2luU3RhcnR9IC8+KTtcbiAgICAgIFxuICAgICAgY29uc3QgYnV0dG9uID0gc2NyZWVuLmdldEJ5Um9sZSgnYnV0dG9uJyk7XG4gICAgICBmaXJlRXZlbnQuY2xpY2soYnV0dG9uKTtcblxuICAgICAgZXhwZWN0KG9uTG9naW5TdGFydCkudG9IYXZlQmVlbkNhbGxlZFRpbWVzKDEpO1xuICAgIH0pO1xuXG4gICAgLy8gRWRnZSBjYXNlIHRlc3RcbiAgICBpdCgnc2hvdWxkIGdlbmVyYXRlIHVuaXF1ZSBzdGF0ZSBwYXJhbWV0ZXInLCAoKSA9PiB7XG4gICAgICByZW5kZXIoPEdpdEh1YkxvZ2luQnV0dG9uIC8+KTtcbiAgICAgIFxuICAgICAgY29uc3QgYnV0dG9uID0gc2NyZWVuLmdldEJ5Um9sZSgnYnV0dG9uJyk7XG4gICAgICBcbiAgICAgIC8vIENsaWNrIG11bHRpcGxlIHRpbWVzXG4gICAgICBmaXJlRXZlbnQuY2xpY2soYnV0dG9uKTtcbiAgICAgIGNvbnN0IGZpcnN0Q2FsbCA9IG1vY2tTZXNzaW9uU3RvcmFnZS5zZXRJdGVtLm1vY2suY2FsbHNbMF1bMV07XG4gICAgICBcbiAgICAgIG1vY2tTZXNzaW9uU3RvcmFnZS5zZXRJdGVtLm1vY2tDbGVhcigpO1xuICAgICAgZmlyZUV2ZW50LmNsaWNrKGJ1dHRvbik7XG4gICAgICBjb25zdCBzZWNvbmRDYWxsID0gbW9ja1Nlc3Npb25TdG9yYWdlLnNldEl0ZW0ubW9jay5jYWxsc1swXVsxXTtcblxuICAgICAgLy8gU3RhdGUgc2hvdWxkIGJlIGRpZmZlcmVudCBlYWNoIHRpbWVcbiAgICAgIGV4cGVjdChmaXJzdENhbGwpLm5vdC50b0JlKHNlY29uZENhbGwpO1xuICAgIH0pO1xuXG4gICAgLy8gRWRnZSBjYXNlIHRlc3RcbiAgICBpdCgnc2hvdWxkIGluY2x1ZGUgdGltZXN0YW1wIGFuZCByYW5kb20gZGF0YSBpbiBzdGF0ZScsICgpID0+IHtcbiAgICAgIHJlbmRlcig8R2l0SHViTG9naW5CdXR0b24gLz4pO1xuICAgICAgXG4gICAgICBjb25zdCBidXR0b24gPSBzY3JlZW4uZ2V0QnlSb2xlKCdidXR0b24nKTtcbiAgICAgIGZpcmVFdmVudC5jbGljayhidXR0b24pO1xuXG4gICAgICBjb25zdCBzdGF0ZVBhcmFtID0gbW9ja1Nlc3Npb25TdG9yYWdlLnNldEl0ZW0ubW9jay5jYWxsc1swXVsxXTtcbiAgICAgIGNvbnN0IGRlY29kZWRTdGF0ZSA9IEpTT04ucGFyc2UoYXRvYihzdGF0ZVBhcmFtKSk7XG5cbiAgICAgIGV4cGVjdChkZWNvZGVkU3RhdGUpLnRvSGF2ZVByb3BlcnR5KCd0aW1lc3RhbXAnKTtcbiAgICAgIGV4cGVjdChkZWNvZGVkU3RhdGUpLnRvSGF2ZVByb3BlcnR5KCdyYW5kb20nKTtcbiAgICAgIGV4cGVjdCh0eXBlb2YgZGVjb2RlZFN0YXRlLnRpbWVzdGFtcCkudG9CZSgnbnVtYmVyJyk7XG4gICAgICBleHBlY3QodHlwZW9mIGRlY29kZWRTdGF0ZS5yYW5kb20pLnRvQmUoJ3N0cmluZycpO1xuICAgIH0pO1xuICB9KTtcblxuICBkZXNjcmliZSgnZXJyb3IgaGFuZGxpbmcnLCAoKSA9PiB7XG4gICAgLy8gRmFpbHVyZSBjYXNlIHRlc3RcbiAgICBpdCgnc2hvdWxkIGhhbmRsZSBtaXNzaW5nIEdpdEh1YiBjbGllbnQgSUQnLCAoKSA9PiB7XG4gICAgICBjb25zdCBjb25zb2xlU3B5ID0gamVzdC5zcHlPbihjb25zb2xlLCAnZXJyb3InKS5tb2NrSW1wbGVtZW50YXRpb24oKCkgPT4ge30pO1xuICAgICAgY29uc3Qgb3JpZ2luYWxFbnYgPSBwcm9jZXNzLmVudi5WSVRFX0dJVEhVQl9DTElFTlRfSUQ7XG4gICAgICBkZWxldGUgcHJvY2Vzcy5lbnYuVklURV9HSVRIVUJfQ0xJRU5UX0lEO1xuXG4gICAgICByZW5kZXIoPEdpdEh1YkxvZ2luQnV0dG9uIC8+KTtcbiAgICAgIFxuICAgICAgY29uc3QgYnV0dG9uID0gc2NyZWVuLmdldEJ5Um9sZSgnYnV0dG9uJyk7XG4gICAgICBmaXJlRXZlbnQuY2xpY2soYnV0dG9uKTtcblxuICAgICAgZXhwZWN0KGNvbnNvbGVTcHkpLnRvSGF2ZUJlZW5DYWxsZWRXaXRoKCdHaXRIdWIgQ2xpZW50IElEIG5vdCBjb25maWd1cmVkJyk7XG4gICAgICBleHBlY3QobW9ja0xvY2F0aW9uLmhyZWYpLnRvQmUoJycpO1xuICAgICAgXG4gICAgICAvLyBSZXN0b3JlXG4gICAgICBwcm9jZXNzLmVudi5WSVRFX0dJVEhVQl9DTElFTlRfSUQgPSBvcmlnaW5hbEVudjtcbiAgICAgIGNvbnNvbGVTcHkubW9ja1Jlc3RvcmUoKTtcbiAgICB9KTtcblxuICAgIC8vIEZhaWx1cmUgY2FzZSB0ZXN0XG4gICAgaXQoJ3Nob3VsZCBub3QgaW5pdGlhdGUgT0F1dGggd2hlbiBsb2FkaW5nJywgKCkgPT4ge1xuICAgICAgcmVuZGVyKDxHaXRIdWJMb2dpbkJ1dHRvbiBpc0xvYWRpbmc9e3RydWV9IC8+KTtcbiAgICAgIFxuICAgICAgY29uc3QgYnV0dG9uID0gc2NyZWVuLmdldEJ5Um9sZSgnYnV0dG9uJyk7XG4gICAgICBmaXJlRXZlbnQuY2xpY2soYnV0dG9uKTtcblxuICAgICAgZXhwZWN0KG1vY2tTZXNzaW9uU3RvcmFnZS5zZXRJdGVtKS5ub3QudG9IYXZlQmVlbkNhbGxlZCgpO1xuICAgICAgZXhwZWN0KG1vY2tMb2NhdGlvbi5ocmVmKS50b0JlKCcnKTtcbiAgICB9KTtcblxuICAgIC8vIEZhaWx1cmUgY2FzZSB0ZXN0XG4gICAgaXQoJ3Nob3VsZCBoYW5kbGUgc2Vzc2lvblN0b3JhZ2UgZXJyb3JzIGdyYWNlZnVsbHknLCAoKSA9PiB7XG4gICAgICBtb2NrU2Vzc2lvblN0b3JhZ2Uuc2V0SXRlbS5tb2NrSW1wbGVtZW50YXRpb24oKCkgPT4ge1xuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ1Nlc3Npb25TdG9yYWdlIGVycm9yJyk7XG4gICAgICB9KTtcblxuICAgICAgcmVuZGVyKDxHaXRIdWJMb2dpbkJ1dHRvbiAvPik7XG4gICAgICBcbiAgICAgIGNvbnN0IGJ1dHRvbiA9IHNjcmVlbi5nZXRCeVJvbGUoJ2J1dHRvbicpO1xuICAgICAgXG4gICAgICAvLyBTaG91bGQgbm90IHRocm93IGVycm9yXG4gICAgICBleHBlY3QoKCkgPT4gZmlyZUV2ZW50LmNsaWNrKGJ1dHRvbikpLm5vdC50b1Rocm93KCk7XG4gICAgfSk7XG4gIH0pO1xuXG4gIGRlc2NyaWJlKCdjb21wb25lbnQgc3RhdGUgbWFuYWdlbWVudCcsICgpID0+IHtcbiAgICAvLyBFeHBlY3RlZCB1c2UgdGVzdFxuICAgIGl0KCdzaG91bGQgaGFuZGxlIG11bHRpcGxlIHJhcGlkIGNsaWNrcycsICgpID0+IHtcbiAgICAgIHJlbmRlcig8R2l0SHViTG9naW5CdXR0b24gLz4pO1xuICAgICAgXG4gICAgICBjb25zdCBidXR0b24gPSBzY3JlZW4uZ2V0QnlSb2xlKCdidXR0b24nKTtcbiAgICAgIFxuICAgICAgLy8gUmFwaWRseSBjbGljayBtdWx0aXBsZSB0aW1lc1xuICAgICAgZmlyZUV2ZW50LmNsaWNrKGJ1dHRvbik7XG4gICAgICBmaXJlRXZlbnQuY2xpY2soYnV0dG9uKTtcbiAgICAgIGZpcmVFdmVudC5jbGljayhidXR0b24pO1xuXG4gICAgICAvLyBTaG91bGQgc3RpbGwgd29yayAobGFzdCBjbGljayBzaG91bGQgZXhlY3V0ZSlcbiAgICAgIGV4cGVjdChtb2NrU2Vzc2lvblN0b3JhZ2Uuc2V0SXRlbSkudG9IYXZlQmVlbkNhbGxlZCgpO1xuICAgICAgZXhwZWN0KG1vY2tMb2NhdGlvbi5ocmVmKS50b0NvbnRhaW4oJ2dpdGh1Yi5jb20nKTtcbiAgICB9KTtcblxuICAgIC8vIEVkZ2UgY2FzZSB0ZXN0XG4gICAgaXQoJ3Nob3VsZCBub3QgaW50ZXJmZXJlIHdpdGggYnV0dG9uIHdoZW4gZGlzYWJsZWQgdmlhIGxvYWRpbmcnLCBhc3luYyAoKSA9PiB7XG4gICAgICBjb25zdCB7IHJlcmVuZGVyIH0gPSByZW5kZXIoPEdpdEh1YkxvZ2luQnV0dG9uIGlzTG9hZGluZz17ZmFsc2V9IC8+KTtcbiAgICAgIFxuICAgICAgbGV0IGJ1dHRvbiA9IHNjcmVlbi5nZXRCeVJvbGUoJ2J1dHRvbicpO1xuICAgICAgZXhwZWN0KGJ1dHRvbikubm90LnRvQmVEaXNhYmxlZCgpO1xuXG4gICAgICByZXJlbmRlcig8R2l0SHViTG9naW5CdXR0b24gaXNMb2FkaW5nPXt0cnVlfSAvPik7XG4gICAgICBidXR0b24gPSBzY3JlZW4uZ2V0QnlSb2xlKCdidXR0b24nKTtcbiAgICAgIGV4cGVjdChidXR0b24pLnRvQmVEaXNhYmxlZCgpO1xuXG4gICAgICBmaXJlRXZlbnQuY2xpY2soYnV0dG9uKTtcbiAgICAgIGV4cGVjdChtb2NrU2Vzc2lvblN0b3JhZ2Uuc2V0SXRlbSkubm90LnRvSGF2ZUJlZW5DYWxsZWQoKTtcbiAgICB9KTtcbiAgfSk7XG5cbiAgZGVzY3JpYmUoJ1VSTCBjb25zdHJ1Y3Rpb24nLCAoKSA9PiB7XG4gICAgLy8gRXhwZWN0ZWQgdXNlIHRlc3RcbiAgICBpdCgnc2hvdWxkIGNvbnN0cnVjdCBwcm9wZXIgT0F1dGggVVJMIHdpdGggYWxsIHBhcmFtZXRlcnMnLCAoKSA9PiB7XG4gICAgICByZW5kZXIoPEdpdEh1YkxvZ2luQnV0dG9uIC8+KTtcbiAgICAgIFxuICAgICAgY29uc3QgYnV0dG9uID0gc2NyZWVuLmdldEJ5Um9sZSgnYnV0dG9uJyk7XG4gICAgICBmaXJlRXZlbnQuY2xpY2soYnV0dG9uKTtcblxuICAgICAgY29uc3QgdXJsID0gbmV3IFVSTChtb2NrTG9jYXRpb24uaHJlZik7XG4gICAgICBcbiAgICAgIGV4cGVjdCh1cmwuaG9zdG5hbWUpLnRvQmUoJ2dpdGh1Yi5jb20nKTtcbiAgICAgIGV4cGVjdCh1cmwucGF0aG5hbWUpLnRvQmUoJy9sb2dpbi9vYXV0aC9hdXRob3JpemUnKTtcbiAgICAgIGV4cGVjdCh1cmwuc2VhcmNoUGFyYW1zLmdldCgnY2xpZW50X2lkJykpLnRvQmUoJ3Rlc3QtY2xpZW50LWlkJyk7XG4gICAgICBleHBlY3QodXJsLnNlYXJjaFBhcmFtcy5nZXQoJ3JlZGlyZWN0X3VyaScpKS50b0JlKCdodHRwOi8vbG9jYWxob3N0OjMwMDAvYXV0aC9jYWxsYmFjaycpO1xuICAgICAgZXhwZWN0KHVybC5zZWFyY2hQYXJhbXMuZ2V0KCdzY29wZScpKS50b0JlKCd1c2VyOmVtYWlsIHJlYWQ6dXNlcicpO1xuICAgICAgZXhwZWN0KHVybC5zZWFyY2hQYXJhbXMuZ2V0KCdhbGxvd19zaWdudXAnKSkudG9CZSgndHJ1ZScpO1xuICAgICAgZXhwZWN0KHVybC5zZWFyY2hQYXJhbXMuZ2V0KCdzdGF0ZScpKS50b0JlVHJ1dGh5KCk7XG4gICAgfSk7XG5cbiAgICAvLyBFZGdlIGNhc2UgdGVzdFxuICAgIGl0KCdzaG91bGQgaGFuZGxlIGRpZmZlcmVudCBvcmlnaW4gVVJMcycsICgpID0+IHtcbiAgICAgIG1vY2tMb2NhdGlvbi5vcmlnaW4gPSAnaHR0cHM6Ly9hcHAuZXhhbXBsZS5jb20nO1xuICAgICAgXG4gICAgICByZW5kZXIoPEdpdEh1YkxvZ2luQnV0dG9uIC8+KTtcbiAgICAgIFxuICAgICAgY29uc3QgYnV0dG9uID0gc2NyZWVuLmdldEJ5Um9sZSgnYnV0dG9uJyk7XG4gICAgICBmaXJlRXZlbnQuY2xpY2soYnV0dG9uKTtcblxuICAgICAgZXhwZWN0KG1vY2tMb2NhdGlvbi5ocmVmKS50b0NvbnRhaW4oJ3JlZGlyZWN0X3VyaT1odHRwczovL2FwcC5leGFtcGxlLmNvbS9hdXRoL2NhbGxiYWNrJyk7XG4gICAgfSk7XG4gIH0pO1xufSk7ICJdLCJuYW1lcyI6WyJtb2NrRW52IiwiVklURV9HSVRIVUJfQ0xJRU5UX0lEIiwicHJvY2VzcyIsImVudiIsIm1vY2tMb2NhdGlvbiIsIm9yaWdpbiIsImhyZWYiLCJPYmplY3QiLCJkZWZpbmVQcm9wZXJ0eSIsIndpbmRvdyIsInZhbHVlIiwid3JpdGFibGUiLCJtb2NrU2Vzc2lvblN0b3JhZ2UiLCJzZXRJdGVtIiwiamVzdCIsImZuIiwiZ2V0SXRlbSIsInJlbW92ZUl0ZW0iLCJjbGVhciIsImRlc2NyaWJlIiwiYmVmb3JlRWFjaCIsImNsZWFyQWxsTW9ja3MiLCJhZnRlckVhY2giLCJyZXN0b3JlQWxsTW9ja3MiLCJpdCIsInJlbmRlciIsIkdpdEh1YkxvZ2luQnV0dG9uIiwiYnV0dG9uIiwic2NyZWVuIiwiZ2V0QnlSb2xlIiwibmFtZSIsImV4cGVjdCIsInRvQmVJblRoZURvY3VtZW50IiwidG9IYXZlVGV4dENvbnRlbnQiLCJub3QiLCJ0b0JlRGlzYWJsZWQiLCJpY29uIiwicXVlcnlTZWxlY3RvciIsInRvSGF2ZUF0dHJpYnV0ZSIsImlzTG9hZGluZyIsInNwaW5uZXIiLCJyZXJlbmRlciIsInNpemUiLCJ0b0hhdmVDbGFzcyIsInZhcmlhbnQiLCJjbGFzc05hbWUiLCJpY29ucyIsInF1ZXJ5U2VsZWN0b3JBbGwiLCJmb3JFYWNoIiwiZmlyZUV2ZW50IiwiY2xpY2siLCJ0b0hhdmVCZWVuQ2FsbGVkV2l0aCIsImFueSIsIlN0cmluZyIsInRvQ29udGFpbiIsIm9uTG9naW5TdGFydCIsInRvSGF2ZUJlZW5DYWxsZWRUaW1lcyIsImZpcnN0Q2FsbCIsIm1vY2siLCJjYWxscyIsIm1vY2tDbGVhciIsInNlY29uZENhbGwiLCJ0b0JlIiwic3RhdGVQYXJhbSIsImRlY29kZWRTdGF0ZSIsIkpTT04iLCJwYXJzZSIsImF0b2IiLCJ0b0hhdmVQcm9wZXJ0eSIsInRpbWVzdGFtcCIsInJhbmRvbSIsImNvbnNvbGVTcHkiLCJzcHlPbiIsImNvbnNvbGUiLCJtb2NrSW1wbGVtZW50YXRpb24iLCJvcmlnaW5hbEVudiIsIm1vY2tSZXN0b3JlIiwidG9IYXZlQmVlbkNhbGxlZCIsIkVycm9yIiwidG9UaHJvdyIsInVybCIsIlVSTCIsImhvc3RuYW1lIiwicGF0aG5hbWUiLCJzZWFyY2hQYXJhbXMiLCJnZXQiLCJ0b0JlVHJ1dGh5Il0sIm1hcHBpbmdzIjoiQUFBQTs7O0NBR0M7Ozs7OzhEQUVpQjt3QkFDd0I7UUFDbkM7MEVBQ3VCOzs7Ozs7QUFFOUIsNkJBQTZCO0FBQzdCLE1BQU1BLFVBQVU7SUFDZEMsdUJBQXVCO0FBQ3pCO0FBRUEsNEJBQTRCO0FBQzVCQyxRQUFRQyxHQUFHLENBQUNGLHFCQUFxQixHQUFHO0FBRXBDLHVCQUF1QjtBQUN2QixNQUFNRyxlQUFlO0lBQ25CQyxRQUFRO0lBQ1JDLE1BQU07QUFDUjtBQUVBQyxPQUFPQyxjQUFjLENBQUNDLFFBQVEsWUFBWTtJQUN4Q0MsT0FBT047SUFDUE8sVUFBVTtBQUNaO0FBRUEsc0JBQXNCO0FBQ3RCLE1BQU1DLHFCQUFxQjtJQUN6QkMsU0FBU0MsS0FBS0MsRUFBRTtJQUNoQkMsU0FBU0YsS0FBS0MsRUFBRTtJQUNoQkUsWUFBWUgsS0FBS0MsRUFBRTtJQUNuQkcsT0FBT0osS0FBS0MsRUFB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