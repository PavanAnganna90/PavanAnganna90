{"version":3,"sources":["/Users/pavan/Desktop/Devops-app-dev-cursor/frontend/src/components/charts/LineChart.tsx"],"sourcesContent":["'use client';\n\nimport React, { useMemo } from 'react';\nimport { useChartTheme } from '@/hooks/useChartTheme';\nimport { \n  sanitizeLineChartData, \n  sanitizeChartProps, \n  validationMonitor,\n  ChartValidationError \n} from '@/lib/chartValidation';\n\ninterface LineChartProps {\n  data: number[];\n  height?: number;\n  color?: string;\n  strokeWidth?: number;\n  showDots?: boolean;\n  animated?: boolean;\n  className?: string;\n  colorIndex?: number; // For automatic theme color selection\n}\n\nexport const LineChart = React.memo(function LineChart(props: LineChartProps) {\n  const { getColor } = useChartTheme();\n  \n  // Validate and sanitize props\n  const {\n    data: rawData,\n    height = 40,\n    color,\n    strokeWidth = 2,\n    showDots = false,\n    animated = true,\n    className = '',\n    colorIndex = 0\n  } = useMemo(() => {\n    return validationMonitor.measureValidation('LineChart', () => {\n      try {\n        const sanitizedProps = sanitizeChartProps(props);\n        const sanitizedData = sanitizeLineChartData(props.data);\n        \n        return {\n          ...props,\n          ...sanitizedProps,\n          data: sanitizedData\n        };\n      } catch (error) {\n        if (error instanceof ChartValidationError) {\n          console.error('LineChart validation error:', error);\n          // Return safe defaults\n          return {\n            ...props,\n            data: [],\n            height: 40,\n            strokeWidth: 2,\n            showDots: false,\n            animated: true,\n            className: '',\n            colorIndex: 0\n          };\n        }\n        throw error;\n      }\n    });\n  }, [props]);\n\n  const data = rawData;\n  const chartColor = color || getColor(colorIndex);\n  \n  if (!data || data.length === 0) {\n    return (\n      <div className={`w-full bg-gray-100 dark:bg-invary-secondary/20 rounded ${className}`} style={{ height }}>\n        <div className=\"flex items-center justify-center h-full text-invary-neutral dark:text-gray-400 text-xs\">\n          No data\n        </div>\n      </div>\n    );\n  }\n\n  const maxValue = Math.max(...data);\n  const minValue = Math.min(...data);\n  const range = maxValue - minValue || 1; // Prevent division by zero\n\n  // Memoize expensive path calculations\n  const { pathData, points } = useMemo(() => {\n    const width = 100; // Use percentage width\n    const padding = 2;\n    const stepX = (width - padding * 2) / (data.length - 1);\n    \n    const calculatedPoints = data.map((value, index) => {\n      const x = padding + index * stepX;\n      const y = height - padding - ((value - minValue) / range) * (height - padding * 2);\n      return { x, y, coord: `${x},${y}` };\n    });\n\n    const pathData = `M ${calculatedPoints.map(p => p.coord).join(' L ')}`;\n    \n    return { pathData, points: calculatedPoints };\n  }, [data, height, minValue, range]);\n\n  // Create stable gradient ID to prevent re-rendering\n  const gradientId = useMemo(() => \n    `gradient-${colorIndex}-${chartColor.replace('#', '')}`, \n    [colorIndex, chartColor]\n  );\n\n  return (\n    <div className={`w-full ${className}`} style={{ height }}>\n      <svg \n        width=\"100%\" \n        height=\"100%\" \n        viewBox={`0 0 ${width} ${height}`} \n        className=\"overflow-visible\"\n      >\n        <defs>\n          <linearGradient id={gradientId} x1=\"0%\" y1=\"0%\" x2=\"0%\" y2=\"100%\">\n            <stop offset=\"0%\" stopColor={chartColor} stopOpacity=\"0.4\" />\n            <stop offset=\"100%\" stopColor={chartColor} stopOpacity=\"0.05\" />\n          </linearGradient>\n        </defs>\n        \n        {/* Fill area */}\n        <path\n          d={`${pathData} L ${points[points.length - 1]?.x || 0},${height - 2} L ${points[0]?.x || 0},${height - 2} Z`}\n          fill={`url(#${gradientId})`}\n          className={animated ? 'transition-all duration-300 ease-in-out' : ''}\n        />\n        \n        {/* Line */}\n        <path\n          d={pathData}\n          fill=\"none\"\n          stroke={chartColor}\n          strokeWidth={strokeWidth}\n          strokeLinecap=\"round\"\n          strokeLinejoin=\"round\"\n          className={animated ? 'transition-all duration-300 ease-in-out' : ''}\n        />\n        \n        {/* Dots */}\n        {showDots && points.map((point, index) => (\n          <circle\n            key={index}\n            cx={point.x}\n            cy={point.y}\n            r=\"2\"\n            fill={chartColor}\n            className={animated ? 'transition-all duration-300 ease-in-out' : ''}\n          />\n        ))}\n      </svg>\n    </div>\n  );\n}, (prevProps, nextProps) => {\n  // Custom comparison for array data\n  if (prevProps.data.length !== nextProps.data.length) return false;\n  \n  const dataEqual = prevProps.data.every((val, idx) => val === nextProps.data[idx]);\n  \n  return (\n    dataEqual &&\n    prevProps.height === nextProps.height &&\n    prevProps.color === nextProps.color &&\n    prevProps.strokeWidth === nextProps.strokeWidth &&\n    prevProps.showDots === nextProps.showDots &&\n    prevProps.animated === nextProps.animated &&\n    prevProps.className === nextProps.className &&\n    prevProps.colorIndex === nextProps.colorIndex\n  );\n});\n\nexport default LineChart;"],"names":["LineChart","React","memo","props","getColor","useChartTheme","data","rawData","height","color","strokeWidth","showDots","animated","className","colorIndex","useMemo","validationMonitor","measureValidation","sanitizedProps","sanitizeChartProps","sanitizedData","sanitizeLineChartData","error","ChartValidationError","console","chartColor","length","div","style","maxValue","Math","max","minValue","min","range","pathData","points","width","padding","stepX","calculatedPoints","map","value","index","x","y","coord","p","join","gradientId","replace","svg","viewBox","defs","linearGradient","id","x1","y1","x2","y2","stop","offset","stopColor","stopOpacity","path","d","fill","stroke","strokeLinecap","strokeLinejoin","point","circle","cx","cy","r","prevProps","nextProps","dataEqual","every","val","idx"],"mappings":"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"}