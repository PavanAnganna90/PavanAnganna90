{"version":3,"sources":["/Users/pavan/Desktop/Devops-app-dev-cursor/frontend/src/components/teams/__tests__/TeamManagementDashboard.test.tsx"],"sourcesContent":["/**\n * Team Management Dashboard Tests\n * \n * Comprehensive test suite for the TeamManagementDashboard component.\n */\n\nimport { render, screen, fireEvent, waitFor } from '@testing-library/react';\nimport { QueryClient, QueryClientProvider } from '@tanstack/react-query';\nimport { describe, it, expect, vi, beforeEach } from 'vitest';\nimport { TeamManagementDashboard } from '../TeamManagementDashboard';\n\n// Mock hooks\nvi.mock('@/hooks/useMonitoring', () => ({\n  usePerformanceMonitoring: () => ({\n    trackUserInteraction: vi.fn(),\n  }),\n}));\n\nvi.mock('@/components/ui/Toast', () => ({\n  useToast: () => ({\n    showToast: vi.fn(),\n  }),\n}));\n\n// Mock child components\nvi.mock('../TeamList', () => ({\n  TeamList: ({ onTeamSelect }: { onTeamSelect: (team: any) => void }) => (\n    <div data-testid=\"team-list\">\n      <button onClick={() => onTeamSelect({ id: '1', name: 'Test Team' })}>\n        Select Team\n      </button>\n    </div>\n  ),\n}));\n\nvi.mock('../TeamMembersList', () => ({\n  TeamMembersList: ({ teamId }: { teamId: string }) => (\n    <div data-testid=\"team-members-list\">Members for team {teamId}</div>\n  ),\n}));\n\nvi.mock('@/components/rbac/PermissionGuard', () => ({\n  PermissionGuard: ({ children }: { children: React.ReactNode }) => (\n    <div data-testid=\"permission-guard\">{children}</div>\n  ),\n}));\n\n// Test wrapper component\nconst TestWrapper = ({ children }: { children: React.ReactNode }) => {\n  const queryClient = new QueryClient({\n    defaultOptions: {\n      queries: {\n        retry: false,\n      },\n    },\n  });\n\n  return (\n    <QueryClientProvider client={queryClient}>\n      {children}\n    </QueryClientProvider>\n  );\n};\n\ndescribe('TeamManagementDashboard', () => {\n  let queryClient: QueryClient;\n\n  beforeEach(() => {\n    queryClient = new QueryClient({\n      defaultOptions: {\n        queries: {\n          retry: false,\n        },\n      },\n    });\n  });\n\n  it('renders the dashboard with all tabs', () => {\n    render(\n      <TestWrapper>\n        <TeamManagementDashboard />\n      </TestWrapper>\n    );\n\n    expect(screen.getByText('Team Management')).toBeInTheDocument();\n    expect(screen.getByText('Overview')).toBeInTheDocument();\n    expect(screen.getByText('Teams')).toBeInTheDocument();\n    expect(screen.getByText('Members')).toBeInTheDocument();\n    expect(screen.getByText('Roles')).toBeInTheDocument();\n    expect(screen.getByText('Settings')).toBeInTheDocument();\n  });\n\n  it('displays overview tab by default', () => {\n    render(\n      <TestWrapper>\n        <TeamManagementDashboard />\n      </TestWrapper>\n    );\n\n    expect(screen.getByText('Team Statistics')).toBeInTheDocument();\n    expect(screen.getByText('Total Teams')).toBeInTheDocument();\n    expect(screen.getByText('Total Members')).toBeInTheDocument();\n    expect(screen.getByText('Pending Invitations')).toBeInTheDocument();\n  });\n\n  it('switches to teams tab when clicked', async () => {\n    render(\n      <TestWrapper>\n        <TeamManagementDashboard />\n      </TestWrapper>\n    );\n\n    fireEvent.click(screen.getByText('Teams'));\n\n    await waitFor(() => {\n      expect(screen.getByTestId('team-list')).toBeInTheDocument();\n    });\n  });\n\n  it('switches to members tab when clicked', async () => {\n    render(\n      <TestWrapper>\n        <TeamManagementDashboard />\n      </TestWrapper>\n    );\n\n    fireEvent.click(screen.getByText('Members'));\n\n    await waitFor(() => {\n      expect(screen.getByText('All Team Members')).toBeInTheDocument();\n    });\n  });\n\n  it('handles team selection', async () => {\n    render(\n      <TestWrapper>\n        <TeamManagementDashboard />\n      </TestWrapper>\n    );\n\n    fireEvent.click(screen.getByText('Teams'));\n\n    await waitFor(() => {\n      expect(screen.getByTestId('team-list')).toBeInTheDocument();\n    });\n\n    fireEvent.click(screen.getByText('Select Team'));\n\n    await waitFor(() => {\n      expect(screen.getByText('Members for team 1')).toBeInTheDocument();\n    });\n  });\n\n  it('renders statistics with correct labels', () => {\n    render(\n      <TestWrapper>\n        <TeamManagementDashboard />\n      </TestWrapper>\n    );\n\n    expect(screen.getByText('Total Teams')).toBeInTheDocument();\n    expect(screen.getByText('Total Members')).toBeInTheDocument();\n    expect(screen.getByText('Active Teams')).toBeInTheDocument();\n    expect(screen.getByText('Pending Invitations')).toBeInTheDocument();\n  });\n\n  it('displays recent activity section', () => {\n    render(\n      <TestWrapper>\n        <TeamManagementDashboard />\n      </TestWrapper>\n    );\n\n    expect(screen.getByText('Recent Activity')).toBeInTheDocument();\n  });\n\n  it('shows permission-guarded actions', () => {\n    render(\n      <TestWrapper>\n        <TeamManagementDashboard />\n      </TestWrapper>\n    );\n\n    expect(screen.getAllByTestId('permission-guard')).toHaveLength(2);\n  });\n\n  it('handles loading states', () => {\n    render(\n      <TestWrapper>\n        <TeamManagementDashboard />\n      </TestWrapper>\n    );\n\n    // Check for loading indicators\n    expect(screen.getByText('Loading...')).toBeInTheDocument();\n  });\n\n  it('handles error states', async () => {\n    // Mock error in data loading\n    const consoleSpy = vi.spyOn(console, 'error').mockImplementation(() => {});\n\n    render(\n      <TestWrapper>\n        <TeamManagementDashboard />\n      </TestWrapper>\n    );\n\n    await waitFor(() => {\n      // Component should handle errors gracefully\n      expect(screen.getByText('Team Management')).toBeInTheDocument();\n    });\n\n    consoleSpy.mockRestore();\n  });\n\n  it('renders team distribution chart', () => {\n    render(\n      <TestWrapper>\n        <TeamManagementDashboard />\n      </TestWrapper>\n    );\n\n    expect(screen.getByText('Team Distribution')).toBeInTheDocument();\n  });\n\n  it('renders member activity chart', () => {\n    render(\n      <TestWrapper>\n        <TeamManagementDashboard />\n      </TestWrapper>\n    );\n\n    expect(screen.getByText('Member Activity')).toBeInTheDocument();\n  });\n\n  it('allows tab navigation via keyboard', () => {\n    render(\n      <TestWrapper>\n        <TeamManagementDashboard />\n      </TestWrapper>\n    );\n\n    const overviewTab = screen.getByText('Overview');\n    const teamsTab = screen.getByText('Teams');\n\n    expect(overviewTab).toBeInTheDocument();\n    expect(teamsTab).toBeInTheDocument();\n\n    // Test keyboard navigation\n    fireEvent.keyDown(overviewTab, { key: 'ArrowRight' });\n    expect(teamsTab).toHaveFocus();\n  });\n\n  it('displays correct team statistics', () => {\n    render(\n      <TestWrapper>\n        <TeamManagementDashboard />\n      </TestWrapper>\n    );\n\n    // Check for numeric values in statistics\n    expect(screen.getByText('15')).toBeInTheDocument(); // Total Teams\n    expect(screen.getByText('127')).toBeInTheDocument(); // Total Members\n    expect(screen.getByText('12')).toBeInTheDocument(); // Active Teams\n    expect(screen.getByText('8')).toBeInTheDocument(); // Pending Invitations\n  });\n});"],"names":["vi","mock","usePerformanceMonitoring","trackUserInteraction","fn","useToast","showToast","TeamList","onTeamSelect","div","data-testid","button","onClick","id","name","TeamMembersList","teamId","PermissionGuard","children","TestWrapper","queryClient","QueryClient","defaultOptions","queries","retry","QueryClientProvider","client","describe","beforeEach","it","render","TeamManagementDashboard","expect","screen","getByText","toBeInTheDocument","fireEvent","click","waitFor","getByTestId","getAllByTestId","toHaveLength","consoleSpy","spyOn","console","mockImplementation","mockRestore","overviewTab","teamsTab","keyDown","key","toHaveFocus"],"mappings":"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"}